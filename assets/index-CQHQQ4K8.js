(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}})();class se{static getElements(e,t=document){if(typeof e=="string"){const i="getElementById"in t?t:void 0;if(i&&!isNaN(+e[0])){const r=i.getElementById(e);return r?[r]:[]}let o=t.querySelectorAll(e);if(!o.length&&e[0]!=="."&&e[0]!=="#"&&(o=t.querySelectorAll("."+e),o.length||(o=t.querySelectorAll("#"+e)),!o.length)){const r=t.querySelector(`[gs-id="${e}"]`);return r?[r]:[]}return Array.from(o)}return[e]}static getElement(e,t=document){if(typeof e=="string"){const i="getElementById"in t?t:void 0;if(!e.length)return null;if(i&&e[0]==="#")return i.getElementById(e.substring(1));if(e[0]==="#"||e[0]==="."||e[0]==="[")return t.querySelector(e);if(i&&!isNaN(+e[0]))return i.getElementById(e);let o=t.querySelector(e);return i&&!o&&(o=i.getElementById(e)),o||(o=t.querySelector("."+e)),o}return e}static lazyLoad(e){return e.lazyLoad||e.grid?.opts?.lazyLoad&&e.lazyLoad!==!1}static createDiv(e,t){const i=document.createElement("div");return e.forEach(o=>{o&&i.classList.add(o)}),t?.appendChild(i),i}static shouldSizeToContent(e,t=!1){return e?.grid&&(t?e.sizeToContent===!0||e.grid.opts.sizeToContent===!0&&e.sizeToContent===void 0:!!e.sizeToContent||e.grid.opts.sizeToContent&&e.sizeToContent!==!1)}static isIntercepted(e,t){return!(e.y>=t.y+t.h||e.y+e.h<=t.y||e.x+e.w<=t.x||e.x>=t.x+t.w)}static isTouching(e,t){return se.isIntercepted(e,{x:t.x-.5,y:t.y-.5,w:t.w+1,h:t.h+1})}static areaIntercept(e,t){const i=e.x>t.x?e.x:t.x,o=e.x+e.w<t.x+t.w?e.x+e.w:t.x+t.w;if(o<=i)return 0;const r=e.y>t.y?e.y:t.y,n=e.y+e.h<t.y+t.h?e.y+e.h:t.y+t.h;return n<=r?0:(o-i)*(n-r)}static area(e){return e.w*e.h}static sort(e,t=1){return e.sort((o,r)=>{const n=t*((o.y??1e4)-(r.y??1e4));return n===0?t*((o.x??1e4)-(r.x??1e4)):n})}static find(e,t){return t?e.find(i=>i.id===t):void 0}static toBool(e){return typeof e=="boolean"?e:typeof e=="string"?(e=e.toLowerCase(),!(e===""||e==="no"||e==="false"||e==="0")):!!e}static toNumber(e){return e===null||e.length===0?void 0:Number(e)}static parseHeight(e){let t,i="px";if(typeof e=="string")if(e==="auto"||e==="")t=0;else{const o=e.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw|%|cm|mm)?$/);if(!o)throw new Error(`Invalid height val = ${e}`);i=o[2]||"px",t=parseFloat(o[1])}else t=e;return{h:t,unit:i}}static defaults(e,...t){return t.forEach(i=>{for(const o in i){if(!i.hasOwnProperty(o))return;e[o]===null||e[o]===void 0?e[o]=i[o]:typeof i[o]=="object"&&typeof e[o]=="object"&&se.defaults(e[o],i[o])}}),e}static same(e,t){if(typeof e!="object")return e==t;if(typeof e!=typeof t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}static copyPos(e,t,i=!1){return t.x!==void 0&&(e.x=t.x),t.y!==void 0&&(e.y=t.y),t.w!==void 0&&(e.w=t.w),t.h!==void 0&&(e.h=t.h),i&&(t.minW&&(e.minW=t.minW),t.minH&&(e.minH=t.minH),t.maxW&&(e.maxW=t.maxW),t.maxH&&(e.maxH=t.maxH)),e}static samePos(e,t){return e&&t&&e.x===t.x&&e.y===t.y&&(e.w||1)===(t.w||1)&&(e.h||1)===(t.h||1)}static sanitizeMinMax(e){e.minW||delete e.minW,e.minH||delete e.minH,e.maxW||delete e.maxW,e.maxH||delete e.maxH}static removeInternalAndSame(e,t){if(!(typeof e!="object"||typeof t!="object")&&!(Array.isArray(e)||Array.isArray(t)))for(let i in e){const o=e[i],r=t[i];i[0]==="_"||o===r?delete e[i]:o&&typeof o=="object"&&r!==void 0&&(se.removeInternalAndSame(o,r),Object.keys(o).length||delete e[i])}}static removeInternalForSave(e,t=!0){for(let i in e)(i[0]==="_"||e[i]===null||e[i]===void 0)&&delete e[i];delete e.grid,t&&delete e.el,e.autoPosition||delete e.autoPosition,e.noResize||delete e.noResize,e.noMove||delete e.noMove,e.locked||delete e.locked,(e.w===1||e.w===e.minW)&&delete e.w,(e.h===1||e.h===e.minH)&&delete e.h}static throttle(e,t){let i=!1;return(...o)=>{i||(i=!0,setTimeout(()=>{e(...o),i=!1},t))}}static removePositioningStyles(e){const t=e.style;t.position&&t.removeProperty("position"),t.left&&t.removeProperty("left"),t.top&&t.removeProperty("top"),t.width&&t.removeProperty("width"),t.height&&t.removeProperty("height")}static getScrollElement(e){if(!e)return document.scrollingElement||document.documentElement;const t=getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowY)?e:se.getScrollElement(e.parentElement)}static updateScrollPosition(e,t,i){const o=se.getScrollElement(e);if(!o)return;const r=e.getBoundingClientRect(),n=o.getBoundingClientRect(),s=window.innerHeight||document.documentElement.clientHeight,a=r.bottom-Math.min(n.bottom,s),l=r.top-Math.max(n.top,0),u=o.scrollTop;l<0&&i<0?e.offsetHeight>n.height?o.scrollTop+=i:o.scrollTop+=Math.abs(l)>Math.abs(i)?i:l:a>0&&i>0&&(e.offsetHeight>n.height?o.scrollTop+=i:o.scrollTop+=a>i?i:a),t.top+=o.scrollTop-u}static updateScrollResize(e,t,i){const o=se.getScrollElement(t),r=o.clientHeight,n=o===se.getScrollElement()?0:o.getBoundingClientRect().top,s=e.clientY-n,a=s<i,l=s>r-i;a?o.scrollBy({behavior:"smooth",top:s-i}):l&&o.scrollBy({behavior:"smooth",top:i-(r-s)})}static clone(e){return e==null||typeof e!="object"?e:e instanceof Array?[...e]:{...e}}static cloneDeep(e){const t=["parentGrid","el","grid","subGrid","engine"],i=se.clone(e);for(const o in i)i.hasOwnProperty(o)&&typeof i[o]=="object"&&o.substring(0,2)!=="__"&&!t.find(r=>r===o)&&(i[o]=se.cloneDeep(e[o]));return i}static cloneNode(e){const t=e.cloneNode(!0);return t.removeAttribute("id"),t}static appendTo(e,t){let i;typeof t=="string"?i=se.getElement(t):i=t,i&&i.appendChild(e)}static addElStyles(e,t){if(t instanceof Object)for(const i in t)t.hasOwnProperty(i)&&(Array.isArray(t[i])?t[i].forEach(o=>{e.style[i]=o}):e.style[i]=t[i])}static initEvent(e,t){const i={type:t.type},o={button:0,which:0,buttons:1,bubbles:!0,cancelable:!0,target:t.target?t.target:e.target};return["altKey","ctrlKey","metaKey","shiftKey"].forEach(r=>i[r]=e[r]),["pageX","pageY","clientX","clientY","screenX","screenY"].forEach(r=>i[r]=e[r]),{...i,...o}}static simulateMouseEvent(e,t,i){const o=e,r=new MouseEvent(t,{bubbles:!0,composed:!0,cancelable:!0,view:window,detail:1,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,ctrlKey:o.ctrlKey??!1,altKey:o.altKey??!1,shiftKey:o.shiftKey??!1,metaKey:o.metaKey??!1,button:0,relatedTarget:e.target});(i||e.target).dispatchEvent(r)}static getValuesFromTransformedElement(e){const t=document.createElement("div");se.addElStyles(t,{opacity:"0",position:"fixed",top:"0px",left:"0px",width:"1px",height:"1px",zIndex:"-999999"}),e.appendChild(t);const i=t.getBoundingClientRect();return e.removeChild(t),t.remove(),{xScale:1/i.width,yScale:1/i.height,xOffset:i.left,yOffset:i.top}}static swap(e,t,i){if(!e)return;const o=e[t];e[t]=e[i],e[i]=o}static canBeRotated(e){return!(!e||e.w===e.h||e.locked||e.noResize||e.grid?.opts.disableResize||e.minW&&e.minW===e.maxW||e.minH&&e.minH===e.maxH)}}class dt{constructor(e={}){this.addedNodes=[],this.removedNodes=[],this.defaultColumn=12,this.column=e.column||this.defaultColumn,this.column>this.defaultColumn&&(this.defaultColumn=this.column),this.maxRow=e.maxRow,this._float=e.float,this.nodes=e.nodes||[],this.onChange=e.onChange}batchUpdate(e=!0,t=!0){return!!this.batchMode===e?this:(this.batchMode=e,e?(this._prevFloat=this._float,this._float=!0,this.cleanNodes(),this.saveInitial()):(this._float=this._prevFloat,delete this._prevFloat,t&&this._packNodes(),this._notify()),this)}_useEntireRowArea(e,t){return(!this.float||this.batchMode&&!this._prevFloat)&&!this._hasLocked&&(!e._moving||e._skipDown||t.y<=e.y)}_fixCollisions(e,t=e,i,o={}){if(this.sortNodes(-1),i=i||this.collide(e,t),!i)return!1;if(e._moving&&!o.nested&&!this.float&&this.swap(e,i))return!0;let r=t;!this._loading&&this._useEntireRowArea(e,t)&&(r={x:0,w:this.column,y:t.y,h:t.h},i=this.collide(e,r,o.skip));let n=!1;const s={nested:!0,pack:!1};let a=0;for(;i=i||this.collide(e,r,o.skip);){if(a++>this.nodes.length*2)throw new Error("Infinite collide check");let l;if(i.locked||this._loading||e._moving&&!e._skipDown&&t.y>e.y&&!this.float&&(!this.collide(i,{...i,y:e.y},e)||!this.collide(i,{...i,y:t.y-i.h},e))){e._skipDown=e._skipDown||t.y>e.y;const u={...t,y:i.y+i.h,...s};l=this._loading&&se.samePos(e,u)?!0:this.moveNode(e,u),(i.locked||this._loading)&&l?se.copyPos(t,e):!i.locked&&l&&o.pack&&(this._packNodes(),t.y=i.y+i.h,se.copyPos(e,t)),n=n||l}else l=this.moveNode(i,{...i,y:t.y+t.h,skip:e,...s});if(!l)return n;i=void 0}return n}collide(e,t=e,i){const o=e._id,r=i?._id;return this.nodes.find(n=>n._id!==o&&n._id!==r&&se.isIntercepted(n,t))}collideAll(e,t=e,i){const o=e._id,r=i?._id;return this.nodes.filter(n=>n._id!==o&&n._id!==r&&se.isIntercepted(n,t))}directionCollideCoverage(e,t,i){if(!t.rect||!e._rect)return;const o=e._rect,r={...t.rect};r.y>o.y?(r.h+=r.y-o.y,r.y=o.y):r.h+=o.y-r.y,r.x>o.x?(r.w+=r.x-o.x,r.x=o.x):r.w+=o.x-r.x;let n,s=.5;for(let a of i){if(a.locked||!a._rect)break;const l=a._rect;let u=Number.MAX_VALUE,c=Number.MAX_VALUE;o.y<l.y?u=(r.y+r.h-l.y)/l.h:o.y+o.h>l.y+l.h&&(u=(l.y+l.h-r.y)/l.h),o.x<l.x?c=(r.x+r.w-l.x)/l.w:o.x+o.w>l.x+l.w&&(c=(l.x+l.w-r.x)/l.w);const d=Math.min(c,u);d>s&&(s=d,n=a)}return t.collide=n,n}cacheRects(e,t,i,o,r,n){return this.nodes.forEach(s=>s._rect={y:s.y*t+i,x:s.x*e+n,w:s.w*e-n-o,h:s.h*t-i-r}),this}swap(e,t){if(!t||t.locked||!e||e.locked)return!1;function i(){const r=t.x,n=t.y;return t.x=e.x,t.y=e.y,e.h!=t.h?(e.x=r,e.y=t.y+t.h):e.w!=t.w?(e.x=t.x+t.w,e.y=n):(e.x=r,e.y=n),e._dirty=t._dirty=!0,!0}let o;if(e.w===t.w&&e.h===t.h&&(e.x===t.x||e.y===t.y)&&(o=se.isTouching(e,t)))return i();if(o!==!1){if(e.w===t.w&&e.x===t.x&&(o||(o=se.isTouching(e,t)))){if(t.y<e.y){const r=e;e=t,t=r}return i()}if(o!==!1){if(e.h===t.h&&e.y===t.y&&(o||(o=se.isTouching(e,t)))){if(t.x<e.x){const r=e;e=t,t=r}return i()}return!1}}}isAreaEmpty(e,t,i,o){const r={x:e||0,y:t||0,w:i||1,h:o||1};return!this.collide(r)}compact(e="compact",t=!0){if(this.nodes.length===0)return this;t&&this.sortNodes();const i=this.batchMode;i||this.batchUpdate();const o=this._inColumnResize;o||(this._inColumnResize=!0);const r=this.nodes;return this.nodes=[],r.forEach((n,s,a)=>{let l;n.locked||(n.autoPosition=!0,e==="list"&&s&&(l=a[s-1])),this.addNode(n,!1,l)}),o||delete this._inColumnResize,i||this.batchUpdate(!1),this}set float(e){this._float!==e&&(this._float=e||!1,e||this._packNodes()._notify())}get float(){return this._float||!1}sortNodes(e=1){return this.nodes=se.sort(this.nodes,e),this}_packNodes(){return this.batchMode?this:(this.sortNodes(),this.float?this.nodes.forEach(e=>{if(e._updating||e._orig===void 0||e.y===e._orig.y)return;let t=e.y;for(;t>e._orig.y;)--t,this.collide(e,{x:e.x,y:t,w:e.w,h:e.h})||(e._dirty=!0,e.y=t)}):this.nodes.forEach((e,t)=>{if(!e.locked)for(;e.y>0;){const i=t===0?0:e.y-1;if(!(t===0||!this.collide(e,{x:e.x,y:i,w:e.w,h:e.h})))break;e._dirty=e.y!==i,e.y=i}}),this)}prepareNode(e,t){e._id=e._id??dt._idSeq++;const i=e.id;if(i){let r=1;for(;this.nodes.find(n=>n.id===e.id&&n!==e);)e.id=i+"_"+r++}(e.x===void 0||e.y===void 0||e.x===null||e.y===null)&&(e.autoPosition=!0);const o={x:0,y:0,w:1,h:1};return se.defaults(e,o),e.autoPosition||delete e.autoPosition,e.noResize||delete e.noResize,e.noMove||delete e.noMove,se.sanitizeMinMax(e),typeof e.x=="string"&&(e.x=Number(e.x)),typeof e.y=="string"&&(e.y=Number(e.y)),typeof e.w=="string"&&(e.w=Number(e.w)),typeof e.h=="string"&&(e.h=Number(e.h)),isNaN(e.x)&&(e.x=o.x,e.autoPosition=!0),isNaN(e.y)&&(e.y=o.y,e.autoPosition=!0),isNaN(e.w)&&(e.w=o.w),isNaN(e.h)&&(e.h=o.h),this.nodeBoundFix(e,t),e}nodeBoundFix(e,t){const i=e._orig||se.copyPos({},e);if(e.maxW&&(e.w=Math.min(e.w||1,e.maxW)),e.maxH&&(e.h=Math.min(e.h||1,e.maxH)),e.minW&&(e.w=Math.max(e.w||1,e.minW)),e.minH&&(e.h=Math.max(e.h||1,e.minH)),(e.x||0)+(e.w||1)>this.column&&this.column<this.defaultColumn&&!this._inColumnResize&&!this.skipCacheUpdate&&e._id!=null&&this.findCacheLayout(e,this.defaultColumn)===-1){const r={...e};r.autoPosition||r.x===void 0?(delete r.x,delete r.y):r.x=Math.min(this.defaultColumn-1,r.x),r.w=Math.min(this.defaultColumn,r.w||1),this.cacheOneLayout(r,this.defaultColumn)}return e.w>this.column?e.w=this.column:e.w<1&&(e.w=1),this.maxRow&&e.h>this.maxRow?e.h=this.maxRow:e.h<1&&(e.h=1),e.x<0&&(e.x=0),e.y<0&&(e.y=0),e.x+e.w>this.column&&(t?e.w=this.column-e.x:e.x=this.column-e.w),this.maxRow&&e.y+e.h>this.maxRow&&(t?e.h=this.maxRow-e.y:e.y=this.maxRow-e.h),se.samePos(e,i)||(e._dirty=!0),this}getDirtyNodes(e){return e?this.nodes.filter(t=>t._dirty&&!se.samePos(t,t._orig)):this.nodes.filter(t=>t._dirty)}_notify(e){if(this.batchMode||!this.onChange)return this;const t=(e||[]).concat(this.getDirtyNodes());return this.onChange(t),this}cleanNodes(){return this.batchMode?this:(this.nodes.forEach(e=>{delete e._dirty,delete e._lastTried}),this)}saveInitial(){return this.nodes.forEach(e=>{e._orig=se.copyPos({},e),delete e._dirty}),this._hasLocked=this.nodes.some(e=>e.locked),this}restoreInitial(){return this.nodes.forEach(e=>{!e._orig||se.samePos(e,e._orig)||(se.copyPos(e,e._orig),e._dirty=!0)}),this._notify(),this}findEmptyPosition(e,t=this.nodes,i=this.column,o){const r=o?o.y*i+(o.x+o.w):0;let n=!1;for(let s=r;!n;++s){const a=s%i,l=Math.floor(s/i);if(a+e.w>i)continue;const u={x:a,y:l,w:e.w,h:e.h};t.find(c=>se.isIntercepted(u,c))||((e.x!==a||e.y!==l)&&(e._dirty=!0),e.x=a,e.y=l,delete e.autoPosition,n=!0)}return n}addNode(e,t=!1,i){const o=this.nodes.find(n=>n._id===e._id);if(o)return o;this._inColumnResize?this.nodeBoundFix(e):this.prepareNode(e),delete e._temporaryRemoved,delete e._removeDOM;let r;return e.autoPosition&&this.findEmptyPosition(e,this.nodes,this.column,i)&&(delete e.autoPosition,r=!0),this.nodes.push(e),t&&this.addedNodes.push(e),r||this._fixCollisions(e),this.batchMode||this._packNodes()._notify(),e}removeNode(e,t=!0,i=!1){return this.nodes.find(o=>o._id===e._id)?(i&&this.removedNodes.push(e),t&&(e._removeDOM=!0),this.nodes=this.nodes.filter(o=>o._id!==e._id),e._isAboutToRemove||this._packNodes(),this._notify([e]),this):this}removeAll(e=!0,t=!0){if(delete this._layouts,!this.nodes.length)return this;e&&this.nodes.forEach(o=>o._removeDOM=!0);const i=this.nodes;return this.removedNodes=t?i:[],this.nodes=[],this._notify(i)}moveNodeCheck(e,t){if(!this.changedPosConstrain(e,t))return!1;if(t.pack=!0,!this.maxRow)return this.moveNode(e,t);let i;const o=new dt({column:this.column,float:this.float,nodes:this.nodes.map(n=>n._id===e._id?(i={...n},i):{...n})});if(!i)return!1;const r=o.moveNode(i,t)&&o.getRow()<=Math.max(this.getRow(),this.maxRow);if(!r&&!t.resizing&&t.collide){const n=t.collide.el.gridstackNode;if(this.swap(e,n))return this._notify(),!0}return r?(o.nodes.filter(n=>n._dirty).forEach(n=>{const s=this.nodes.find(a=>a._id===n._id);s&&(se.copyPos(s,n),s._dirty=!0)}),this._notify(),!0):!1}willItFit(e){if(delete e._willFitPos,!this.maxRow)return!0;const t=new dt({column:this.column,float:this.float,nodes:this.nodes.map(o=>({...o}))}),i={...e};return this.cleanupNode(i),delete i.el,delete i._id,delete i.content,delete i.grid,t.addNode(i),t.getRow()<=this.maxRow?(e._willFitPos=se.copyPos({},i),!0):!1}changedPosConstrain(e,t){return t.w=t.w||e.w,t.h=t.h||e.h,e.x!==t.x||e.y!==t.y?!0:(e.maxW&&(t.w=Math.min(t.w,e.maxW)),e.maxH&&(t.h=Math.min(t.h,e.maxH)),e.minW&&(t.w=Math.max(t.w,e.minW)),e.minH&&(t.h=Math.max(t.h,e.minH)),e.w!==t.w||e.h!==t.h)}moveNode(e,t){if(!e||!t)return!1;let i;t.pack===void 0&&!this.batchMode&&(i=t.pack=!0),typeof t.x!="number"&&(t.x=e.x),typeof t.y!="number"&&(t.y=e.y),typeof t.w!="number"&&(t.w=e.w),typeof t.h!="number"&&(t.h=e.h);const o=e.w!==t.w||e.h!==t.h,r=se.copyPos({},e,!0);if(se.copyPos(r,t),this.nodeBoundFix(r,o),se.copyPos(t,r),!t.forceCollide&&se.samePos(e,t))return!1;const n=se.copyPos({},e),s=this.collideAll(e,r,t.skip);let a=!0;if(s.length){const l=e._moving&&!t.nested;let u=l?this.directionCollideCoverage(e,t,s):s[0];if(l&&u&&e.grid?.opts?.subGridDynamic&&!e.grid._isTemp){const c=se.areaIntercept(t.rect,u._rect),d=se.area(t.rect),y=se.area(u._rect);c/(d<y?d:y)>.8&&(u.grid.makeSubGrid(u.el,void 0,e),u=void 0)}u?a=!this._fixCollisions(e,r,u,t):(a=!1,i&&delete t.pack)}return a&&!se.samePos(e,r)&&(e._dirty=!0,se.copyPos(e,r)),t.pack&&this._packNodes()._notify(),!se.samePos(e,n)}getRow(){return this.nodes.reduce((e,t)=>Math.max(e,t.y+t.h),0)}beginUpdate(e){return e._updating||(e._updating=!0,delete e._skipDown,this.batchMode||this.saveInitial()),this}endUpdate(){const e=this.nodes.find(t=>t._updating);return e&&(delete e._updating,delete e._skipDown),this}save(e=!0,t,i){const o=this._layouts?.length||0;let r;o&&(i?i!==this.column&&(r=this._layouts[i]):this.column!==o-1&&(r=this._layouts[o-1]));const n=[];return this.sortNodes(),this.nodes.forEach(s=>{const a=r?.find(u=>u._id===s._id),l={...s,...a||{}};se.removeInternalForSave(l,!e),t&&t(s,l),n.push(l)}),n}layoutsNodesChange(e){return!this._layouts||this._inColumnResize?this:(this._layouts.forEach((t,i)=>{if(!t||i===this.column)return this;if(i<this.column)this._layouts[i]=void 0;else{const o=i/this.column;e.forEach(r=>{if(!r._orig)return;const n=t.find(s=>s._id===r._id);n&&(n.y>=0&&r.y!==r._orig.y&&(n.y+=r.y-r._orig.y,n.y<0&&(n.y=0)),r.x!==r._orig.x&&(n.x=Math.round(r.x*o),n.x<0&&(n.x=0)),r.w!==r._orig.w&&(n.w=Math.round(r.w*o),n.w<1&&(n.w=1)))})}}),this)}columnChanged(e,t,i="moveScale"){if(!this.nodes.length||!t||e===t)return this;const o=i==="compact"||i==="list";o&&this.sortNodes(1),t<e&&this.cacheLayout(this.nodes,e),this.batchUpdate();let r=[],n=o?this.nodes:se.sort(this.nodes,-1);if(t>e&&this._layouts){const s=this._layouts[t]||[],a=this._layouts.length-1;!s.length&&e!==a&&this._layouts[a]?.length&&(e=a,this._layouts[a].forEach(l=>{const u=n.find(c=>c._id===l._id);u&&(!o&&!l.autoPosition&&(u.x=l.x??u.x,u.y=l.y??u.y),u.w=l.w??u.w,(l.x==null||l.y===void 0)&&(u.autoPosition=!0))})),s.forEach(l=>{const u=n.findIndex(c=>c._id===l._id);if(u!==-1){const c=n[u];if(o){c.w=l.w;return}(l.autoPosition||isNaN(l.x)||isNaN(l.y))&&this.findEmptyPosition(l,r),l.autoPosition||(c.x=l.x??c.x,c.y=l.y??c.y,c.w=l.w??c.w,r.push(c)),n.splice(u,1)}})}if(o)this.compact(i,!1);else{if(n.length)if(typeof i=="function")i(t,e,r,n);else{const s=o||i==="none"?1:t/e,a=i==="move"||i==="moveScale",l=i==="scale"||i==="moveScale";n.forEach(u=>{u.x=t===1?0:a?Math.round(u.x*s):Math.min(u.x,t-1),u.w=t===1||e===1?1:l?Math.round(u.w*s)||1:Math.min(u.w,t),r.push(u)}),n=[]}r=se.sort(r,-1),this._inColumnResize=!0,this.nodes=[],r.forEach(s=>{this.addNode(s,!1),delete s._orig})}return this.nodes.forEach(s=>delete s._orig),this.batchUpdate(!1,!o),delete this._inColumnResize,this}cacheLayout(e,t,i=!1){const o=[];return e.forEach((r,n)=>{if(r._id===void 0){const s=r.id?this.nodes.find(a=>a.id===r.id):void 0;r._id=s?._id??dt._idSeq++}o[n]={x:r.x,y:r.y,w:r.w,_id:r._id}}),this._layouts=i?[]:this._layouts||[],this._layouts[t]=o,this}cacheOneLayout(e,t){e._id=e._id??dt._idSeq++;const i={x:e.x,y:e.y,w:e.w,_id:e._id};(e.autoPosition||e.x===void 0)&&(delete i.x,delete i.y,e.autoPosition&&(i.autoPosition=!0)),this._layouts=this._layouts||[],this._layouts[t]=this._layouts[t]||[];const o=this.findCacheLayout(e,t);return o===-1?this._layouts[t].push(i):this._layouts[t][o]=i,this}findCacheLayout(e,t){return this._layouts?.[t]?.findIndex(i=>i._id===e._id)??-1}removeNodeFromLayoutCache(e){if(this._layouts)for(let t=0;t<this._layouts.length;t++){const i=this.findCacheLayout(e,t);i!==-1&&this._layouts[t].splice(i,1)}}cleanupNode(e){for(const t in e)t[0]==="_"&&t!=="_id"&&delete e[t];return this}}dt._idSeq=0;const Qe={alwaysShowResizeHandle:"mobile",animate:!0,auto:!0,cellHeight:"auto",cellHeightThrottle:100,cellHeightUnit:"px",column:12,draggable:{handle:".grid-stack-item-content",appendTo:"body",scroll:!0},handle:".grid-stack-item-content",itemClass:"grid-stack-item",margin:10,marginUnit:"px",maxRow:0,minRow:0,placeholderClass:"grid-stack-placeholder",placeholderText:"",removableOptions:{accept:"grid-stack-item",decline:"grid-stack-non-removable"},resizable:{handles:"se"},rtl:"auto"};class Oe{}const Ze=typeof window<"u"&&typeof document<"u"&&("ontouchstart"in document||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);class Xe{}function Nr(p,e){p.touches.length>1||(p.cancelable&&p.preventDefault(),se.simulateMouseEvent(p.changedTouches[0],e))}function So(p,e){p.cancelable&&p.preventDefault(),se.simulateMouseEvent(p,e)}function Lr(p){Xe.touchHandled||(Xe.touchHandled=!0,Nr(p,"mousedown"))}function Dr(p){Xe.touchHandled&&Nr(p,"mousemove")}function jr(p){if(!Xe.touchHandled)return;Xe.pointerLeaveTimeout&&(window.clearTimeout(Xe.pointerLeaveTimeout),delete Xe.pointerLeaveTimeout);const e=!!Oe.dragElement;Nr(p,"mouseup"),e||Nr(p,"click"),Xe.touchHandled=!1}function Br(p){p.pointerType!=="mouse"&&p.target.releasePointerCapture(p.pointerId)}function cs(p){Oe.dragElement&&p.pointerType!=="mouse"&&So(p,"mouseenter")}function fs(p){Oe.dragElement&&p.pointerType!=="mouse"&&(Xe.pointerLeaveTimeout=window.setTimeout(()=>{delete Xe.pointerLeaveTimeout,So(p,"mouseleave")},10))}class Wr{constructor(e,t,i){this.host=e,this.dir=t,this.option=i,this.moving=!1,this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this._keyEvent=this._keyEvent.bind(this),this._init()}_init(){if(this.option.element)try{this.el=this.option.element instanceof HTMLElement?this.option.element:this.host.querySelector(this.option.element)}catch(e){this.option.element=void 0,console.error("Query for resizeable handle failed, falling back",e)}return this.el||(this.el=document.createElement("div"),this.host.appendChild(this.el)),this.el.classList.add("ui-resizable-handle"),this.el.classList.add(`${Wr.prefix}${this.dir}`),this.el.style.zIndex="100",this.el.style.userSelect="none",this.el.addEventListener("mousedown",this._mouseDown),Ze&&(this.el.addEventListener("touchstart",Lr),this.el.addEventListener("pointerdown",Br)),this}destroy(){return this.moving&&this._mouseUp(this.mouseDownEvent),this.el.removeEventListener("mousedown",this._mouseDown),Ze&&(this.el.removeEventListener("touchstart",Lr),this.el.removeEventListener("pointerdown",Br)),this.option.element||this.host.removeChild(this.el),delete this.el,delete this.host,this}_mouseDown(e){this.mouseDownEvent=e,document.addEventListener("mousemove",this._mouseMove,{capture:!0,passive:!0}),document.addEventListener("mouseup",this._mouseUp,!0),Ze&&(this.el.addEventListener("touchmove",Dr),this.el.addEventListener("touchend",jr)),e.stopPropagation(),e.preventDefault()}_mouseMove(e){const t=this.mouseDownEvent;this.moving?this._triggerEvent("move",e):Math.abs(e.x-t.x)+Math.abs(e.y-t.y)>2&&(this.moving=!0,this._triggerEvent("start",this.mouseDownEvent),this._triggerEvent("move",e),document.addEventListener("keydown",this._keyEvent)),e.stopPropagation()}_mouseUp(e){this.moving&&(this._triggerEvent("stop",e),document.removeEventListener("keydown",this._keyEvent)),document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),Ze&&(this.el.removeEventListener("touchmove",Dr),this.el.removeEventListener("touchend",jr)),delete this.moving,delete this.mouseDownEvent,e.stopPropagation(),e.preventDefault()}_keyEvent(e){e.key==="Escape"&&(this.host.gridstackNode?.grid?.engine.restoreInitial(),this._mouseUp(this.mouseDownEvent))}_triggerEvent(e,t){return this.option[e]&&this.option[e](t),this}}Wr.prefix="ui-resizable-";class Yn{constructor(){this._eventRegister={}}get disabled(){return this._disabled}on(e,t){this._eventRegister[e]=t}off(e){delete this._eventRegister[e]}enable(){this._disabled=!1}disable(){this._disabled=!0}destroy(){delete this._eventRegister}triggerEvent(e,t){if(!this.disabled&&this._eventRegister&&this._eventRegister[e])return this._eventRegister[e](t)}}class er extends Yn{constructor(e,t={}){super(),this.el=e,this.option=t,this.rectScale={x:1,y:1},this._ui=()=>{const o=this.el.parentElement.getBoundingClientRect(),r={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},n=this.temporalRect||r;return{position:{left:(n.left-o.left)*this.rectScale.x,top:(n.top-o.top)*this.rectScale.y},size:{width:n.width*this.rectScale.x,height:n.height*this.rectScale.y}}},this._mouseOver=this._mouseOver.bind(this),this._mouseOut=this._mouseOut.bind(this),this.enable(),this._setupAutoHide(this.option.autoHide),this._setupHandlers()}on(e,t){super.on(e,t)}off(e){super.off(e)}enable(){super.enable(),this.el.classList.remove("ui-resizable-disabled"),this._setupAutoHide(this.option.autoHide)}disable(){super.disable(),this.el.classList.add("ui-resizable-disabled"),this._setupAutoHide(!1)}destroy(){this._removeHandlers(),this._setupAutoHide(!1),delete this.el,super.destroy()}updateOption(e){const t=e.handles&&e.handles!==this.option.handles,i=e.autoHide&&e.autoHide!==this.option.autoHide;return Object.keys(e).forEach(o=>this.option[o]=e[o]),t&&(this._removeHandlers(),this._setupHandlers()),i&&this._setupAutoHide(this.option.autoHide),this}_setupAutoHide(e){return e?(this.el.classList.add("ui-resizable-autohide"),this.el.addEventListener("mouseover",this._mouseOver),this.el.addEventListener("mouseout",this._mouseOut)):(this.el.classList.remove("ui-resizable-autohide"),this.el.removeEventListener("mouseover",this._mouseOver),this.el.removeEventListener("mouseout",this._mouseOut),Oe.overResizeElement===this&&delete Oe.overResizeElement),this}_mouseOver(e){Oe.overResizeElement||Oe.dragElement||(Oe.overResizeElement=this,this.el.classList.remove("ui-resizable-autohide"))}_mouseOut(e){Oe.overResizeElement===this&&(delete Oe.overResizeElement,this.el.classList.add("ui-resizable-autohide"))}_setupHandlers(){return this.handlers=this.option.handles.split(",").map(e=>e.trim()).map(e=>new Wr(this.el,e,{element:this.option.element,start:t=>this._resizeStart(t),stop:t=>this._resizeStop(t),move:t=>this._resizing(t,e)})),this}_resizeStart(e){this.sizeToContent=se.shouldSizeToContent(this.el.gridstackNode,!0),this.originalRect=this.el.getBoundingClientRect(),this.scrollEl=se.getScrollElement(this.el),this.scrollY=this.scrollEl.scrollTop,this.scrolled=0,this.startEvent=e,this._setupHelper(),this._applyChange();const t=se.initEvent(e,{type:"resizestart",target:this.el});return this.option.start&&this.option.start(t,this._ui()),this.el.classList.add("ui-resizable-resizing"),this.triggerEvent("resizestart",t),this}_resizing(e,t){this.scrolled=this.scrollEl.scrollTop-this.scrollY,this.temporalRect=this._getChange(e,t),this._applyChange();const i=se.initEvent(e,{type:"resize",target:this.el});return this.option.resize&&this.option.resize(i,this._ui()),this.triggerEvent("resize",i),this}_resizeStop(e){const t=se.initEvent(e,{type:"resizestop",target:this.el});return this._cleanHelper(),this.option.stop&&this.option.stop(t),this.el.classList.remove("ui-resizable-resizing"),this.triggerEvent("resizestop",t),delete this.startEvent,delete this.originalRect,delete this.temporalRect,delete this.scrollY,delete this.scrolled,this}_setupHelper(){this.elOriginStyleVal=er._originStyleProp.map(i=>this.el.style[i]),this.parentOriginStylePosition=this.el.parentElement.style.position;const e=this.el.parentElement,t=se.getValuesFromTransformedElement(e);return this.rectScale={x:t.xScale,y:t.yScale},getComputedStyle(this.el.parentElement).position.match(/static/)&&(this.el.parentElement.style.position="relative"),this.el.style.position="absolute",this.el.style.opacity="0.8",this}_cleanHelper(){return er._originStyleProp.forEach((e,t)=>{this.el.style[e]=this.elOriginStyleVal[t]||null}),this.el.parentElement.style.position=this.parentOriginStylePosition||null,this}_getChange(e,t){const i=this.startEvent,o={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},r=e.clientX-i.clientX,n=this.sizeToContent?0:e.clientY-i.clientY;let s,a;t.indexOf("e")>-1?o.width+=r:t.indexOf("w")>-1&&(o.width-=r,o.left+=r,s=!0),t.indexOf("s")>-1?o.height+=n:t.indexOf("n")>-1&&(o.height-=n,o.top+=n,a=!0);const l=this._constrainSize(o.width,o.height,s,a);return Math.round(o.width)!==Math.round(l.width)&&(t.indexOf("w")>-1&&(o.left+=o.width-l.width),o.width=l.width),Math.round(o.height)!==Math.round(l.height)&&(t.indexOf("n")>-1&&(o.top+=o.height-l.height),o.height=l.height),o}_constrainSize(e,t,i,o){const r=this.option,n=(i?r.maxWidthMoveLeft:r.maxWidth)||Number.MAX_SAFE_INTEGER,s=r.minWidth/this.rectScale.x||e,a=(o?r.maxHeightMoveUp:r.maxHeight)||Number.MAX_SAFE_INTEGER,l=r.minHeight/this.rectScale.y||t,u=Math.min(n,Math.max(s,e)),c=Math.min(a,Math.max(l,t));return{width:u,height:c}}_applyChange(){let e={left:0,top:0,width:0,height:0};if(this.el.style.position==="absolute"){const t=this.el.parentElement,{left:i,top:o}=t.getBoundingClientRect();e={left:i,top:o,width:0,height:0}}return this.temporalRect?(Object.keys(this.temporalRect).forEach(t=>{const i=this.temporalRect[t],o=t==="width"||t==="left"?this.rectScale.x:t==="height"||t==="top"?this.rectScale.y:1;this.el.style[t]=(i-e[t])*o+"px"}),this):this}_removeHandlers(){return this.handlers.forEach(e=>e.destroy()),delete this.handlers,this}}er._originStyleProp=["width","height","position","left","top","opacity","zIndex"];const el='input,textarea,button,select,option,[contenteditable="true"],.ui-resizable-handle';class tr extends Yn{constructor(e,t={}){super(),this.el=e,this.option=t,this.dragTransform={xScale:1,yScale:1,xOffset:0,yOffset:0};const i=t?.handle?.substring(1),o=e.gridstackNode;this.dragEls=!i||e.classList.contains(i)?[e]:o?.subGrid?[e.querySelector(t.handle)||e]:Array.from(e.querySelectorAll(t.handle)),this.dragEls.length===0&&(this.dragEls=[e]),this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this._keyEvent=this._keyEvent.bind(this),this.enable()}on(e,t){super.on(e,t)}off(e){super.off(e)}enable(){this.disabled!==!1&&(super.enable(),this.dragEls.forEach(e=>{e.addEventListener("mousedown",this._mouseDown),Ze&&(e.addEventListener("touchstart",Lr),e.addEventListener("pointerdown",Br))}),this.el.classList.remove("ui-draggable-disabled"))}disable(e=!1){this.disabled!==!0&&(super.disable(),this.dragEls.forEach(t=>{t.removeEventListener("mousedown",this._mouseDown),Ze&&(t.removeEventListener("touchstart",Lr),t.removeEventListener("pointerdown",Br))}),e||this.el.classList.add("ui-draggable-disabled"))}destroy(){this.dragTimeout&&window.clearTimeout(this.dragTimeout),delete this.dragTimeout,this.mouseDownEvent&&this._mouseUp(this.mouseDownEvent),this.disable(!0),delete this.el,delete this.helper,delete this.option,super.destroy()}updateOption(e){return Object.keys(e).forEach(t=>this.option[t]=e[t]),this}_mouseDown(e){if(Xe.touchHandled&&e.isTrusted&&(Xe.touchHandled=!1),!Oe.mouseHandled)return e.button!==0||!this.dragEls.find(t=>t===e.target)&&e.target.closest(el)||this.option.cancel&&e.target.closest(this.option.cancel)||(this.mouseDownEvent=e,delete this.dragging,delete Oe.dragElement,delete Oe.dropElement,document.addEventListener("mousemove",this._mouseMove,{capture:!0,passive:!0}),document.addEventListener("mouseup",this._mouseUp,!0),Ze&&(e.currentTarget.addEventListener("touchmove",Dr),e.currentTarget.addEventListener("touchend",jr)),e.preventDefault(),document.activeElement&&document.activeElement.blur(),Oe.mouseHandled=!0),!0}_callDrag(e){if(!this.dragging)return;const t=se.initEvent(e,{target:this.el,type:"drag"});this.option.drag&&this.option.drag(t,this.ui()),this.triggerEvent("drag",t)}_mouseMove(e){const t=this.mouseDownEvent;if(this.lastDrag=e,this.dragging)if(this._dragFollow(e),Oe.pauseDrag){const i=Number.isInteger(Oe.pauseDrag)?Oe.pauseDrag:100;this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>this._callDrag(e),i)}else this._callDrag(e);else if(Math.abs(e.x-t.x)+Math.abs(e.y-t.y)>3){this.dragging=!0,Oe.dragElement=this;const i=this.el.gridstackNode?.grid;i?Oe.dropElement=i.el.ddElement.ddDroppable:delete Oe.dropElement,this.helper=this._createHelper(),this._setupHelperContainmentStyle(),this.dragTransform=se.getValuesFromTransformedElement(this.helperContainment),this.dragOffset=this._getDragOffset(e,this.el,this.helperContainment),this._setupHelperStyle(e);const o=se.initEvent(e,{target:this.el,type:"dragstart"});this.option.start&&this.option.start(o,this.ui()),this.triggerEvent("dragstart",o),document.addEventListener("keydown",this._keyEvent)}return!0}_mouseUp(e){if(document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),Ze&&e.currentTarget&&(e.currentTarget.removeEventListener("touchmove",Dr,!0),e.currentTarget.removeEventListener("touchend",jr,!0)),this.dragging){delete this.dragging,delete this.el.gridstackNode?._origRotate,document.removeEventListener("keydown",this._keyEvent),Oe.dropElement?.el===this.el.parentElement&&delete Oe.dropElement,this.helperContainment.style.position=this.parentOriginStylePosition||null,this.helper!==this.el&&this.helper.remove(),this._removeHelperStyle();const t=se.initEvent(e,{target:this.el,type:"dragstop"});this.option.stop&&this.option.stop(t),this.triggerEvent("dragstop",t),Oe.dropElement&&Oe.dropElement.drop(e)}delete this.helper,delete this.mouseDownEvent,delete Oe.dragElement,delete Oe.dropElement,delete Oe.mouseHandled,e.preventDefault()}_keyEvent(e){const t=this.el.gridstackNode,i=t?.grid||Oe.dropElement?.el?.gridstack;if(e.key==="Escape")t&&t._origRotate&&(t._orig=t._origRotate,delete t._origRotate),i?.cancelDrag(),this._mouseUp(this.mouseDownEvent);else if(t&&i&&(e.key==="r"||e.key==="R")){if(!se.canBeRotated(t))return;t._origRotate=t._origRotate||{...t._orig},delete t._moving,i.setAnimation(!1).rotate(t.el,{top:-this.dragOffset.offsetTop,left:-this.dragOffset.offsetLeft}).setAnimation(),t._moving=!0,this.dragOffset=this._getDragOffset(this.lastDrag,t.el,this.helperContainment),this.helper.style.width=this.dragOffset.width+"px",this.helper.style.height=this.dragOffset.height+"px",se.swap(t._orig,"w","h"),delete t._rect,this._mouseMove(this.lastDrag)}}_createHelper(){let e=this.el;return typeof this.option.helper=="function"?e=this.option.helper(this.el):this.option.helper==="clone"&&(e=se.cloneNode(this.el)),e.parentElement||se.appendTo(e,this.option.appendTo==="parent"?this.el.parentElement:this.option.appendTo),this.dragElementOriginStyle=tr.originStyleProp.map(t=>this.el.style[t]),e}_setupHelperStyle(e){this.helper.classList.add("ui-draggable-dragging"),this.el.gridstackNode?.grid?.el.classList.add("grid-stack-dragging");const t=this.helper.style;return t.pointerEvents="none",t.width=this.dragOffset.width+"px",t.height=this.dragOffset.height+"px",t.willChange="left, top",t.position="fixed",this._dragFollow(e),t.transition="none",setTimeout(()=>{this.helper&&(t.transition=null)},0),this}_removeHelperStyle(){if(this.helper.classList.remove("ui-draggable-dragging"),this.el.gridstackNode?.grid?.el.classList.remove("grid-stack-dragging"),!this.helper?.gridstackNode?._isAboutToRemove&&this.dragElementOriginStyle){const t=this.helper,i=this.dragElementOriginStyle.transition||null;t.style.transition=this.dragElementOriginStyle.transition="none",tr.originStyleProp.forEach(o=>t.style[o]=this.dragElementOriginStyle[o]||null),setTimeout(()=>t.style.transition=i,50)}return delete this.dragElementOriginStyle,this}_dragFollow(e){const t={left:0,top:0},i=this.helper.style,o=this.dragOffset;i.left=(e.clientX+o.offsetLeft-t.left)*this.dragTransform.xScale+"px",i.top=(e.clientY+o.offsetTop-t.top)*this.dragTransform.yScale+"px"}_setupHelperContainmentStyle(){return this.helperContainment=this.helper.parentElement,this.helper.style.position!=="fixed"&&(this.parentOriginStylePosition=this.helperContainment.style.position,getComputedStyle(this.helperContainment).position.match(/static/)&&(this.helperContainment.style.position="relative")),this}_getDragOffset(e,t,i){let o=0,r=0;i&&(o=this.dragTransform.xOffset,r=this.dragTransform.yOffset);const n=t.getBoundingClientRect();return{left:n.left,top:n.top,offsetLeft:-e.clientX+n.left-o,offsetTop:-e.clientY+n.top-r,width:n.width*this.dragTransform.xScale,height:n.height*this.dragTransform.yScale}}ui(){const t=this.el.parentElement.getBoundingClientRect(),i=this.helper.getBoundingClientRect();return{position:{top:(i.top-t.top)*this.dragTransform.yScale,left:(i.left-t.left)*this.dragTransform.xScale}}}}tr.originStyleProp=["width","height","transform","transform-origin","transition","pointerEvents","position","left","top","minWidth","willChange"];class tl extends Yn{constructor(e,t={}){super(),this.el=e,this.option=t,this._mouseEnter=this._mouseEnter.bind(this),this._mouseLeave=this._mouseLeave.bind(this),this.enable(),this._setupAccept()}on(e,t){super.on(e,t)}off(e){super.off(e)}enable(){this.disabled!==!1&&(super.enable(),this.el.classList.add("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),this.el.addEventListener("mouseenter",this._mouseEnter),this.el.addEventListener("mouseleave",this._mouseLeave),Ze&&(this.el.addEventListener("pointerenter",cs),this.el.addEventListener("pointerleave",fs)))}disable(e=!1){this.disabled!==!0&&(super.disable(),this.el.classList.remove("ui-droppable"),e||this.el.classList.add("ui-droppable-disabled"),this.el.removeEventListener("mouseenter",this._mouseEnter),this.el.removeEventListener("mouseleave",this._mouseLeave),Ze&&(this.el.removeEventListener("pointerenter",cs),this.el.removeEventListener("pointerleave",fs)))}destroy(){this.disable(!0),this.el.classList.remove("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),super.destroy()}updateOption(e){return Object.keys(e).forEach(t=>this.option[t]=e[t]),this._setupAccept(),this}_mouseEnter(e){if(!Oe.dragElement||Xe.touchHandled&&e.isTrusted||!this._canDrop(Oe.dragElement.el))return;e.preventDefault(),e.stopPropagation(),Oe.dropElement&&Oe.dropElement!==this&&Oe.dropElement._mouseLeave(e,!0),Oe.dropElement=this;const t=se.initEvent(e,{target:this.el,type:"dropover"});this.option.over&&this.option.over(t,this._ui(Oe.dragElement)),this.triggerEvent("dropover",t),this.el.classList.add("ui-droppable-over")}_mouseLeave(e,t=!1){if(!Oe.dragElement||Oe.dropElement!==this)return;e.preventDefault(),e.stopPropagation();const i=se.initEvent(e,{target:this.el,type:"dropout"});if(this.option.out&&this.option.out(i,this._ui(Oe.dragElement)),this.triggerEvent("dropout",i),Oe.dropElement===this&&(delete Oe.dropElement,!t)){let o,r=this.el.parentElement;for(;!o&&r;)o=r.ddElement?.ddDroppable,r=r.parentElement;o&&o._mouseEnter(e)}}drop(e){e.preventDefault();const t=se.initEvent(e,{target:this.el,type:"drop"});this.option.drop&&this.option.drop(t,this._ui(Oe.dragElement)),this.triggerEvent("drop",t)}_canDrop(e){return e&&(!this.accept||this.accept(e))}_setupAccept(){return this.option.accept?(typeof this.option.accept=="string"?this.accept=e=>e.classList.contains(this.option.accept)||e.matches(this.option.accept):this.accept=this.option.accept,this):this}_ui(e){return{draggable:e.el,...e.ui()}}}class Qn{static init(e){return e.ddElement||(e.ddElement=new Qn(e)),e.ddElement}constructor(e){this.el=e}on(e,t){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(e)>-1?this.ddDraggable.on(e,t):this.ddDroppable&&["drop","dropover","dropout"].indexOf(e)>-1?this.ddDroppable.on(e,t):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(e)>-1&&this.ddResizable.on(e,t),this}off(e){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(e)>-1?this.ddDraggable.off(e):this.ddDroppable&&["drop","dropover","dropout"].indexOf(e)>-1?this.ddDroppable.off(e):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(e)>-1&&this.ddResizable.off(e),this}setupDraggable(e){return this.ddDraggable?this.ddDraggable.updateOption(e):this.ddDraggable=new tr(this.el,e),this}cleanDraggable(){return this.ddDraggable&&(this.ddDraggable.destroy(),delete this.ddDraggable),this}setupResizable(e){return this.ddResizable?this.ddResizable.updateOption(e):this.ddResizable=new er(this.el,e),this}cleanResizable(){return this.ddResizable&&(this.ddResizable.destroy(),delete this.ddResizable),this}setupDroppable(e){return this.ddDroppable?this.ddDroppable.updateOption(e):this.ddDroppable=new tl(this.el,e),this}cleanDroppable(){return this.ddDroppable&&(this.ddDroppable.destroy(),delete this.ddDroppable),this}}class rl{resizable(e,t,i,o){return this._getDDElements(e,t).forEach(r=>{if(t==="disable"||t==="enable")r.ddResizable&&r.ddResizable[t]();else if(t==="destroy")r.ddResizable&&r.cleanResizable();else if(t==="option")r.setupResizable({[i]:o});else{const s=r.el.gridstackNode.grid;let a=r.el.getAttribute("gs-resize-handles")||s.opts.resizable.handles||"e,s,se";a==="all"&&(a="n,e,s,w,se,sw,ne,nw");const l=!s.opts.alwaysShowResizeHandle;r.setupResizable({...s.opts.resizable,handles:a,autoHide:l,start:t.start,stop:t.stop,resize:t.resize})}}),this}draggable(e,t,i,o){return this._getDDElements(e,t).forEach(r=>{if(t==="disable"||t==="enable")r.ddDraggable&&r.ddDraggable[t]();else if(t==="destroy")r.ddDraggable&&r.cleanDraggable();else if(t==="option")r.setupDraggable({[i]:o});else{const n=r.el.gridstackNode.grid;r.setupDraggable({...n.opts.draggable,start:t.start,stop:t.stop,drag:t.drag})}}),this}dragIn(e,t){return this._getDDElements(e).forEach(i=>i.setupDraggable(t)),this}droppable(e,t,i,o){return typeof t.accept=="function"&&!t._accept&&(t._accept=t.accept,t.accept=r=>t._accept(r)),this._getDDElements(e,t).forEach(r=>{t==="disable"||t==="enable"?r.ddDroppable&&r.ddDroppable[t]():t==="destroy"?r.ddDroppable&&r.cleanDroppable():t==="option"?r.setupDroppable({[i]:o}):r.setupDroppable(t)}),this}isDroppable(e){return!!(e?.ddElement?.ddDroppable&&!e.ddElement.ddDroppable.disabled)}isDraggable(e){return!!(e?.ddElement?.ddDraggable&&!e.ddElement.ddDraggable.disabled)}isResizable(e){return!!(e?.ddElement?.ddResizable&&!e.ddElement.ddResizable.disabled)}on(e,t,i){return this._getDDElements(e).forEach(o=>o.on(t,r=>{i(r,Oe.dragElement?Oe.dragElement.el:r.target,Oe.dragElement?Oe.dragElement.helper:null)})),this}off(e,t){return this._getDDElements(e).forEach(i=>i.off(t)),this}_getDDElements(e,t){const i=e.gridstack||t!=="destroy"&&t!=="disable",o=se.getElements(e);return o.length?o.map(n=>n.ddElement||(i?Qn.init(n):null)).filter(n=>n):[]}}const $e=new rl;class Te{static init(e={},t=".grid-stack"){if(typeof document>"u")return null;const i=Te.getGridElement(t);return i?(i.gridstack||(i.gridstack=new Te(i,se.cloneDeep(e))),i.gridstack):(console.error(typeof t=="string"?'GridStack.initAll() no grid was found with selector "'+t+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`:"GridStack.init() no grid element was passed."),null)}static initAll(e={},t=".grid-stack"){const i=[];return typeof document>"u"||(Te.getGridElements(t).forEach(o=>{o.gridstack||(o.gridstack=new Te(o,se.cloneDeep(e))),i.push(o.gridstack)}),i.length===0&&console.error('GridStack.initAll() no grid was found with selector "'+t+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`)),i}static addGrid(e,t={}){if(!e)return null;let i=e;if(i.gridstack){const n=i.gridstack;return t&&(n.opts={...n.opts,...t}),t.children!==void 0&&n.load(t.children),n}return(!e.classList.contains("grid-stack")||Te.addRemoveCB)&&(Te.addRemoveCB?i=Te.addRemoveCB(e,t,!0,!0):i=se.createDiv(["grid-stack",t.class],e)),Te.init(t,i)}static registerEngine(e){Te.engineClass=e}get placeholder(){if(!this._placeholder){this._placeholder=se.createDiv([this.opts.placeholderClass,Qe.itemClass,this.opts.itemClass]);const e=se.createDiv(["placeholder-content"],this._placeholder);this.opts.placeholderText&&(e.textContent=this.opts.placeholderText)}return this._placeholder}constructor(e,t={}){this.el=e,this.opts=t,this.animationDelay=310,this._gsEventHandler={},this._extraDragRow=0,this.dragTransform={xScale:1,yScale:1,xOffset:0,yOffset:0},e.gridstack=this,this.opts=t=t||{},e.classList.contains("grid-stack")||this.el.classList.add("grid-stack"),t.row&&(t.minRow=t.maxRow=t.row,delete t.row);const i=se.toNumber(e.getAttribute("gs-row"));t.column==="auto"&&delete t.column,t.alwaysShowResizeHandle!==void 0&&(t._alwaysShowResizeHandle=t.alwaysShowResizeHandle);const o=t.columnOpts;if(o){const l=o.breakpoints;!o.columnWidth&&!l?.length?delete t.columnOpts:(o.columnMax=o.columnMax||12,l?.length>1&&l.sort((u,c)=>(c.w||0)-(u.w||0)))}const r={...se.cloneDeep(Qe),column:se.toNumber(e.getAttribute("gs-column"))||Qe.column,minRow:i||se.toNumber(e.getAttribute("gs-min-row"))||Qe.minRow,maxRow:i||se.toNumber(e.getAttribute("gs-max-row"))||Qe.maxRow,staticGrid:se.toBool(e.getAttribute("gs-static"))||Qe.staticGrid,sizeToContent:se.toBool(e.getAttribute("gs-size-to-content"))||void 0,draggable:{handle:(t.handleClass?"."+t.handleClass:t.handle?t.handle:"")||Qe.draggable.handle},removableOptions:{accept:t.itemClass||Qe.removableOptions.accept,decline:Qe.removableOptions.decline}};e.getAttribute("gs-animate")&&(r.animate=se.toBool(e.getAttribute("gs-animate"))),t=se.defaults(t,r),this._initMargin(),this.checkDynamicColumn(),this._updateColumnVar(t),t.rtl==="auto"&&(t.rtl=e.style.direction==="rtl"),t.rtl&&this.el.classList.add("grid-stack-rtl");const s=this.el.closest("."+Qe.itemClass)?.gridstackNode;if(s&&(s.subGrid=this,this.parentGridNode=s,this.el.classList.add("grid-stack-nested"),s.el.classList.add("grid-stack-sub-grid")),this._isAutoCellHeight=t.cellHeight==="auto",this._isAutoCellHeight||t.cellHeight==="initial")this.cellHeight(void 0);else{typeof t.cellHeight=="number"&&t.cellHeightUnit&&t.cellHeightUnit!==Qe.cellHeightUnit&&(t.cellHeight=t.cellHeight+t.cellHeightUnit,delete t.cellHeightUnit);const l=t.cellHeight;delete t.cellHeight,this.cellHeight(l)}t.alwaysShowResizeHandle==="mobile"&&(t.alwaysShowResizeHandle=Ze),this._setStaticClass();const a=t.engineClass||Te.engineClass||dt;if(this.engine=new a({column:this.getColumn(),float:t.float,maxRow:t.maxRow,onChange:l=>{l.forEach(u=>{const c=u.el;c&&(u._removeDOM?(c&&c.remove(),delete u._removeDOM):this._writePosAttr(c,u))}),this._updateContainerHeight()}}),t.auto&&(this.batchUpdate(),this.engine._loading=!0,this.getGridItems().forEach(l=>this._prepareElement(l)),delete this.engine._loading,this.batchUpdate(!1)),t.children){const l=t.children;delete t.children,l.length&&this.load(l)}this.setAnimation(),t.subGridDynamic&&!Oe.pauseDrag&&(Oe.pauseDrag=!0),t.draggable?.pause!==void 0&&(Oe.pauseDrag=t.draggable.pause),this._setupRemoveDrop(),this._setupAcceptWidget(),this._updateResizeEvent()}_updateColumnVar(e=this.opts){this.el.classList.add("gs-"+e.column),typeof e.column=="number"&&this.el.style.setProperty("--gs-column-width",`${100/e.column}%`)}addWidget(e){if(!e)return;if(typeof e=="string"){console.error("V11: GridStack.addWidget() does not support string anymore. see #2736");return}if(e.ELEMENT_NODE)return console.error("V11: GridStack.addWidget() does not support HTMLElement anymore. use makeWidget()"),this.makeWidget(e);let t,i=e;if(i.grid=this,i.el?t=i.el:Te.addRemoveCB?t=Te.addRemoveCB(this.el,e,!0,!1):t=this.createWidgetDivs(i),!t)return;if(i=t.gridstackNode,i&&t.parentElement===this.el&&this.engine.nodes.find(r=>r._id===i._id))return t;const o=this._readAttr(t);return se.defaults(e,o),this.engine.prepareNode(e),this.el.appendChild(t),this.makeWidget(t,e),t}createWidgetDivs(e){const t=se.createDiv(["grid-stack-item",this.opts.itemClass]),i=se.createDiv(["grid-stack-item-content"],t);return se.lazyLoad(e)?e.visibleObservable||(e.visibleObservable=new IntersectionObserver(([o])=>{o.isIntersecting&&(e.visibleObservable?.disconnect(),delete e.visibleObservable,Te.renderCB(i,e),e.grid?.prepareDragDrop(e.el))}),window.setTimeout(()=>e.visibleObservable?.observe(t))):Te.renderCB(i,e),t}makeSubGrid(e,t,i,o=!0){let r=e.gridstackNode;if(r||(r=this.makeWidget(e).gridstackNode),r.subGrid?.el)return r.subGrid;let n,s=this;for(;s&&!n;)n=s.opts?.subGridOpts,s=s.parentGridNode?.grid;t=se.cloneDeep({...this.opts,id:void 0,children:void 0,column:"auto",columnOpts:void 0,layout:"list",subGridOpts:void 0,...n||{},...t||r.subGridOpts||{}}),r.subGridOpts=t;let a;t.column==="auto"&&(a=!0,t.column=Math.max(r.w||1,i?.w||1),delete t.columnOpts);let l=r.el.querySelector(".grid-stack-item-content"),u,c;if(o&&(this._removeDD(r.el),c={...r,x:0,y:0},se.removeInternalForSave(c),delete c.subGridOpts,r.content&&(c.content=r.content,delete r.content),Te.addRemoveCB?u=Te.addRemoveCB(this.el,c,!0,!1):(u=se.createDiv(["grid-stack-item"]),u.appendChild(l),l=se.createDiv(["grid-stack-item-content"],r.el)),this.prepareDragDrop(r.el)),i){const y=a?t.column:r.w,f=r.h+i.h,m=r.el.style;m.transition="none",this.update(r.el,{w:y,h:f}),setTimeout(()=>m.transition=null)}const d=r.subGrid=Te.addGrid(l,t);return i?._moving&&(d._isTemp=!0),a&&(d._autoColumn=!0),o&&d.makeWidget(u,c),i&&(i._moving?window.setTimeout(()=>se.simulateMouseEvent(i._event,"mouseenter",d.el),0):d.makeWidget(r.el,r)),this.resizeToContentCheck(!1,r),d}removeAsSubGrid(e){const t=this.parentGridNode?.grid;t&&(t.batchUpdate(),t.removeWidget(this.parentGridNode.el,!0,!0),this.engine.nodes.forEach(i=>{i.x+=this.parentGridNode.x,i.y+=this.parentGridNode.y,t.makeWidget(i.el,i)}),t.batchUpdate(!1),this.parentGridNode&&delete this.parentGridNode.subGrid,delete this.parentGridNode,e&&window.setTimeout(()=>se.simulateMouseEvent(e._event,"mouseenter",t.el),0))}save(e=!0,t=!1,i=Te.saveCB,o){const r=this.engine.save(e,i,o);if(r.forEach(n=>{if(e&&n.el&&!n.subGrid&&!i){const s=n.el.querySelector(".grid-stack-item-content");n.content=s?.innerHTML,n.content||delete n.content}else if(!e&&!i&&delete n.content,n.subGrid?.el){const s=n.w||n.subGrid.getColumn(),a=n.subGrid.save(e,t,i,s);n.subGridOpts=t?a:{children:a},delete n.subGrid}delete n.el}),t){const n=se.cloneDeep(this.opts);n.marginBottom===n.marginTop&&n.marginRight===n.marginLeft&&n.marginTop===n.marginRight&&(n.margin=n.marginTop,delete n.marginTop,delete n.marginRight,delete n.marginBottom,delete n.marginLeft),n.rtl===(this.el.style.direction==="rtl")&&(n.rtl="auto"),this._isAutoCellHeight&&(n.cellHeight="auto"),this._autoColumn&&(n.column="auto");const s=n._alwaysShowResizeHandle;return delete n._alwaysShowResizeHandle,s!==void 0?n.alwaysShowResizeHandle=s:delete n.alwaysShowResizeHandle,se.removeInternalAndSame(n,Qe),n.children=r,n}return r}load(e,t=Te.addRemoveCB||!0){e=se.cloneDeep(e);const i=this.getColumn();e.forEach(u=>{u.w=u.w||u.minW||1,u.h=u.h||u.minH||1}),e=se.sort(e),this.engine.skipCacheUpdate=this._ignoreLayoutsNodeChange=!0;let o=0;e.forEach(u=>{o=Math.max(o,(u.x||0)+u.w)}),o>this.engine.defaultColumn&&(this.engine.defaultColumn=o),o>i&&(this.engine.nodes.length===0&&this.responseLayout?(this.engine.nodes=e,this.engine.columnChanged(o,i,this.responseLayout),e=this.engine.nodes,this.engine.nodes=[],delete this.responseLayout):this.engine.cacheLayout(e,o,!0));const r=Te.addRemoveCB;typeof t=="function"&&(Te.addRemoveCB=t);const n=[];this.batchUpdate();const s=!this.engine.nodes.length,a=s&&this.opts.animate;a&&this.setAnimation(!1),!s&&t&&[...this.engine.nodes].forEach(c=>{if(!c.id)return;se.find(e,c.id)||(Te.addRemoveCB&&Te.addRemoveCB(this.el,c,!1,!1),n.push(c),this.removeWidget(c.el,!0,!1))}),this.engine._loading=!0;const l=[];return this.engine.nodes=this.engine.nodes.filter(u=>se.find(e,u.id)?(l.push(u),!1):!0),e.forEach(u=>{const c=se.find(l,u.id);if(c){if(se.shouldSizeToContent(c)&&(u.h=c.h),this.engine.nodeBoundFix(u),(u.autoPosition||u.x===void 0||u.y===void 0)&&(u.w=u.w||c.w,u.h=u.h||c.h,this.engine.findEmptyPosition(u)),this.engine.nodes.push(c),se.samePos(c,u)&&this.engine.nodes.length>1&&(this.moveNode(c,{...u,forceCollide:!0}),se.copyPos(u,c)),this.update(c.el,u),u.subGridOpts?.children){const d=c.el.querySelector(".grid-stack");d&&d.gridstack&&d.gridstack.load(u.subGridOpts.children)}}else t&&this.addWidget(u)}),delete this.engine._loading,this.engine.removedNodes=n,this.batchUpdate(!1),delete this._ignoreLayoutsNodeChange,delete this.engine.skipCacheUpdate,r?Te.addRemoveCB=r:delete Te.addRemoveCB,a&&this.setAnimation(!0,!0),this}batchUpdate(e=!0){return this.engine.batchUpdate(e),e||(this._updateContainerHeight(),this._triggerRemoveEvent(),this._triggerAddEvent(),this._triggerChangeEvent()),this}getCellHeight(e=!1){if(this.opts.cellHeight&&this.opts.cellHeight!=="auto"&&(!e||!this.opts.cellHeightUnit||this.opts.cellHeightUnit==="px"))return this.opts.cellHeight;if(this.opts.cellHeightUnit==="rem")return this.opts.cellHeight*parseFloat(getComputedStyle(document.documentElement).fontSize);if(this.opts.cellHeightUnit==="em")return this.opts.cellHeight*parseFloat(getComputedStyle(this.el).fontSize);if(this.opts.cellHeightUnit==="cm")return this.opts.cellHeight*(96/2.54);if(this.opts.cellHeightUnit==="mm")return this.opts.cellHeight*(96/2.54)/10;const t=this.el.querySelector("."+this.opts.itemClass);if(t){const o=se.toNumber(t.getAttribute("gs-h"))||1;return Math.round(t.offsetHeight/o)}const i=parseInt(this.el.getAttribute("gs-current-row"));return i?Math.round(this.el.getBoundingClientRect().height/i):this.opts.cellHeight}cellHeight(e){if(e!==void 0&&this._isAutoCellHeight!==(e==="auto")&&(this._isAutoCellHeight=e==="auto",this._updateResizeEvent()),(e==="initial"||e==="auto")&&(e=void 0),e===void 0){const i=-this.opts.marginRight-this.opts.marginLeft+this.opts.marginTop+this.opts.marginBottom;e=this.cellWidth()+i}const t=se.parseHeight(e);return this.opts.cellHeightUnit===t.unit&&this.opts.cellHeight===t.h?this:(this.opts.cellHeightUnit=t.unit,this.opts.cellHeight=t.h,this.el.style.setProperty("--gs-cell-height",`${this.opts.cellHeight}${this.opts.cellHeightUnit}`),this._updateContainerHeight(),this.resizeToContentCheck(),this)}cellWidth(){return this._widthOrContainer()/this.getColumn()}_widthOrContainer(e=!1){return e&&this.opts.columnOpts?.breakpointForWindow?window.innerWidth:this.el.clientWidth||this.el.parentElement.clientWidth||window.innerWidth}checkDynamicColumn(){const e=this.opts.columnOpts;if(!e||!e.columnWidth&&!e.breakpoints?.length)return!1;const t=this.getColumn();let i=t;const o=this._widthOrContainer(!0);if(e.columnWidth)i=Math.min(Math.round(o/e.columnWidth)||1,e.columnMax);else{i=e.columnMax;let r=0;for(;r<e.breakpoints.length&&o<=e.breakpoints[r].w;)i=e.breakpoints[r++].c||t}if(i!==t){const r=e.breakpoints?.find(n=>n.c===i);return this.column(i,r?.layout||e.layout),!0}return!1}compact(e="compact",t=!0){return this.engine.compact(e,t),this._triggerChangeEvent(),this}column(e,t="moveScale"){if(!e||e<1||this.opts.column===e)return this;const i=this.getColumn();return this.opts.column=e,this.engine?(this.engine.column=e,this.el.classList.remove("gs-"+i),this._updateColumnVar(),this.engine.columnChanged(i,e,t),this._isAutoCellHeight&&this.cellHeight(),this.resizeToContentCheck(!0),this._ignoreLayoutsNodeChange=!0,this._triggerChangeEvent(),delete this._ignoreLayoutsNodeChange,this):(this.responseLayout=t,this)}getColumn(){return this.opts.column}getGridItems(){return Array.from(this.el.children).filter(e=>e.matches("."+this.opts.itemClass)&&!e.matches("."+this.opts.placeholderClass))}isIgnoreChangeCB(){return this._ignoreLayoutsNodeChange}destroy(e=!0){if(this.el)return this.offAll(),this._updateResizeEvent(!0),this.setStatic(!0,!1),this.setAnimation(!1),e?this.el.parentNode.removeChild(this.el):(this.removeAll(e),this.el.removeAttribute("gs-current-row")),this.parentGridNode&&delete this.parentGridNode.subGrid,delete this.parentGridNode,delete this.opts,delete this._placeholder?.gridstackNode,delete this._placeholder,delete this.engine,delete this.el.gridstack,delete this.el,this}float(e){return this.opts.float!==e&&(this.opts.float=this.engine.float=e,this._triggerChangeEvent()),this}getFloat(){return this.engine.float}getCellFromPixel(e,t=!1){const i=this.el.getBoundingClientRect();let o;t?o={top:i.top+document.documentElement.scrollTop,left:i.left}:o={top:this.el.offsetTop,left:this.el.offsetLeft};const r=e.left-o.left,n=e.top-o.top,s=i.width/this.getColumn(),a=i.height/parseInt(this.el.getAttribute("gs-current-row"));return{x:Math.floor(r/s),y:Math.floor(n/a)}}getRow(){return Math.max(this.engine.getRow(),this.opts.minRow||0)}isAreaEmpty(e,t,i,o){return this.engine.isAreaEmpty(e,t,i,o)}makeWidget(e,t){const i=Te.getElement(e);if(!i||i.gridstackNode)return i;i.parentElement||this.el.appendChild(i),this._prepareElement(i,!0,t);const o=i.gridstackNode;this._updateContainerHeight(),o.subGridOpts&&this.makeSubGrid(i,o.subGridOpts,void 0,!1);let r;return this.opts.column===1&&!this._ignoreLayoutsNodeChange&&(r=this._ignoreLayoutsNodeChange=!0),this._triggerAddEvent(),this._triggerChangeEvent(),r&&delete this._ignoreLayoutsNodeChange,i}on(e,t){return e.indexOf(" ")!==-1?(e.split(" ").forEach(o=>this.on(o,t)),this):(e==="change"||e==="added"||e==="removed"||e==="enable"||e==="disable"?(e==="enable"||e==="disable"?this._gsEventHandler[e]=o=>t(o):this._gsEventHandler[e]=o=>{o.detail&&t(o,o.detail)},this.el.addEventListener(e,this._gsEventHandler[e])):e==="drag"||e==="dragstart"||e==="dragstop"||e==="resizestart"||e==="resize"||e==="resizestop"||e==="dropped"||e==="resizecontent"?this._gsEventHandler[e]=t:console.error("GridStack.on("+e+") event not supported"),this)}off(e){return e.indexOf(" ")!==-1?(e.split(" ").forEach(i=>this.off(i)),this):((e==="change"||e==="added"||e==="removed"||e==="enable"||e==="disable")&&this._gsEventHandler[e]&&this.el.removeEventListener(e,this._gsEventHandler[e]),delete this._gsEventHandler[e],this)}offAll(){return Object.keys(this._gsEventHandler).forEach(e=>this.off(e)),this}removeWidget(e,t=!0,i=!0){return e?(Te.getElements(e).forEach(o=>{if(o.parentElement&&o.parentElement!==this.el)return;let r=o.gridstackNode;r||(r=this.engine.nodes.find(n=>o===n.el)),r&&(t&&Te.addRemoveCB&&Te.addRemoveCB(this.el,r,!1,!1),delete o.gridstackNode,this._removeDD(o),this.engine.removeNode(r,t,i),t&&o.parentElement&&o.remove())}),i&&(this._triggerRemoveEvent(),this._triggerChangeEvent()),this):(console.error("Error: GridStack.removeWidget(undefined) called"),this)}removeAll(e=!0,t=!0){return this.engine.nodes.forEach(i=>{e&&Te.addRemoveCB&&Te.addRemoveCB(this.el,i,!1,!1),delete i.el.gridstackNode,this.opts.staticGrid||this._removeDD(i.el)}),this.engine.removeAll(e,t),t&&this._triggerRemoveEvent(),this}setAnimation(e=this.opts.animate,t){return t?setTimeout(()=>{this.opts&&this.setAnimation(e)}):e?this.el.classList.add("grid-stack-animate"):this.el.classList.remove("grid-stack-animate"),this.opts.animate=e,this}hasAnimationCSS(){return this.el.classList.contains("grid-stack-animate")}setStatic(e,t=!0,i=!0){return!!this.opts.staticGrid===e?this:(e?this.opts.staticGrid=!0:delete this.opts.staticGrid,this._setupRemoveDrop(),this._setupAcceptWidget(),this.engine.nodes.forEach(o=>{this.prepareDragDrop(o.el),o.subGrid&&i&&o.subGrid.setStatic(e,t,i)}),t&&this._setStaticClass(),this)}updateOptions(e){const t=this.opts;return e===t?this:(e.acceptWidgets!==void 0&&(t.acceptWidgets=e.acceptWidgets,this._setupAcceptWidget()),e.animate!==void 0&&this.setAnimation(e.animate),e.cellHeight&&this.cellHeight(e.cellHeight),e.class!==void 0&&e.class!==t.class&&(t.class&&this.el.classList.remove(t.class),e.class&&this.el.classList.add(e.class)),e.columnOpts?(this.opts.columnOpts=e.columnOpts,this.checkDynamicColumn()):e.columnOpts===null&&this.opts.columnOpts?(delete this.opts.columnOpts,this._updateResizeEvent()):typeof e.column=="number"&&this.column(e.column),e.margin!==void 0&&this.margin(e.margin),e.staticGrid!==void 0&&this.setStatic(e.staticGrid),e.disableDrag!==void 0&&!e.staticGrid&&this.enableMove(!e.disableDrag),e.disableResize!==void 0&&!e.staticGrid&&this.enableResize(!e.disableResize),e.float!==void 0&&this.float(e.float),e.row!==void 0?(t.minRow=t.maxRow=t.row=e.row,this._updateContainerHeight()):(e.minRow!==void 0&&(t.minRow=e.minRow,this._updateContainerHeight()),e.maxRow!==void 0&&(t.maxRow=e.maxRow)),e.lazyLoad!==void 0&&(t.lazyLoad=e.lazyLoad),e.children?.length&&this.load(e.children),this)}update(e,t){return Te.getElements(e).forEach(i=>{const o=i?.gridstackNode;if(!o)return;const r={...se.copyPos({},o),...se.cloneDeep(t)};this.engine.nodeBoundFix(r),delete r.autoPosition;const n=["x","y","w","h"];let s;if(n.some(u=>r[u]!==void 0&&r[u]!==o[u])&&(s={},n.forEach(u=>{s[u]=r[u]!==void 0?r[u]:o[u],delete r[u]})),!s&&(r.minW||r.minH||r.maxW||r.maxH)&&(s={}),r.content!==void 0){const u=i.querySelector(".grid-stack-item-content");u&&u.textContent!==r.content&&(o.content=r.content,Te.renderCB(u,r),o.subGrid?.el&&(u.appendChild(o.subGrid.el),o.subGrid._updateContainerHeight())),delete r.content}let a=!1,l=!1;for(const u in r)u[0]!=="_"&&o[u]!==r[u]&&(o[u]=r[u],a=!0,l=l||!this.opts.staticGrid&&(u==="noResize"||u==="noMove"||u==="locked"));if(se.sanitizeMinMax(o),s){const u=s.w!==void 0&&s.w!==o.w;this.moveNode(o,s),u&&o.subGrid?o.subGrid.onResize(this.hasAnimationCSS()?o.w:void 0):this.resizeToContentCheck(u,o),delete o._orig}(s||a)&&this._writeAttr(i,o),l&&this.prepareDragDrop(o.el),Te.updateCB&&Te.updateCB(o)}),this}moveNode(e,t){const i=e._updating;i||this.engine.cleanNodes().beginUpdate(e),this.engine.moveNode(e,t),this._updateContainerHeight(),i||(this._triggerChangeEvent(),this.engine.endUpdate())}resizeToContent(e){if(!e||(e.classList.remove("size-to-content-max"),!e.clientHeight))return;const t=e.gridstackNode;if(!t)return;const i=t.grid;if(!i||e.parentElement!==i.el)return;const o=i.getCellHeight(!0);if(!o)return;let r=t.h?t.h*o:e.clientHeight,n;if(t.resizeToContentParent&&(n=e.querySelector(t.resizeToContentParent)),n||(n=e.querySelector(Te.resizeToContentParent)),!n)return;const s=e.clientHeight-n.clientHeight,a=t.h?t.h*o-s:n.clientHeight;let l;if(t.subGrid){l=t.subGrid.getRow()*t.subGrid.getCellHeight(!0);const d=t.subGrid.el.getBoundingClientRect(),y=e.getBoundingClientRect();l+=d.top-y.top}else{if(t.subGridOpts?.children?.length)return;{const d=n.firstElementChild;if(!d){console.error(`Error: GridStack.resizeToContent() widget id:${t.id} '${Te.resizeToContentParent}'.firstElementChild is null, make sure to have a div like container. Skipping sizing.`);return}l=d.getBoundingClientRect().height||a}}if(a===l)return;r+=l-a;let u=Math.ceil(r/o);const c=Number.isInteger(t.sizeToContent)?t.sizeToContent:0;c&&u>c&&(u=c,e.classList.add("size-to-content-max")),t.minH&&u<t.minH?u=t.minH:t.maxH&&u>t.maxH&&(u=t.maxH),u!==t.h&&(i._ignoreLayoutsNodeChange=!0,i.moveNode(t,{h:u}),delete i._ignoreLayoutsNodeChange)}resizeToContentCBCheck(e){Te.resizeToContentCB?Te.resizeToContentCB(e):this.resizeToContent(e)}rotate(e,t){return Te.getElements(e).forEach(i=>{const o=i.gridstackNode;if(!se.canBeRotated(o))return;const r={w:o.h,h:o.w,minH:o.minW,minW:o.minH,maxH:o.maxW,maxW:o.maxH};if(t){const s=t.left>0?Math.floor(t.left/this.cellWidth()):0,a=t.top>0?Math.floor(t.top/this.opts.cellHeight):0;r.x=o.x+s-(o.h-(a+1)),r.y=o.y+a-s}Object.keys(r).forEach(s=>{r[s]===void 0&&delete r[s]});const n=o._orig;this.update(i,r),o._orig=n}),this}margin(e){if(!(typeof e=="string"&&e.split(" ").length>1)){const i=se.parseHeight(e);if(this.opts.marginUnit===i.unit&&this.opts.margin===i.h)return}return this.opts.margin=e,this.opts.marginTop=this.opts.marginBottom=this.opts.marginLeft=this.opts.marginRight=void 0,this._initMargin(),this}getMargin(){return this.opts.margin}willItFit(e){return this.engine.willItFit(e)}_triggerChangeEvent(){if(this.engine.batchMode)return this;const e=this.engine.getDirtyNodes(!0);return e&&e.length&&(this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(e),this._triggerEvent("change",e)),this.engine.saveInitial(),this}_triggerAddEvent(){if(this.engine.batchMode)return this;if(this.engine.addedNodes?.length){this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(this.engine.addedNodes),this.engine.addedNodes.forEach(t=>{delete t._dirty});const e=[...this.engine.addedNodes];this.engine.addedNodes=[],this._triggerEvent("added",e)}return this}_triggerRemoveEvent(){if(this.engine.batchMode)return this;if(this.engine.removedNodes?.length){const e=[...this.engine.removedNodes];this.engine.removedNodes=[],this._triggerEvent("removed",e)}return this}_triggerEvent(e,t){const i=t?new CustomEvent(e,{bubbles:!1,detail:t}):new Event(e);let o=this;for(;o.parentGridNode;)o=o.parentGridNode.grid;return o.el.dispatchEvent(i),this}_updateContainerHeight(){if(!this.engine||this.engine.batchMode)return this;const e=this.parentGridNode;let t=this.getRow()+this._extraDragRow;const i=this.opts.cellHeight,o=this.opts.cellHeightUnit;if(!i)return this;if(!e&&!this.opts.minRow){const r=se.parseHeight(getComputedStyle(this.el).minHeight);if(r.h>0&&r.unit===o){const n=Math.floor(r.h/i);t<n&&(t=n)}}return this.el.setAttribute("gs-current-row",String(t)),this.el.style.removeProperty("min-height"),this.el.style.removeProperty("height"),t&&(this.el.style[e?"minHeight":"height"]=t*i+o),e&&se.shouldSizeToContent(e)&&e.grid.resizeToContentCBCheck(e.el),this}_prepareElement(e,t=!1,i){i=i||this._readAttr(e),e.gridstackNode=i,i.el=e,i.grid=this,i=this.engine.addNode(i,t),this._writeAttr(e,i),e.classList.add(Qe.itemClass,this.opts.itemClass);const o=se.shouldSizeToContent(i);return o?e.classList.add("size-to-content"):e.classList.remove("size-to-content"),o&&this.resizeToContentCheck(!1,i),se.lazyLoad(i)||this.prepareDragDrop(i.el),this}_writePosAttr(e,t){return(!t._moving&&!t._resizing||this._placeholder===e)&&(e.style.top=t.y?t.y===1?"var(--gs-cell-height)":`calc(${t.y} * var(--gs-cell-height))`:null,e.style.left=t.x?t.x===1?"var(--gs-column-width)":`calc(${t.x} * var(--gs-column-width))`:null,e.style.width=t.w>1?`calc(${t.w} * var(--gs-column-width))`:null,e.style.height=t.h>1?`calc(${t.h} * var(--gs-cell-height))`:null),e.setAttribute("gs-x",String(t.x)),e.setAttribute("gs-y",String(t.y)),t.w>1?e.setAttribute("gs-w",String(t.w)):e.removeAttribute("gs-w"),t.h>1?e.setAttribute("gs-h",String(t.h)):e.removeAttribute("gs-h"),this}_writeAttr(e,t){if(!t)return this;this._writePosAttr(e,t);const i={noResize:"gs-no-resize",noMove:"gs-no-move",locked:"gs-locked",id:"gs-id",sizeToContent:"gs-size-to-content"};for(const o in i)t[o]?e.setAttribute(i[o],String(t[o])):e.removeAttribute(i[o]);return this}_readAttr(e,t=!0){const i={};i.x=se.toNumber(e.getAttribute("gs-x")),i.y=se.toNumber(e.getAttribute("gs-y")),i.w=se.toNumber(e.getAttribute("gs-w")),i.h=se.toNumber(e.getAttribute("gs-h")),i.autoPosition=se.toBool(e.getAttribute("gs-auto-position")),i.noResize=se.toBool(e.getAttribute("gs-no-resize")),i.noMove=se.toBool(e.getAttribute("gs-no-move")),i.locked=se.toBool(e.getAttribute("gs-locked"));const o=e.getAttribute("gs-size-to-content");o&&(o==="true"||o==="false"?i.sizeToContent=se.toBool(o):i.sizeToContent=parseInt(o,10)),i.id=e.getAttribute("gs-id"),i.maxW=se.toNumber(e.getAttribute("gs-max-w")),i.minW=se.toNumber(e.getAttribute("gs-min-w")),i.maxH=se.toNumber(e.getAttribute("gs-max-h")),i.minH=se.toNumber(e.getAttribute("gs-min-h")),t&&(i.w===1&&e.removeAttribute("gs-w"),i.h===1&&e.removeAttribute("gs-h"),i.maxW&&e.removeAttribute("gs-max-w"),i.minW&&e.removeAttribute("gs-min-w"),i.maxH&&e.removeAttribute("gs-max-h"),i.minH&&e.removeAttribute("gs-min-h"));for(const r in i){if(!i.hasOwnProperty(r))return;!i[r]&&i[r]!==0&&r!=="sizeToContent"&&delete i[r]}return i}_setStaticClass(){const e=["grid-stack-static"];return this.opts.staticGrid?(this.el.classList.add(...e),this.el.setAttribute("gs-static","true")):(this.el.classList.remove(...e),this.el.removeAttribute("gs-static")),this}onResize(e=this.el?.clientWidth){if(!e||this.prevWidth===e)return;this.prevWidth=e,this.batchUpdate();let t=!1;return this._autoColumn&&this.parentGridNode?this.opts.column!==this.parentGridNode.w&&(this.column(this.parentGridNode.w,this.opts.layout||"list"),t=!0):t=this.checkDynamicColumn(),this._isAutoCellHeight&&this.cellHeight(),this.engine.nodes.forEach(i=>{i.subGrid&&i.subGrid.onResize()}),this._skipInitialResize||this.resizeToContentCheck(t),delete this._skipInitialResize,this.batchUpdate(!1),this}resizeToContentCheck(e=!1,t=void 0){if(this.engine){if(e&&this.hasAnimationCSS())return setTimeout(()=>this.resizeToContentCheck(!1,t),this.animationDelay);if(t)se.shouldSizeToContent(t)&&this.resizeToContentCBCheck(t.el);else if(this.engine.nodes.some(i=>se.shouldSizeToContent(i))){const i=[...this.engine.nodes];this.batchUpdate(),i.forEach(o=>{se.shouldSizeToContent(o)&&this.resizeToContentCBCheck(o.el)}),this._ignoreLayoutsNodeChange=!0,this.batchUpdate(!1),this._ignoreLayoutsNodeChange=!1}this._gsEventHandler.resizecontent&&this._gsEventHandler.resizecontent(null,t?[t]:this.engine.nodes)}}_updateResizeEvent(e=!1){const t=!this.parentGridNode&&(this._isAutoCellHeight||this.opts.sizeToContent||this.opts.columnOpts||this.engine.nodes.find(i=>i.sizeToContent));return!e&&t&&!this.resizeObserver?(this._sizeThrottle=se.throttle(()=>this.onResize(),this.opts.cellHeightThrottle),this.resizeObserver=new ResizeObserver(()=>this._sizeThrottle()),this.resizeObserver.observe(this.el),this._skipInitialResize=!0):(e||!t)&&this.resizeObserver&&(this.resizeObserver.disconnect(),delete this.resizeObserver,delete this._sizeThrottle),this}static getElement(e=".grid-stack-item"){return se.getElement(e)}static getElements(e=".grid-stack-item"){return se.getElements(e)}static getGridElement(e){return Te.getElement(e)}static getGridElements(e){return se.getElements(e)}_initMargin(){let e,t=0,i=[];typeof this.opts.margin=="string"&&(i=this.opts.margin.split(" ")),i.length===2?(this.opts.marginTop=this.opts.marginBottom=i[0],this.opts.marginLeft=this.opts.marginRight=i[1]):i.length===4?(this.opts.marginTop=i[0],this.opts.marginRight=i[1],this.opts.marginBottom=i[2],this.opts.marginLeft=i[3]):(e=se.parseHeight(this.opts.margin),this.opts.marginUnit=e.unit,t=this.opts.margin=e.h),["marginTop","marginRight","marginBottom","marginLeft"].forEach(n=>{this.opts[n]===void 0?this.opts[n]=t:(e=se.parseHeight(this.opts[n]),this.opts[n]=e.h,delete this.opts.margin)}),this.opts.marginUnit=e.unit,this.opts.marginTop===this.opts.marginBottom&&this.opts.marginLeft===this.opts.marginRight&&this.opts.marginTop===this.opts.marginRight&&(this.opts.margin=this.opts.marginTop);const r=this.el.style;return r.setProperty("--gs-item-margin-top",`${this.opts.marginTop}${this.opts.marginUnit}`),r.setProperty("--gs-item-margin-bottom",`${this.opts.marginBottom}${this.opts.marginUnit}`),r.setProperty("--gs-item-margin-right",`${this.opts.marginRight}${this.opts.marginUnit}`),r.setProperty("--gs-item-margin-left",`${this.opts.marginLeft}${this.opts.marginUnit}`),this}static getDD(){return $e}static setupDragIn(e,t,i,o=document){t?.pause!==void 0&&(Oe.pauseDrag=t.pause),t={appendTo:"body",helper:"clone",...t||{}},(typeof e=="string"?se.getElements(e,o):e).forEach((n,s)=>{$e.isDraggable(n)||$e.dragIn(n,t),i?.[s]&&(n.gridstackNode=i[s])})}movable(e,t){return this.opts.staticGrid?this:(Te.getElements(e).forEach(i=>{const o=i.gridstackNode;o&&(t?delete o.noMove:o.noMove=!0,this.prepareDragDrop(o.el))}),this)}resizable(e,t){return this.opts.staticGrid?this:(Te.getElements(e).forEach(i=>{const o=i.gridstackNode;o&&(t?delete o.noResize:o.noResize=!0,this.prepareDragDrop(o.el))}),this)}disable(e=!0){if(!this.opts.staticGrid)return this.enableMove(!1,e),this.enableResize(!1,e),this._triggerEvent("disable"),this}enable(e=!0){if(!this.opts.staticGrid)return this.enableMove(!0,e),this.enableResize(!0,e),this._triggerEvent("enable"),this}enableMove(e,t=!0){return this.opts.staticGrid?this:(e?delete this.opts.disableDrag:this.opts.disableDrag=!0,this.engine.nodes.forEach(i=>{this.prepareDragDrop(i.el),i.subGrid&&t&&i.subGrid.enableMove(e,t)}),this)}enableResize(e,t=!0){return this.opts.staticGrid?this:(e?delete this.opts.disableResize:this.opts.disableResize=!0,this.engine.nodes.forEach(i=>{this.prepareDragDrop(i.el),i.subGrid&&t&&i.subGrid.enableResize(e,t)}),this)}cancelDrag(){const e=this._placeholder?.gridstackNode;e&&(e._isExternal?(e._isAboutToRemove=!0,this.engine.removeNode(e)):e._isAboutToRemove&&Te._itemRemoving(e.el,!1),this.engine.restoreInitial())}_removeDD(e){return $e.draggable(e,"destroy").resizable(e,"destroy"),e.gridstackNode&&delete e.gridstackNode._initDD,delete e.ddElement,this}_setupAcceptWidget(){if(this.opts.staticGrid||!this.opts.acceptWidgets&&!this.opts.removable)return $e.droppable(this.el,"destroy"),this;let e,t;const i=(o,r,n)=>{n=n||r;const s=n.gridstackNode;if(!s)return;if(!s.grid?.el){n.style.transform=`scale(${1/this.dragTransform.xScale},${1/this.dragTransform.yScale})`;const d=n.getBoundingClientRect();n.style.left=d.x+(this.dragTransform.xScale-1)*(o.clientX-d.x)/this.dragTransform.xScale+"px",n.style.top=d.y+(this.dragTransform.yScale-1)*(o.clientY-d.y)/this.dragTransform.yScale+"px",n.style.transformOrigin="0px 0px"}let{top:a,left:l}=n.getBoundingClientRect();const u=this.el.getBoundingClientRect();l-=u.left,a-=u.top;const c={position:{top:a*this.dragTransform.xScale,left:l*this.dragTransform.yScale}};if(s._temporaryRemoved){if(s.x=Math.max(0,Math.round(l/t)),s.y=Math.max(0,Math.round(a/e)),delete s.autoPosition,this.engine.nodeBoundFix(s),!this.engine.willItFit(s)){if(s.autoPosition=!0,!this.engine.willItFit(s)){$e.off(r,"drag");return}s._willFitPos&&(se.copyPos(s,s._willFitPos),delete s._willFitPos)}this._onStartMoving(n,o,c,s,t,e)}else this._dragOrResize(n,o,c,s,t,e)};return $e.droppable(this.el,{accept:o=>{const r=o.gridstackNode||this._readAttr(o,!1);if(r?.grid===this)return!0;if(!this.opts.acceptWidgets)return!1;let n=!0;if(typeof this.opts.acceptWidgets=="function")n=this.opts.acceptWidgets(o);else{const s=this.opts.acceptWidgets===!0?".grid-stack-item":this.opts.acceptWidgets;n=o.matches(s)}if(n&&r&&this.opts.maxRow){const s={w:r.w,h:r.h,minW:r.minW,minH:r.minH};n=this.engine.willItFit(s)}return n}}).on(this.el,"dropover",(o,r,n)=>{let s=n?.gridstackNode||r.gridstackNode;if(s?.grid===this&&!s._temporaryRemoved)return!1;if(s?._sidebarOrig&&(s.w=s._sidebarOrig.w,s.h=s._sidebarOrig.h),s?.grid&&s.grid!==this&&!s._temporaryRemoved&&s.grid._leave(r,n),n=n||r,t=this.cellWidth(),e=this.getCellHeight(!0),!s){const u=n.getAttribute("data-gs-widget")||n.getAttribute("gridstacknode");if(u){try{s=JSON.parse(u)}catch{console.error("Gridstack dropover: Bad JSON format: ",u)}n.removeAttribute("data-gs-widget"),n.removeAttribute("gridstacknode")}s||(s=this._readAttr(n)),s._sidebarOrig={w:s.w,h:s.h}}s.grid||(s.el||(s={...s}),s._isExternal=!0,n.gridstackNode=s);const a=s.w||Math.round(n.offsetWidth/t)||1,l=s.h||Math.round(n.offsetHeight/e)||1;return s.grid&&s.grid!==this?(r._gridstackNodeOrig||(r._gridstackNodeOrig=s),r.gridstackNode=s={...s,w:a,h:l,grid:this},delete s.x,delete s.y,this.engine.cleanupNode(s).nodeBoundFix(s),s._initDD=s._isExternal=s._temporaryRemoved=!0):(s.w=a,s.h=l,s._temporaryRemoved=!0),Te._itemRemoving(s.el,!1),$e.on(r,"drag",i),i(o,r,n),!1}).on(this.el,"dropout",(o,r,n)=>{const s=n?.gridstackNode||r.gridstackNode;return s&&(!s.grid||s.grid===this)&&(this._leave(r,n),this._isTemp&&this.removeAsSubGrid(s)),!1}).on(this.el,"drop",(o,r,n)=>{const s=n?.gridstackNode||r.gridstackNode;if(s?.grid===this&&!s._isExternal)return!1;const a=!!this.placeholder.parentElement,l=r!==n;this.placeholder.remove(),delete this.placeholder.gridstackNode,a&&this.opts.animate&&(this.setAnimation(!1),this.setAnimation(!0,!0));const u=r._gridstackNodeOrig;if(delete r._gridstackNodeOrig,a&&u?.grid&&u.grid!==this){const d=u.grid;d.engine.removeNodeFromLayoutCache(u),d.engine.removedNodes.push(u),d._triggerRemoveEvent()._triggerChangeEvent(),d.parentGridNode&&!d.engine.nodes.length&&d.opts.subGridDynamic&&d.removeAsSubGrid()}if(!s||(a&&(this.engine.cleanupNode(s),s.grid=this),delete s.grid?._isTemp,$e.off(r,"drag"),n!==r?(n.remove(),r=n):r.remove(),this._removeDD(r),!a))return!1;const c=s.subGrid?.el?.gridstack;return se.copyPos(s,this._readAttr(this.placeholder)),se.removePositioningStyles(r),l&&(s.content||s.subGridOpts||Te.addRemoveCB)?(delete s.el,r=this.addWidget(s)):(this._prepareElement(r,!0,s),this.el.appendChild(r),this.resizeToContentCheck(!1,s),c&&(c.parentGridNode=s),this._updateContainerHeight()),this.engine.addedNodes.push(s),this._triggerAddEvent(),this._triggerChangeEvent(),this.engine.endUpdate(),this._gsEventHandler.dropped&&this._gsEventHandler.dropped({...o,type:"dropped"},u&&u.grid?u:void 0,s),!1}),this}static _itemRemoving(e,t){if(!e)return;const i=e?e.gridstackNode:void 0;!i?.grid||e.classList.contains(i.grid.opts.removableOptions.decline)||(t?i._isAboutToRemove=!0:delete i._isAboutToRemove,t?e.classList.add("grid-stack-item-removing"):e.classList.remove("grid-stack-item-removing"))}_setupRemoveDrop(){if(typeof this.opts.removable!="string")return this;const e=document.querySelector(this.opts.removable);return e?(!this.opts.staticGrid&&!$e.isDroppable(e)&&$e.droppable(e,this.opts.removableOptions).on(e,"dropover",(t,i)=>Te._itemRemoving(i,!0)).on(e,"dropout",(t,i)=>Te._itemRemoving(i,!1)),this):this}prepareDragDrop(e,t=!1){const i=e?.gridstackNode;if(!i)return;const o=i.noMove||this.opts.disableDrag,r=i.noResize||this.opts.disableResize,n=this.opts.staticGrid||o&&r;if((t||n)&&(i._initDD&&(this._removeDD(e),delete i._initDD),n&&e.classList.add("ui-draggable-disabled","ui-resizable-disabled"),!t))return this;if(!i._initDD){let s,a;const l=(d,y)=>{this.triggerEvent(d,d.target),s=this.cellWidth(),a=this.getCellHeight(!0),this._onStartMoving(e,d,y,i,s,a)},u=(d,y)=>{this._dragOrResize(e,d,y,i,s,a)},c=d=>{this.placeholder.remove(),delete this.placeholder.gridstackNode,delete i._moving,delete i._resizing,delete i._event,delete i._lastTried;const y=i.w!==i._orig.w,f=d.target;if(!(!f.gridstackNode||f.gridstackNode.grid!==this)){if(i.el=f,i._isAboutToRemove){const m=e.gridstackNode.grid;m._gsEventHandler[d.type]&&m._gsEventHandler[d.type](d,f),m.engine.nodes.push(i),m.removeWidget(e,!0,!0)}else se.removePositioningStyles(f),i._temporaryRemoved?(this._writePosAttr(f,i),this.engine.addNode(i)):this._writePosAttr(f,i),this.triggerEvent(d,f);this._extraDragRow=0,this._updateContainerHeight(),this._triggerChangeEvent(),this.engine.endUpdate(),d.type==="resizestop"&&(Number.isInteger(i.sizeToContent)&&(i.sizeToContent=i.h),this.resizeToContentCheck(y,i))}};$e.draggable(e,{start:l,stop:c,drag:u}).resizable(e,{start:l,stop:c,resize:u}),i._initDD=!0}return $e.draggable(e,o?"disable":"enable").resizable(e,r?"disable":"enable"),this}_onStartMoving(e,t,i,o,r,n){if(this.engine.cleanNodes().beginUpdate(o),this._writePosAttr(this.placeholder,o),this.el.appendChild(this.placeholder),this.placeholder.gridstackNode=o,o.grid?.el)this.dragTransform=se.getValuesFromTransformedElement(e);else if(this.placeholder&&this.placeholder.closest(".grid-stack")){const s=this.placeholder.closest(".grid-stack");this.dragTransform=se.getValuesFromTransformedElement(s)}else this.dragTransform={xScale:1,xOffset:0,yScale:1,yOffset:0};if(o.el=this.placeholder,o._lastUiPosition=i.position,o._prevYPix=i.position.top,o._moving=t.type==="dragstart",o._resizing=t.type==="resizestart",delete o._lastTried,t.type==="dropover"&&o._temporaryRemoved&&(this.engine.addNode(o),o._moving=!0),this.engine.cacheRects(r,n,this.opts.marginTop,this.opts.marginRight,this.opts.marginBottom,this.opts.marginLeft),t.type==="resizestart"){const s=this.getColumn()-o.x,a=(this.opts.maxRow||Number.MAX_SAFE_INTEGER)-o.y;$e.resizable(e,"option","minWidth",r*Math.min(o.minW||1,s)).resizable(e,"option","minHeight",n*Math.min(o.minH||1,a)).resizable(e,"option","maxWidth",r*Math.min(o.maxW||Number.MAX_SAFE_INTEGER,s)).resizable(e,"option","maxWidthMoveLeft",r*Math.min(o.maxW||Number.MAX_SAFE_INTEGER,o.x+o.w)).resizable(e,"option","maxHeight",n*Math.min(o.maxH||Number.MAX_SAFE_INTEGER,a)).resizable(e,"option","maxHeightMoveUp",n*Math.min(o.maxH||Number.MAX_SAFE_INTEGER,o.y+o.h))}}_dragOrResize(e,t,i,o,r,n){const s={...o._orig};let a,l=this.opts.marginLeft,u=this.opts.marginRight,c=this.opts.marginTop,d=this.opts.marginBottom;const y=Math.round(n*.1),f=Math.round(r*.1);if(l=Math.min(l,f),u=Math.min(u,f),c=Math.min(c,y),d=Math.min(d,y),t.type==="drag"){if(o._temporaryRemoved)return;const b=i.position.top-o._prevYPix;o._prevYPix=i.position.top,this.opts.draggable.scroll!==!1&&se.updateScrollPosition(e,i.position,b);const E=i.position.left+(i.position.left>o._lastUiPosition.left?-u:l),g=i.position.top+(i.position.top>o._lastUiPosition.top?-d:c);s.x=Math.round(E/r),s.y=Math.round(g/n);const _=this._extraDragRow;if(this.engine.collide(o,s)){const x=this.getRow();let v=Math.max(0,s.y+o.h-x);this.opts.maxRow&&x+v>this.opts.maxRow&&(v=Math.max(0,this.opts.maxRow-x)),this._extraDragRow=v}else this._extraDragRow=0;if(this._extraDragRow!==_&&this._updateContainerHeight(),o.x===s.x&&o.y===s.y)return}else if(t.type==="resize"){if(s.x<0||(se.updateScrollResize(t,e,n),s.w=Math.round((i.size.width-l)/r),s.h=Math.round((i.size.height-c)/n),o.w===s.w&&o.h===s.h)||o._lastTried&&o._lastTried.w===s.w&&o._lastTried.h===s.h)return;const b=i.position.left+l,E=i.position.top+c;s.x=Math.round(b/r),s.y=Math.round(E/n),a=!0}o._event=t,o._lastTried=s;const m={x:i.position.left+l,y:i.position.top+c,w:(i.size?i.size.width:o.w*r)-l-u,h:(i.size?i.size.height:o.h*n)-c-d};if(this.engine.moveNodeCheck(o,{...s,cellWidth:r,cellHeight:n,rect:m,resizing:a})){o._lastUiPosition=i.position,this.engine.cacheRects(r,n,c,u,d,l),delete o._skipDown,a&&o.subGrid&&o.subGrid.onResize(),this._extraDragRow=0,this._updateContainerHeight();const b=t.target;o._sidebarOrig||this._writePosAttr(b,o),this.triggerEvent(t,b)}}triggerEvent(e,t){let i=this;for(;i.parentGridNode;)i=i.parentGridNode.grid;i._gsEventHandler[e.type]&&i._gsEventHandler[e.type](e,t)}_leave(e,t){t=t||e;const i=t.gridstackNode;if(!i||(t.style.transform=t.style.transformOrigin=null,$e.off(e,"drag"),i._temporaryRemoved))return;i._temporaryRemoved=!0,this.engine.removeNode(i),i.el=i._isExternal&&t?t:e;const o=i._sidebarOrig;i._isExternal&&this.engine.cleanupNode(i),i._sidebarOrig=o,this.opts.removable===!0&&Te._itemRemoving(e,!0),e._gridstackNodeOrig?(e.gridstackNode=e._gridstackNodeOrig,delete e._gridstackNodeOrig):i._isExternal&&this.engine.restoreInitial()}}Te.renderCB=(p,e)=>{p&&e?.content&&(p.textContent=e.content)};Te.resizeToContentParent=".grid-stack-item-content";Te.Utils=se;Te.Engine=dt;Te.GDRev="12.4.2";var Xn=Object.defineProperty,il=Object.getOwnPropertyDescriptor,nl=Object.getOwnPropertyNames,sl=Object.prototype.hasOwnProperty,Ke=(p,e)=>()=>(p&&(e=p(p=0)),e),ge=(p,e)=>()=>(e||p((e={exports:{}}).exports,e),e.exports),Ft=(p,e)=>{for(var t in e)Xn(p,t,{get:e[t],enumerable:!0})},ol=(p,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of nl(e))!sl.call(p,o)&&o!==t&&Xn(p,o,{get:()=>e[o],enumerable:!(i=il(e,o))||i.enumerable});return p},Me=p=>ol(Xn({},"__esModule",{value:!0}),p),ue=Ke(()=>{}),Ne={};Ft(Ne,{_debugEnd:()=>Ci,_debugProcess:()=>Oi,_events:()=>$i,_eventsCount:()=>Gi,_exiting:()=>gi,_fatalExceptions:()=>ki,_getActiveHandles:()=>Co,_getActiveRequests:()=>Oo,_kill:()=>bi,_linkedBinding:()=>Io,_maxListeners:()=>qi,_preload_modules:()=>zi,_rawDebug:()=>fi,_startProfilerIdleNotifier:()=>Ri,_stopProfilerIdleNotifier:()=>Pi,_tickCallback:()=>Ti,abort:()=>Di,addListener:()=>Vi,allowedNodeEnvironmentFlags:()=>xi,arch:()=>Jr,argv:()=>ti,argv0:()=>Wi,assert:()=>Ro,binding:()=>oi,browser:()=>ci,chdir:()=>ui,config:()=>mi,cpuUsage:()=>Kt,cwd:()=>li,debugPort:()=>Fi,default:()=>Zn,dlopen:()=>To,domain:()=>pi,emit:()=>Ji,emitWarning:()=>si,env:()=>ei,execArgv:()=>ri,execPath:()=>Ui,exit:()=>Ei,features:()=>Ai,hasUncaughtExceptionCaptureCallback:()=>Po,hrtime:()=>ur,kill:()=>_i,listeners:()=>No,memoryUsage:()=>wi,moduleLoadList:()=>di,nextTick:()=>Ao,off:()=>Yi,on:()=>ut,once:()=>Ki,openStdin:()=>Si,pid:()=>ji,platform:()=>Zr,ppid:()=>Bi,prependListener:()=>Zi,prependOnceListener:()=>en,reallyExit:()=>yi,release:()=>hi,removeAllListeners:()=>Xi,removeListener:()=>Qi,resourceUsage:()=>vi,setSourceMapsEnabled:()=>Hi,setUncaughtExceptionCaptureCallback:()=>Ii,stderr:()=>Ni,stdin:()=>Li,stdout:()=>Mi,title:()=>Xr,umask:()=>ai,uptime:()=>Mo,version:()=>ii,versions:()=>ni});function Jn(p){throw new Error("Node.js process "+p+" is not supported by JSPM core outside of Node.js")}function al(){!Ct||!Tt||(Ct=!1,Tt.length?ot=Tt.concat(ot):Jt=-1,ot.length&&xo())}function xo(){if(!Ct){var p=setTimeout(al,0);Ct=!0;for(var e=ot.length;e;){for(Tt=ot,ot=[];++Jt<e;)Tt&&Tt[Jt].run();Jt=-1,e=ot.length}Tt=null,Ct=!1,clearTimeout(p)}}function Ao(p){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];ot.push(new ko(p,e)),ot.length===1&&!Ct&&setTimeout(xo,0)}function ko(p,e){this.fun=p,this.array=e}function We(){}function Io(p){Jn("_linkedBinding")}function To(p){Jn("dlopen")}function Oo(){return[]}function Co(){return[]}function Ro(p,e){if(!p)throw new Error(e||"assertion error")}function Po(){return!1}function Mo(){return ct.now()/1e3}function ur(p){var e=Math.floor((Date.now()-ct.now())*.001),t=ct.now()*.001,i=Math.floor(t)+e,o=Math.floor(t%1*1e9);return p&&(i=i-p[0],o=o-p[1],o<0&&(i--,o+=hr)),[i,o]}function ut(){return Zn}function No(p){return[]}var ot,Ct,Tt,Jt,Xr,Jr,Zr,ei,ti,ri,ii,ni,si,oi,ai,li,ui,hi,ci,fi,di,pi,gi,mi,yi,bi,Kt,vi,wi,_i,Ei,Si,xi,Ai,ki,Ii,Ti,Oi,Ci,Ri,Pi,Mi,Ni,Li,Di,ji,Bi,Ui,Fi,Wi,zi,Hi,ct,Kr,hr,qi,$i,Gi,Vi,Ki,Yi,Qi,Xi,Ji,Zi,en,Zn,ll=Ke(()=>{ue(),ce(),he(),ot=[],Ct=!1,Jt=-1,ko.prototype.run=function(){this.fun.apply(null,this.array)},Xr="browser",Jr="x64",Zr="browser",ei={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},ti=["/usr/bin/node"],ri=[],ii="v16.8.0",ni={},si=function(p,e){console.warn((e?e+": ":"")+p)},oi=function(p){Jn("binding")},ai=function(p){return 0},li=function(){return"/"},ui=function(p){},hi={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},ci=!0,fi=We,di=[],pi={},gi=!1,mi={},yi=We,bi=We,Kt=function(){return{}},vi=Kt,wi=Kt,_i=We,Ei=We,Si=We,xi={},Ai={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},ki=We,Ii=We,Ti=We,Oi=We,Ci=We,Ri=We,Pi=We,Mi=void 0,Ni=void 0,Li=void 0,Di=We,ji=2,Bi=1,Ui="/bin/usr/node",Fi=9229,Wi="node",zi=[],Hi=We,ct={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},ct.now===void 0&&(Kr=Date.now(),ct.timing&&ct.timing.navigationStart&&(Kr=ct.timing.navigationStart),ct.now=()=>Date.now()-Kr),hr=1e9,ur.bigint=function(p){var e=ur(p);return typeof BigInt>"u"?e[0]*hr+e[1]:BigInt(e[0]*hr)+BigInt(e[1])},qi=10,$i={},Gi=0,Vi=ut,Ki=ut,Yi=ut,Qi=ut,Xi=ut,Ji=We,Zi=ut,en=ut,Zn={version:ii,versions:ni,arch:Jr,platform:Zr,browser:ci,release:hi,_rawDebug:fi,moduleLoadList:di,binding:oi,_linkedBinding:Io,_events:$i,_eventsCount:Gi,_maxListeners:qi,on:ut,addListener:Vi,once:Ki,off:Yi,removeListener:Qi,removeAllListeners:Xi,emit:Ji,prependListener:Zi,prependOnceListener:en,listeners:No,domain:pi,_exiting:gi,config:mi,dlopen:To,uptime:Mo,_getActiveRequests:Oo,_getActiveHandles:Co,reallyExit:yi,_kill:bi,cpuUsage:Kt,resourceUsage:vi,memoryUsage:wi,kill:_i,exit:Ei,openStdin:Si,allowedNodeEnvironmentFlags:xi,assert:Ro,features:Ai,_fatalExceptions:ki,setUncaughtExceptionCaptureCallback:Ii,hasUncaughtExceptionCaptureCallback:Po,emitWarning:si,nextTick:Ao,_tickCallback:Ti,_debugProcess:Oi,_debugEnd:Ci,_startProfilerIdleNotifier:Ri,_stopProfilerIdleNotifier:Pi,stdout:Mi,stdin:Li,stderr:Ni,abort:Di,umask:ai,chdir:ui,cwd:li,env:ei,title:Xr,argv:ti,execArgv:ri,pid:ji,ppid:Bi,execPath:Ui,debugPort:Fi,hrtime:ur,argv0:Wi,_preload_modules:zi,setSourceMapsEnabled:Hi}}),he=Ke(()=>{ll()});function ul(){if(tn)return jt;tn=!0,jt.byteLength=s,jt.toByteArray=l,jt.fromByteArray=d;for(var p=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,r=i.length;o<r;++o)p[o]=i[o],e[i.charCodeAt(o)]=o;e[45]=62,e[95]=63;function n(y){var f=y.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=y.indexOf("=");m===-1&&(m=f);var b=m===f?0:4-m%4;return[m,b]}function s(y){var f=n(y),m=f[0],b=f[1];return(m+b)*3/4-b}function a(y,f,m){return(f+m)*3/4-m}function l(y){var f,m=n(y),b=m[0],E=m[1],g=new t(a(y,b,E)),_=0,x=E>0?b-4:b,v;for(v=0;v<x;v+=4)f=e[y.charCodeAt(v)]<<18|e[y.charCodeAt(v+1)]<<12|e[y.charCodeAt(v+2)]<<6|e[y.charCodeAt(v+3)],g[_++]=f>>16&255,g[_++]=f>>8&255,g[_++]=f&255;return E===2&&(f=e[y.charCodeAt(v)]<<2|e[y.charCodeAt(v+1)]>>4,g[_++]=f&255),E===1&&(f=e[y.charCodeAt(v)]<<10|e[y.charCodeAt(v+1)]<<4|e[y.charCodeAt(v+2)]>>2,g[_++]=f>>8&255,g[_++]=f&255),g}function u(y){return p[y>>18&63]+p[y>>12&63]+p[y>>6&63]+p[y&63]}function c(y,f,m){for(var b,E=[],g=f;g<m;g+=3)b=(y[g]<<16&16711680)+(y[g+1]<<8&65280)+(y[g+2]&255),E.push(u(b));return E.join("")}function d(y){for(var f,m=y.length,b=m%3,E=[],g=16383,_=0,x=m-b;_<x;_+=g)E.push(c(y,_,_+g>x?x:_+g));return b===1?(f=y[m-1],E.push(p[f>>2]+p[f<<4&63]+"==")):b===2&&(f=(y[m-2]<<8)+y[m-1],E.push(p[f>>10]+p[f>>4&63]+p[f<<2&63]+"=")),E.join("")}return jt}function hl(){return rn?Yt:(rn=!0,Yt.read=function(p,e,t,i,o){var r,n,s=o*8-i-1,a=(1<<s)-1,l=a>>1,u=-7,c=t?o-1:0,d=t?-1:1,y=p[e+c];for(c+=d,r=y&(1<<-u)-1,y>>=-u,u+=s;u>0;r=r*256+p[e+c],c+=d,u-=8);for(n=r&(1<<-u)-1,r>>=-u,u+=i;u>0;n=n*256+p[e+c],c+=d,u-=8);if(r===0)r=1-l;else{if(r===a)return n?NaN:(y?-1:1)*(1/0);n=n+Math.pow(2,i),r=r-l}return(y?-1:1)*n*Math.pow(2,r-i)},Yt.write=function(p,e,t,i,o,r){var n,s,a,l=r*8-o-1,u=(1<<l)-1,c=u>>1,d=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=i?0:r-1,f=i?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,n=u):(n=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-n))<1&&(n--,a*=2),n+c>=1?e+=d/a:e+=d*Math.pow(2,1-c),e*a>=2&&(n++,a/=2),n+c>=u?(s=0,n=u):n+c>=1?(s=(e*a-1)*Math.pow(2,o),n=n+c):(s=e*Math.pow(2,c-1)*Math.pow(2,o),n=0));o>=8;p[t+y]=s&255,y+=f,s/=256,o-=8);for(n=n<<o|s,l+=o;l>0;p[t+y]=n&255,y+=f,n/=256,l-=8);p[t+y-f]|=m*128},Yt)}function cl(){if(nn)return _t;nn=!0;let p=ul(),e=hl(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;_t.Buffer=n,_t.SlowBuffer=E,_t.INSPECT_MAX_BYTES=50;let i=2147483647;_t.kMaxLength=i,n.TYPED_ARRAY_SUPPORT=o(),!n.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{let h=new Uint8Array(1),w={foo:function(){return 42}};return Object.setPrototypeOf(w,Uint8Array.prototype),Object.setPrototypeOf(h,w),h.foo()===42}catch{return!1}}Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}});function r(h){if(h>i)throw new RangeError('The value "'+h+'" is invalid for option "size"');let w=new Uint8Array(h);return Object.setPrototypeOf(w,n.prototype),w}function n(h,w,k){if(typeof h=="number"){if(typeof w=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(h)}return s(h,w,k)}n.poolSize=8192;function s(h,w,k){if(typeof h=="string")return c(h,w);if(ArrayBuffer.isView(h))return y(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(H(h,ArrayBuffer)||h&&H(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(H(h,SharedArrayBuffer)||h&&H(h.buffer,SharedArrayBuffer)))return f(h,w,k);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let j=h.valueOf&&h.valueOf();if(j!=null&&j!==h)return n.from(j,w,k);let J=m(h);if(J)return J;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return n.from(h[Symbol.toPrimitive]("string"),w,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}n.from=function(h,w,k){return s(h,w,k)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array);function a(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function l(h,w,k){return a(h),h<=0?r(h):w!==void 0?typeof k=="string"?r(h).fill(w,k):r(h).fill(w):r(h)}n.alloc=function(h,w,k){return l(h,w,k)};function u(h){return a(h),r(h<0?0:b(h)|0)}n.allocUnsafe=function(h){return u(h)},n.allocUnsafeSlow=function(h){return u(h)};function c(h,w){if((typeof w!="string"||w==="")&&(w="utf8"),!n.isEncoding(w))throw new TypeError("Unknown encoding: "+w);let k=g(h,w)|0,j=r(k),J=j.write(h,w);return J!==k&&(j=j.slice(0,J)),j}function d(h){let w=h.length<0?0:b(h.length)|0,k=r(w);for(let j=0;j<w;j+=1)k[j]=h[j]&255;return k}function y(h){if(H(h,Uint8Array)){let w=new Uint8Array(h);return f(w.buffer,w.byteOffset,w.byteLength)}return d(h)}function f(h,w,k){if(w<0||h.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<w+(k||0))throw new RangeError('"length" is outside of buffer bounds');let j;return w===void 0&&k===void 0?j=new Uint8Array(h):k===void 0?j=new Uint8Array(h,w):j=new Uint8Array(h,w,k),Object.setPrototypeOf(j,n.prototype),j}function m(h){if(n.isBuffer(h)){let w=b(h.length)|0,k=r(w);return k.length===0||h.copy(k,0,0,w),k}if(h.length!==void 0)return typeof h.length!="number"||me(h.length)?r(0):d(h);if(h.type==="Buffer"&&Array.isArray(h.data))return d(h.data)}function b(h){if(h>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return h|0}function E(h){return+h!=h&&(h=0),n.alloc(+h)}n.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==n.prototype},n.compare=function(h,w){if(H(h,Uint8Array)&&(h=n.from(h,h.offset,h.byteLength)),H(w,Uint8Array)&&(w=n.from(w,w.offset,w.byteLength)),!n.isBuffer(h)||!n.isBuffer(w))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===w)return 0;let k=h.length,j=w.length;for(let J=0,fe=Math.min(k,j);J<fe;++J)if(h[J]!==w[J]){k=h[J],j=w[J];break}return k<j?-1:j<k?1:0},n.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(h,w){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return n.alloc(0);let k;if(w===void 0)for(w=0,k=0;k<h.length;++k)w+=h[k].length;let j=n.allocUnsafe(w),J=0;for(k=0;k<h.length;++k){let fe=h[k];if(H(fe,Uint8Array))J+fe.length>j.length?(n.isBuffer(fe)||(fe=n.from(fe)),fe.copy(j,J)):Uint8Array.prototype.set.call(j,fe,J);else if(n.isBuffer(fe))fe.copy(j,J);else throw new TypeError('"list" argument must be an Array of Buffers');J+=fe.length}return j};function g(h,w){if(n.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||H(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);let k=h.length,j=arguments.length>2&&arguments[2]===!0;if(!j&&k===0)return 0;let J=!1;for(;;)switch(w){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return W(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return pe(h).length;default:if(J)return j?-1:W(h).length;w=(""+w).toLowerCase(),J=!0}}n.byteLength=g;function _(h,w,k){let j=!1;if((w===void 0||w<0)&&(w=0),w>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,w>>>=0,k<=w))return"";for(h||(h="utf8");;)switch(h){case"hex":return G(this,w,k);case"utf8":case"utf-8":return z(this,w,k);case"ascii":return le(this,w,k);case"latin1":case"binary":return Y(this,w,k);case"base64":return T(this,w,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,w,k);default:if(j)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),j=!0}}n.prototype._isBuffer=!0;function x(h,w,k){let j=h[w];h[w]=h[k],h[k]=j}n.prototype.swap16=function(){let h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let w=0;w<h;w+=2)x(this,w,w+1);return this},n.prototype.swap32=function(){let h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let w=0;w<h;w+=4)x(this,w,w+3),x(this,w+1,w+2);return this},n.prototype.swap64=function(){let h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let w=0;w<h;w+=8)x(this,w,w+7),x(this,w+1,w+6),x(this,w+2,w+5),x(this,w+3,w+4);return this},n.prototype.toString=function(){let h=this.length;return h===0?"":arguments.length===0?z(this,0,h):_.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(h){if(!n.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:n.compare(this,h)===0},n.prototype.inspect=function(){let h="",w=_t.INSPECT_MAX_BYTES;return h=this.toString("hex",0,w).replace(/(.{2})/g,"$1 ").trim(),this.length>w&&(h+=" ... "),"<Buffer "+h+">"},t&&(n.prototype[t]=n.prototype.inspect),n.prototype.compare=function(h,w,k,j,J){if(H(h,Uint8Array)&&(h=n.from(h,h.offset,h.byteLength)),!n.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(w===void 0&&(w=0),k===void 0&&(k=h?h.length:0),j===void 0&&(j=0),J===void 0&&(J=this.length),w<0||k>h.length||j<0||J>this.length)throw new RangeError("out of range index");if(j>=J&&w>=k)return 0;if(j>=J)return-1;if(w>=k)return 1;if(w>>>=0,k>>>=0,j>>>=0,J>>>=0,this===h)return 0;let fe=J-j,Se=k-w,$=Math.min(fe,Se),ne=this.slice(j,J),ke=h.slice(w,k);for(let Ie=0;Ie<$;++Ie)if(ne[Ie]!==ke[Ie]){fe=ne[Ie],Se=ke[Ie];break}return fe<Se?-1:Se<fe?1:0};function v(h,w,k,j,J){if(h.length===0)return-1;if(typeof k=="string"?(j=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,me(k)&&(k=J?0:h.length-1),k<0&&(k=h.length+k),k>=h.length){if(J)return-1;k=h.length-1}else if(k<0)if(J)k=0;else return-1;if(typeof w=="string"&&(w=n.from(w,j)),n.isBuffer(w))return w.length===0?-1:A(h,w,k,j,J);if(typeof w=="number")return w=w&255,typeof Uint8Array.prototype.indexOf=="function"?J?Uint8Array.prototype.indexOf.call(h,w,k):Uint8Array.prototype.lastIndexOf.call(h,w,k):A(h,[w],k,j,J);throw new TypeError("val must be string, number or Buffer")}function A(h,w,k,j,J){let fe=1,Se=h.length,$=w.length;if(j!==void 0&&(j=String(j).toLowerCase(),j==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(h.length<2||w.length<2)return-1;fe=2,Se/=2,$/=2,k/=2}function ne(Ie,Ce){return fe===1?Ie[Ce]:Ie.readUInt16BE(Ce*fe)}let ke;if(J){let Ie=-1;for(ke=k;ke<Se;ke++)if(ne(h,ke)===ne(w,Ie===-1?0:ke-Ie)){if(Ie===-1&&(Ie=ke),ke-Ie+1===$)return Ie*fe}else Ie!==-1&&(ke-=ke-Ie),Ie=-1}else for(k+$>Se&&(k=Se-$),ke=k;ke>=0;ke--){let Ie=!0;for(let Ce=0;Ce<$;Ce++)if(ne(h,ke+Ce)!==ne(w,Ce)){Ie=!1;break}if(Ie)return ke}return-1}n.prototype.includes=function(h,w,k){return this.indexOf(h,w,k)!==-1},n.prototype.indexOf=function(h,w,k){return v(this,h,w,k,!0)},n.prototype.lastIndexOf=function(h,w,k){return v(this,h,w,k,!1)};function S(h,w,k,j){k=Number(k)||0;let J=h.length-k;j?(j=Number(j),j>J&&(j=J)):j=J;let fe=w.length;j>fe/2&&(j=fe/2);let Se;for(Se=0;Se<j;++Se){let $=parseInt(w.substr(Se*2,2),16);if(me($))return Se;h[k+Se]=$}return Se}function I(h,w,k,j){return ve(W(w,h.length-k),h,k,j)}function P(h,w,k,j){return ve(ee(w),h,k,j)}function C(h,w,k,j){return ve(pe(w),h,k,j)}function B(h,w,k,j){return ve(de(w,h.length-k),h,k,j)}n.prototype.write=function(h,w,k,j){if(w===void 0)j="utf8",k=this.length,w=0;else if(k===void 0&&typeof w=="string")j=w,k=this.length,w=0;else if(isFinite(w))w=w>>>0,isFinite(k)?(k=k>>>0,j===void 0&&(j="utf8")):(j=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let J=this.length-w;if((k===void 0||k>J)&&(k=J),h.length>0&&(k<0||w<0)||w>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");let fe=!1;for(;;)switch(j){case"hex":return S(this,h,w,k);case"utf8":case"utf-8":return I(this,h,w,k);case"ascii":case"latin1":case"binary":return P(this,h,w,k);case"base64":return C(this,h,w,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,h,w,k);default:if(fe)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),fe=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(h,w,k){return w===0&&k===h.length?p.fromByteArray(h):p.fromByteArray(h.slice(w,k))}function z(h,w,k){k=Math.min(h.length,k);let j=[],J=w;for(;J<k;){let fe=h[J],Se=null,$=fe>239?4:fe>223?3:fe>191?2:1;if(J+$<=k){let ne,ke,Ie,Ce;switch($){case 1:fe<128&&(Se=fe);break;case 2:ne=h[J+1],(ne&192)===128&&(Ce=(fe&31)<<6|ne&63,Ce>127&&(Se=Ce));break;case 3:ne=h[J+1],ke=h[J+2],(ne&192)===128&&(ke&192)===128&&(Ce=(fe&15)<<12|(ne&63)<<6|ke&63,Ce>2047&&(Ce<55296||Ce>57343)&&(Se=Ce));break;case 4:ne=h[J+1],ke=h[J+2],Ie=h[J+3],(ne&192)===128&&(ke&192)===128&&(Ie&192)===128&&(Ce=(fe&15)<<18|(ne&63)<<12|(ke&63)<<6|Ie&63,Ce>65535&&Ce<1114112&&(Se=Ce))}}Se===null?(Se=65533,$=1):Se>65535&&(Se-=65536,j.push(Se>>>10&1023|55296),Se=56320|Se&1023),j.push(Se),J+=$}return D(j)}let U=4096;function D(h){let w=h.length;if(w<=U)return String.fromCharCode.apply(String,h);let k="",j=0;for(;j<w;)k+=String.fromCharCode.apply(String,h.slice(j,j+=U));return k}function le(h,w,k){let j="";k=Math.min(h.length,k);for(let J=w;J<k;++J)j+=String.fromCharCode(h[J]&127);return j}function Y(h,w,k){let j="";k=Math.min(h.length,k);for(let J=w;J<k;++J)j+=String.fromCharCode(h[J]);return j}function G(h,w,k){let j=h.length;(!w||w<0)&&(w=0),(!k||k<0||k>j)&&(k=j);let J="";for(let fe=w;fe<k;++fe)J+=we[h[fe]];return J}function re(h,w,k){let j=h.slice(w,k),J="";for(let fe=0;fe<j.length-1;fe+=2)J+=String.fromCharCode(j[fe]+j[fe+1]*256);return J}n.prototype.slice=function(h,w){let k=this.length;h=~~h,w=w===void 0?k:~~w,h<0?(h+=k,h<0&&(h=0)):h>k&&(h=k),w<0?(w+=k,w<0&&(w=0)):w>k&&(w=k),w<h&&(w=h);let j=this.subarray(h,w);return Object.setPrototypeOf(j,n.prototype),j};function F(h,w,k){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+w>k)throw new RangeError("Trying to access beyond buffer length")}n.prototype.readUintLE=n.prototype.readUIntLE=function(h,w,k){h=h>>>0,w=w>>>0,k||F(h,w,this.length);let j=this[h],J=1,fe=0;for(;++fe<w&&(J*=256);)j+=this[h+fe]*J;return j},n.prototype.readUintBE=n.prototype.readUIntBE=function(h,w,k){h=h>>>0,w=w>>>0,k||F(h,w,this.length);let j=this[h+--w],J=1;for(;w>0&&(J*=256);)j+=this[h+--w]*J;return j},n.prototype.readUint8=n.prototype.readUInt8=function(h,w){return h=h>>>0,w||F(h,1,this.length),this[h]},n.prototype.readUint16LE=n.prototype.readUInt16LE=function(h,w){return h=h>>>0,w||F(h,2,this.length),this[h]|this[h+1]<<8},n.prototype.readUint16BE=n.prototype.readUInt16BE=function(h,w){return h=h>>>0,w||F(h,2,this.length),this[h]<<8|this[h+1]},n.prototype.readUint32LE=n.prototype.readUInt32LE=function(h,w){return h=h>>>0,w||F(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},n.prototype.readUint32BE=n.prototype.readUInt32BE=function(h,w){return h=h>>>0,w||F(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},n.prototype.readBigUInt64LE=ae(function(h){h=h>>>0,Q(h,"offset");let w=this[h],k=this[h+7];(w===void 0||k===void 0)&&ye(h,this.length-8);let j=w+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,J=this[++h]+this[++h]*2**8+this[++h]*2**16+k*2**24;return BigInt(j)+(BigInt(J)<<BigInt(32))}),n.prototype.readBigUInt64BE=ae(function(h){h=h>>>0,Q(h,"offset");let w=this[h],k=this[h+7];(w===void 0||k===void 0)&&ye(h,this.length-8);let j=w*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],J=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+k;return(BigInt(j)<<BigInt(32))+BigInt(J)}),n.prototype.readIntLE=function(h,w,k){h=h>>>0,w=w>>>0,k||F(h,w,this.length);let j=this[h],J=1,fe=0;for(;++fe<w&&(J*=256);)j+=this[h+fe]*J;return J*=128,j>=J&&(j-=Math.pow(2,8*w)),j},n.prototype.readIntBE=function(h,w,k){h=h>>>0,w=w>>>0,k||F(h,w,this.length);let j=w,J=1,fe=this[h+--j];for(;j>0&&(J*=256);)fe+=this[h+--j]*J;return J*=128,fe>=J&&(fe-=Math.pow(2,8*w)),fe},n.prototype.readInt8=function(h,w){return h=h>>>0,w||F(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},n.prototype.readInt16LE=function(h,w){h=h>>>0,w||F(h,2,this.length);let k=this[h]|this[h+1]<<8;return k&32768?k|4294901760:k},n.prototype.readInt16BE=function(h,w){h=h>>>0,w||F(h,2,this.length);let k=this[h+1]|this[h]<<8;return k&32768?k|4294901760:k},n.prototype.readInt32LE=function(h,w){return h=h>>>0,w||F(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},n.prototype.readInt32BE=function(h,w){return h=h>>>0,w||F(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},n.prototype.readBigInt64LE=ae(function(h){h=h>>>0,Q(h,"offset");let w=this[h],k=this[h+7];(w===void 0||k===void 0)&&ye(h,this.length-8);let j=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(k<<24);return(BigInt(j)<<BigInt(32))+BigInt(w+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),n.prototype.readBigInt64BE=ae(function(h){h=h>>>0,Q(h,"offset");let w=this[h],k=this[h+7];(w===void 0||k===void 0)&&ye(h,this.length-8);let j=(w<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(j)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+k)}),n.prototype.readFloatLE=function(h,w){return h=h>>>0,w||F(h,4,this.length),e.read(this,h,!0,23,4)},n.prototype.readFloatBE=function(h,w){return h=h>>>0,w||F(h,4,this.length),e.read(this,h,!1,23,4)},n.prototype.readDoubleLE=function(h,w){return h=h>>>0,w||F(h,8,this.length),e.read(this,h,!0,52,8)},n.prototype.readDoubleBE=function(h,w){return h=h>>>0,w||F(h,8,this.length),e.read(this,h,!1,52,8)};function Z(h,w,k,j,J,fe){if(!n.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>J||w<fe)throw new RangeError('"value" argument is out of bounds');if(k+j>h.length)throw new RangeError("Index out of range")}n.prototype.writeUintLE=n.prototype.writeUIntLE=function(h,w,k,j){if(h=+h,w=w>>>0,k=k>>>0,!j){let Se=Math.pow(2,8*k)-1;Z(this,h,w,k,Se,0)}let J=1,fe=0;for(this[w]=h&255;++fe<k&&(J*=256);)this[w+fe]=h/J&255;return w+k},n.prototype.writeUintBE=n.prototype.writeUIntBE=function(h,w,k,j){if(h=+h,w=w>>>0,k=k>>>0,!j){let Se=Math.pow(2,8*k)-1;Z(this,h,w,k,Se,0)}let J=k-1,fe=1;for(this[w+J]=h&255;--J>=0&&(fe*=256);)this[w+J]=h/fe&255;return w+k},n.prototype.writeUint8=n.prototype.writeUInt8=function(h,w,k){return h=+h,w=w>>>0,k||Z(this,h,w,1,255,0),this[w]=h&255,w+1},n.prototype.writeUint16LE=n.prototype.writeUInt16LE=function(h,w,k){return h=+h,w=w>>>0,k||Z(this,h,w,2,65535,0),this[w]=h&255,this[w+1]=h>>>8,w+2},n.prototype.writeUint16BE=n.prototype.writeUInt16BE=function(h,w,k){return h=+h,w=w>>>0,k||Z(this,h,w,2,65535,0),this[w]=h>>>8,this[w+1]=h&255,w+2},n.prototype.writeUint32LE=n.prototype.writeUInt32LE=function(h,w,k){return h=+h,w=w>>>0,k||Z(this,h,w,4,4294967295,0),this[w+3]=h>>>24,this[w+2]=h>>>16,this[w+1]=h>>>8,this[w]=h&255,w+4},n.prototype.writeUint32BE=n.prototype.writeUInt32BE=function(h,w,k){return h=+h,w=w>>>0,k||Z(this,h,w,4,4294967295,0),this[w]=h>>>24,this[w+1]=h>>>16,this[w+2]=h>>>8,this[w+3]=h&255,w+4};function R(h,w,k,j,J){K(w,j,J,h,k,7);let fe=Number(w&BigInt(4294967295));h[k++]=fe,fe=fe>>8,h[k++]=fe,fe=fe>>8,h[k++]=fe,fe=fe>>8,h[k++]=fe;let Se=Number(w>>BigInt(32)&BigInt(4294967295));return h[k++]=Se,Se=Se>>8,h[k++]=Se,Se=Se>>8,h[k++]=Se,Se=Se>>8,h[k++]=Se,k}function X(h,w,k,j,J){K(w,j,J,h,k,7);let fe=Number(w&BigInt(4294967295));h[k+7]=fe,fe=fe>>8,h[k+6]=fe,fe=fe>>8,h[k+5]=fe,fe=fe>>8,h[k+4]=fe;let Se=Number(w>>BigInt(32)&BigInt(4294967295));return h[k+3]=Se,Se=Se>>8,h[k+2]=Se,Se=Se>>8,h[k+1]=Se,Se=Se>>8,h[k]=Se,k+8}n.prototype.writeBigUInt64LE=ae(function(h,w=0){return R(this,h,w,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeBigUInt64BE=ae(function(h,w=0){return X(this,h,w,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeIntLE=function(h,w,k,j){if(h=+h,w=w>>>0,!j){let $=Math.pow(2,8*k-1);Z(this,h,w,k,$-1,-$)}let J=0,fe=1,Se=0;for(this[w]=h&255;++J<k&&(fe*=256);)h<0&&Se===0&&this[w+J-1]!==0&&(Se=1),this[w+J]=(h/fe>>0)-Se&255;return w+k},n.prototype.writeIntBE=function(h,w,k,j){if(h=+h,w=w>>>0,!j){let $=Math.pow(2,8*k-1);Z(this,h,w,k,$-1,-$)}let J=k-1,fe=1,Se=0;for(this[w+J]=h&255;--J>=0&&(fe*=256);)h<0&&Se===0&&this[w+J+1]!==0&&(Se=1),this[w+J]=(h/fe>>0)-Se&255;return w+k},n.prototype.writeInt8=function(h,w,k){return h=+h,w=w>>>0,k||Z(this,h,w,1,127,-128),h<0&&(h=255+h+1),this[w]=h&255,w+1},n.prototype.writeInt16LE=function(h,w,k){return h=+h,w=w>>>0,k||Z(this,h,w,2,32767,-32768),this[w]=h&255,this[w+1]=h>>>8,w+2},n.prototype.writeInt16BE=function(h,w,k){return h=+h,w=w>>>0,k||Z(this,h,w,2,32767,-32768),this[w]=h>>>8,this[w+1]=h&255,w+2},n.prototype.writeInt32LE=function(h,w,k){return h=+h,w=w>>>0,k||Z(this,h,w,4,2147483647,-2147483648),this[w]=h&255,this[w+1]=h>>>8,this[w+2]=h>>>16,this[w+3]=h>>>24,w+4},n.prototype.writeInt32BE=function(h,w,k){return h=+h,w=w>>>0,k||Z(this,h,w,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[w]=h>>>24,this[w+1]=h>>>16,this[w+2]=h>>>8,this[w+3]=h&255,w+4},n.prototype.writeBigInt64LE=ae(function(h,w=0){return R(this,h,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeBigInt64BE=ae(function(h,w=0){return X(this,h,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function be(h,w,k,j,J,fe){if(k+j>h.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function te(h,w,k,j,J){return w=+w,k=k>>>0,J||be(h,w,k,4),e.write(h,w,k,j,23,4),k+4}n.prototype.writeFloatLE=function(h,w,k){return te(this,h,w,!0,k)},n.prototype.writeFloatBE=function(h,w,k){return te(this,h,w,!1,k)};function _e(h,w,k,j,J){return w=+w,k=k>>>0,J||be(h,w,k,8),e.write(h,w,k,j,52,8),k+8}n.prototype.writeDoubleLE=function(h,w,k){return _e(this,h,w,!0,k)},n.prototype.writeDoubleBE=function(h,w,k){return _e(this,h,w,!1,k)},n.prototype.copy=function(h,w,k,j){if(!n.isBuffer(h))throw new TypeError("argument should be a Buffer");if(k||(k=0),!j&&j!==0&&(j=this.length),w>=h.length&&(w=h.length),w||(w=0),j>0&&j<k&&(j=k),j===k||h.length===0||this.length===0)return 0;if(w<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),h.length-w<j-k&&(j=h.length-w+k);let J=j-k;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(w,k,j):Uint8Array.prototype.set.call(h,this.subarray(k,j),w),J},n.prototype.fill=function(h,w,k,j){if(typeof h=="string"){if(typeof w=="string"?(j=w,w=0,k=this.length):typeof k=="string"&&(j=k,k=this.length),j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!n.isEncoding(j))throw new TypeError("Unknown encoding: "+j);if(h.length===1){let fe=h.charCodeAt(0);(j==="utf8"&&fe<128||j==="latin1")&&(h=fe)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(w<0||this.length<w||this.length<k)throw new RangeError("Out of range index");if(k<=w)return this;w=w>>>0,k=k===void 0?this.length:k>>>0,h||(h=0);let J;if(typeof h=="number")for(J=w;J<k;++J)this[J]=h;else{let fe=n.isBuffer(h)?h:n.from(h,j),Se=fe.length;if(Se===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(J=0;J<k-w;++J)this[J+w]=fe[J%Se]}return this};let V={};function L(h,w,k){V[h]=class extends k{constructor(){super(),Object.defineProperty(this,"message",{value:w.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${h}]`,this.stack,delete this.name}get code(){return h}set code(j){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:j,writable:!0})}toString(){return`${this.name} [${h}]: ${this.message}`}}}L("ERR_BUFFER_OUT_OF_BOUNDS",function(h){return h?`${h} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),L("ERR_INVALID_ARG_TYPE",function(h,w){return`The "${h}" argument must be of type number. Received type ${typeof w}`},TypeError),L("ERR_OUT_OF_RANGE",function(h,w,k){let j=`The value of "${h}" is out of range.`,J=k;return Number.isInteger(k)&&Math.abs(k)>2**32?J=ie(String(k)):typeof k=="bigint"&&(J=String(k),(k>BigInt(2)**BigInt(32)||k<-(BigInt(2)**BigInt(32)))&&(J=ie(J)),J+="n"),j+=` It must be ${w}. Received ${J}`,j},RangeError);function ie(h){let w="",k=h.length,j=h[0]==="-"?1:0;for(;k>=j+4;k-=3)w=`_${h.slice(k-3,k)}${w}`;return`${h.slice(0,k)}${w}`}function q(h,w,k){Q(w,"offset"),(h[w]===void 0||h[w+k]===void 0)&&ye(w,h.length-(k+1))}function K(h,w,k,j,J,fe){if(h>k||h<w){let Se=typeof w=="bigint"?"n":"",$;throw w===0||w===BigInt(0)?$=`>= 0${Se} and < 2${Se} ** ${(fe+1)*8}${Se}`:$=`>= -(2${Se} ** ${(fe+1)*8-1}${Se}) and < 2 ** ${(fe+1)*8-1}${Se}`,new V.ERR_OUT_OF_RANGE("value",$,h)}q(j,J,fe)}function Q(h,w){if(typeof h!="number")throw new V.ERR_INVALID_ARG_TYPE(w,"number",h)}function ye(h,w,k){throw Math.floor(h)!==h?(Q(h,k),new V.ERR_OUT_OF_RANGE("offset","an integer",h)):w<0?new V.ERR_BUFFER_OUT_OF_BOUNDS:new V.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${w}`,h)}let oe=/[^+/0-9A-Za-z-_]/g;function M(h){if(h=h.split("=")[0],h=h.trim().replace(oe,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function W(h,w){w=w||1/0;let k,j=h.length,J=null,fe=[];for(let Se=0;Se<j;++Se){if(k=h.charCodeAt(Se),k>55295&&k<57344){if(!J){if(k>56319){(w-=3)>-1&&fe.push(239,191,189);continue}else if(Se+1===j){(w-=3)>-1&&fe.push(239,191,189);continue}J=k;continue}if(k<56320){(w-=3)>-1&&fe.push(239,191,189),J=k;continue}k=(J-55296<<10|k-56320)+65536}else J&&(w-=3)>-1&&fe.push(239,191,189);if(J=null,k<128){if((w-=1)<0)break;fe.push(k)}else if(k<2048){if((w-=2)<0)break;fe.push(k>>6|192,k&63|128)}else if(k<65536){if((w-=3)<0)break;fe.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((w-=4)<0)break;fe.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return fe}function ee(h){let w=[];for(let k=0;k<h.length;++k)w.push(h.charCodeAt(k)&255);return w}function de(h,w){let k,j,J,fe=[];for(let Se=0;Se<h.length&&!((w-=2)<0);++Se)k=h.charCodeAt(Se),j=k>>8,J=k%256,fe.push(J),fe.push(j);return fe}function pe(h){return p.toByteArray(M(h))}function ve(h,w,k,j){let J;for(J=0;J<j&&!(J+k>=w.length||J>=h.length);++J)w[J+k]=h[J];return J}function H(h,w){return h instanceof w||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===w.name}function me(h){return h!==h}let we=(function(){let h="0123456789abcdef",w=new Array(256);for(let k=0;k<16;++k){let j=k*16;for(let J=0;J<16;++J)w[j+J]=h[k]+h[J]}return w})();function ae(h){return typeof BigInt>"u"?Re:h}function Re(){throw new Error("BigInt not supported")}return _t}var jt,tn,Yt,rn,_t,nn,fl=Ke(()=>{ue(),ce(),he(),jt={},tn=!1,Yt={},rn=!1,_t={},nn=!1}),Be={};Ft(Be,{Buffer:()=>Ur,INSPECT_MAX_BYTES:()=>Lo,default:()=>ht,kMaxLength:()=>Do});var ht,Ur,Lo,Do,Ue=Ke(()=>{ue(),ce(),he(),fl(),ht=cl(),ht.Buffer,ht.SlowBuffer,ht.INSPECT_MAX_BYTES,ht.kMaxLength,Ur=ht.Buffer,Lo=ht.INSPECT_MAX_BYTES,Do=ht.kMaxLength}),ce=Ke(()=>{Ue()}),De=ge((p,e)=>{ue(),ce(),he();var t=class extends Error{constructor(i){if(!Array.isArray(i))throw new TypeError(`Expected input to be an Array, got ${typeof i}`);let o="";for(let r=0;r<i.length;r++)o+=`    ${i[r].stack}
`;super(o),this.name="AggregateError",this.errors=i}};e.exports={AggregateError:t,ArrayIsArray(i){return Array.isArray(i)},ArrayPrototypeIncludes(i,o){return i.includes(o)},ArrayPrototypeIndexOf(i,o){return i.indexOf(o)},ArrayPrototypeJoin(i,o){return i.join(o)},ArrayPrototypeMap(i,o){return i.map(o)},ArrayPrototypePop(i,o){return i.pop(o)},ArrayPrototypePush(i,o){return i.push(o)},ArrayPrototypeSlice(i,o,r){return i.slice(o,r)},Error,FunctionPrototypeCall(i,o,...r){return i.call(o,...r)},FunctionPrototypeSymbolHasInstance(i,o){return Function.prototype[Symbol.hasInstance].call(i,o)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(i,o){return Object.defineProperties(i,o)},ObjectDefineProperty(i,o,r){return Object.defineProperty(i,o,r)},ObjectGetOwnPropertyDescriptor(i,o){return Object.getOwnPropertyDescriptor(i,o)},ObjectKeys(i){return Object.keys(i)},ObjectSetPrototypeOf(i,o){return Object.setPrototypeOf(i,o)},Promise,PromisePrototypeCatch(i,o){return i.catch(o)},PromisePrototypeThen(i,o,r){return i.then(o,r)},PromiseReject(i){return Promise.reject(i)},PromiseResolve(i){return Promise.resolve(i)},ReflectApply:Reflect.apply,RegExpPrototypeTest(i,o){return i.test(o)},SafeSet:Set,String,StringPrototypeSlice(i,o,r){return i.slice(o,r)},StringPrototypeToLowerCase(i){return i.toLowerCase()},StringPrototypeToUpperCase(i){return i.toUpperCase()},StringPrototypeTrim(i){return i.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(i,o,r){return i.set(o,r)},Boolean,Uint8Array}}),jo=ge((p,e)=>{ue(),ce(),he(),e.exports={format(t,...i){return t.replace(/%([sdifj])/g,function(...[o,r]){let n=i.shift();return r==="f"?n.toFixed(6):r==="j"?JSON.stringify(n):r==="s"&&typeof n=="object"?`${n.constructor!==Object?n.constructor.name:""} {}`.trim():n.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}}),Ge=ge((p,e)=>{ue(),ce(),he();var{format:t,inspect:i}=jo(),{AggregateError:o}=De(),r=globalThis.AggregateError||o,n=Symbol("kIsNodeError"),s=["string","function","number","object","Function","Object","boolean","bigint","symbol"],a=/^([A-Z][a-z0-9]*)+$/,l="__node_internal_",u={};function c(g,_){if(!g)throw new u.ERR_INTERNAL_ASSERTION(_)}function d(g){let _="",x=g.length,v=g[0]==="-"?1:0;for(;x>=v+4;x-=3)_=`_${g.slice(x-3,x)}${_}`;return`${g.slice(0,x)}${_}`}function y(g,_,x){if(typeof _=="function")return c(_.length<=x.length,`Code: ${g}; The provided arguments length (${x.length}) does not match the required ones (${_.length}).`),_(...x);let v=(_.match(/%[dfijoOs]/g)||[]).length;return c(v===x.length,`Code: ${g}; The provided arguments length (${x.length}) does not match the required ones (${v}).`),x.length===0?_:t(_,...x)}function f(g,_,x){x||(x=Error);class v extends x{constructor(...S){super(y(g,_,S))}toString(){return`${this.name} [${g}]: ${this.message}`}}Object.defineProperties(v.prototype,{name:{value:x.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${g}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),v.prototype.code=g,v.prototype[n]=!0,u[g]=v}function m(g){let _=l+g.name;return Object.defineProperty(g,"name",{value:_}),g}function b(g,_){if(g&&_&&g!==_){if(Array.isArray(_.errors))return _.errors.push(g),_;let x=new r([_,g],_.message);return x.code=_.code,x}return g||_}var E=class extends Error{constructor(g="The operation was aborted",_=void 0){if(_!==void 0&&typeof _!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",_);super(g,_),this.code="ABORT_ERR",this.name="AbortError"}};f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",(g,_,x)=>{c(typeof g=="string","'name' must be a string"),Array.isArray(_)||(_=[_]);let v="The ";g.endsWith(" argument")?v+=`${g} `:v+=`"${g}" ${g.includes(".")?"property":"argument"} `,v+="must be ";let A=[],S=[],I=[];for(let C of _)c(typeof C=="string","All expected entries have to be of type string"),s.includes(C)?A.push(C.toLowerCase()):a.test(C)?S.push(C):(c(C!=="object",'The value "object" should be written as "Object"'),I.push(C));if(S.length>0){let C=A.indexOf("object");C!==-1&&(A.splice(A,C,1),S.push("Object"))}if(A.length>0){switch(A.length){case 1:v+=`of type ${A[0]}`;break;case 2:v+=`one of type ${A[0]} or ${A[1]}`;break;default:{let C=A.pop();v+=`one of type ${A.join(", ")}, or ${C}`}}(S.length>0||I.length>0)&&(v+=" or ")}if(S.length>0){switch(S.length){case 1:v+=`an instance of ${S[0]}`;break;case 2:v+=`an instance of ${S[0]} or ${S[1]}`;break;default:{let C=S.pop();v+=`an instance of ${S.join(", ")}, or ${C}`}}I.length>0&&(v+=" or ")}switch(I.length){case 0:break;case 1:I[0].toLowerCase()!==I[0]&&(v+="an "),v+=`${I[0]}`;break;case 2:v+=`one of ${I[0]} or ${I[1]}`;break;default:{let C=I.pop();v+=`one of ${I.join(", ")}, or ${C}`}}if(x==null)v+=`. Received ${x}`;else if(typeof x=="function"&&x.name)v+=`. Received function ${x.name}`;else if(typeof x=="object"){var P;if((P=x.constructor)!==null&&P!==void 0&&P.name)v+=`. Received an instance of ${x.constructor.name}`;else{let C=i(x,{depth:-1});v+=`. Received ${C}`}}else{let C=i(x,{colors:!1});C.length>25&&(C=`${C.slice(0,25)}...`),v+=`. Received type ${typeof x} (${C})`}return v},TypeError),f("ERR_INVALID_ARG_VALUE",(g,_,x="is invalid")=>{let v=i(_);return v.length>128&&(v=v.slice(0,128)+"..."),`The ${g.includes(".")?"property":"argument"} '${g}' ${x}. Received ${v}`},TypeError),f("ERR_INVALID_RETURN_VALUE",(g,_,x)=>{var v;let A=x!=null&&(v=x.constructor)!==null&&v!==void 0&&v.name?`instance of ${x.constructor.name}`:`type ${typeof x}`;return`Expected ${g} to be returned from the "${_}" function but got ${A}.`},TypeError),f("ERR_MISSING_ARGS",(...g)=>{c(g.length>0,"At least one arg needs to be specified");let _,x=g.length;switch(g=(Array.isArray(g)?g:[g]).map(v=>`"${v}"`).join(" or "),x){case 1:_+=`The ${g[0]} argument`;break;case 2:_+=`The ${g[0]} and ${g[1]} arguments`;break;default:{let v=g.pop();_+=`The ${g.join(", ")}, and ${v} arguments`}break}return`${_} must be specified`},TypeError),f("ERR_OUT_OF_RANGE",(g,_,x)=>{c(_,'Missing "range" argument');let v;if(Number.isInteger(x)&&Math.abs(x)>2**32)v=d(String(x));else if(typeof x=="bigint"){v=String(x);let A=BigInt(2)**BigInt(32);(x>A||x<-A)&&(v=d(v)),v+="n"}else v=i(x);return`The value of "${g}" is out of range. It must be ${_}. Received ${v}`},RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:E,aggregateTwoErrors:m(b),hideStackFrames:m,codes:u}}),rr=ge((p,e)=>{ue(),ce(),he();var{AbortController:t,AbortSignal:i}=typeof self<"u"?self:typeof window<"u"?window:void 0;e.exports=t,e.exports.AbortSignal=i,e.exports.default=t}),xt={};Ft(xt,{EventEmitter:()=>Bo,default:()=>Bt,defaultMaxListeners:()=>Uo,init:()=>Fo,listenerCount:()=>Wo,on:()=>zo,once:()=>Ho});function dl(){if(sn)return Qt;sn=!0;var p=typeof Reflect=="object"?Reflect:null,e=p&&typeof p.apply=="function"?p.apply:function(x,v,A){return Function.prototype.apply.call(x,v,A)},t;p&&typeof p.ownKeys=="function"?t=p.ownKeys:Object.getOwnPropertySymbols?t=function(x){return Object.getOwnPropertyNames(x).concat(Object.getOwnPropertySymbols(x))}:t=function(x){return Object.getOwnPropertyNames(x)};function i(x){console&&console.warn&&console.warn(x)}var o=Number.isNaN||function(x){return x!==x};function r(){r.init.call(this)}Qt=r,Qt.once=E,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var n=10;function s(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(x){if(typeof x!="number"||x<0||o(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");n=x}}),r.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(x){if(typeof x!="number"||x<0||o(x))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+x+".");return this._maxListeners=x,this};function a(x){return x._maxListeners===void 0?r.defaultMaxListeners:x._maxListeners}r.prototype.getMaxListeners=function(){return a(this)},r.prototype.emit=function(x){for(var v=[],A=1;A<arguments.length;A++)v.push(arguments[A]);var S=x==="error",I=this._events;if(I!==void 0)S=S&&I.error===void 0;else if(!S)return!1;if(S){var P;if(v.length>0&&(P=v[0]),P instanceof Error)throw P;var C=new Error("Unhandled error."+(P?" ("+P.message+")":""));throw C.context=P,C}var B=I[x];if(B===void 0)return!1;if(typeof B=="function")e(B,this,v);else for(var T=B.length,z=f(B,T),A=0;A<T;++A)e(z[A],this,v);return!0};function l(x,v,A,S){var I,P,C;if(s(A),P=x._events,P===void 0?(P=x._events=Object.create(null),x._eventsCount=0):(P.newListener!==void 0&&(x.emit("newListener",v,A.listener?A.listener:A),P=x._events),C=P[v]),C===void 0)C=P[v]=A,++x._eventsCount;else if(typeof C=="function"?C=P[v]=S?[A,C]:[C,A]:S?C.unshift(A):C.push(A),I=a(x),I>0&&C.length>I&&!C.warned){C.warned=!0;var B=new Error("Possible EventEmitter memory leak detected. "+C.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");B.name="MaxListenersExceededWarning",B.emitter=x,B.type=v,B.count=C.length,i(B)}return x}r.prototype.addListener=function(x,v){return l(this,x,v,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(x,v){return l(this,x,v,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(x,v,A){var S={fired:!1,wrapFn:void 0,target:x,type:v,listener:A},I=u.bind(S);return I.listener=A,S.wrapFn=I,I}r.prototype.once=function(x,v){return s(v),this.on(x,c(this,x,v)),this},r.prototype.prependOnceListener=function(x,v){return s(v),this.prependListener(x,c(this,x,v)),this},r.prototype.removeListener=function(x,v){var A,S,I,P,C;if(s(v),S=this._events,S===void 0)return this;if(A=S[x],A===void 0)return this;if(A===v||A.listener===v)--this._eventsCount===0?this._events=Object.create(null):(delete S[x],S.removeListener&&this.emit("removeListener",x,A.listener||v));else if(typeof A!="function"){for(I=-1,P=A.length-1;P>=0;P--)if(A[P]===v||A[P].listener===v){C=A[P].listener,I=P;break}if(I<0)return this;I===0?A.shift():m(A,I),A.length===1&&(S[x]=A[0]),S.removeListener!==void 0&&this.emit("removeListener",x,C||v)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(x){var v,A,S;if(A=this._events,A===void 0)return this;if(A.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):A[x]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete A[x]),this;if(arguments.length===0){var I=Object.keys(A),P;for(S=0;S<I.length;++S)P=I[S],P!=="removeListener"&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(v=A[x],typeof v=="function")this.removeListener(x,v);else if(v!==void 0)for(S=v.length-1;S>=0;S--)this.removeListener(x,v[S]);return this};function d(x,v,A){var S=x._events;if(S===void 0)return[];var I=S[v];return I===void 0?[]:typeof I=="function"?A?[I.listener||I]:[I]:A?b(I):f(I,I.length)}r.prototype.listeners=function(x){return d(this,x,!0)},r.prototype.rawListeners=function(x){return d(this,x,!1)},r.listenerCount=function(x,v){return typeof x.listenerCount=="function"?x.listenerCount(v):y.call(x,v)},r.prototype.listenerCount=y;function y(x){var v=this._events;if(v!==void 0){var A=v[x];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}r.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function f(x,v){for(var A=new Array(v),S=0;S<v;++S)A[S]=x[S];return A}function m(x,v){for(;v+1<x.length;v++)x[v]=x[v+1];x.pop()}function b(x){for(var v=new Array(x.length),A=0;A<v.length;++A)v[A]=x[A].listener||x[A];return v}function E(x,v){return new Promise(function(A,S){function I(C){x.removeListener(v,P),S(C)}function P(){typeof x.removeListener=="function"&&x.removeListener("error",I),A([].slice.call(arguments))}_(x,v,P,{once:!0}),v!=="error"&&g(x,I,{once:!0})})}function g(x,v,A){typeof x.on=="function"&&_(x,"error",v,A)}function _(x,v,A,S){if(typeof x.on=="function")S.once?x.once(v,A):x.on(v,A);else if(typeof x.addEventListener=="function")x.addEventListener(v,function I(P){S.once&&x.removeEventListener(v,I),A(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof x)}return Qt}var Qt,sn,Bt,Bo,Uo,Fo,Wo,zo,Ho,Pt=Ke(()=>{ue(),ce(),he(),Qt={},sn=!1,Bt=dl(),Bt.once,Bt.once=function(p,e){return new Promise((t,i)=>{function o(...n){r!==void 0&&p.removeListener("error",r),t(n)}let r;e!=="error"&&(r=n=>{p.removeListener(name,o),i(n)},p.once("error",r)),p.once(e,o)})},Bt.on=function(p,e){let t=[],i=[],o=null,r=!1,n={async next(){let l=t.shift();if(l)return createIterResult(l,!1);if(o){let u=Promise.reject(o);return o=null,u}return r?createIterResult(void 0,!0):new Promise((u,c)=>i.push({resolve:u,reject:c}))},async return(){p.removeListener(e,s),p.removeListener("error",a),r=!0;for(let l of i)l.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(l){o=l,p.removeListener(e,s),p.removeListener("error",a)},[Symbol.asyncIterator](){return this}};return p.on(e,s),p.on("error",a),n;function s(...l){let u=i.shift();u?u.resolve(createIterResult(l,!1)):t.push(l)}function a(l){r=!0;let u=i.shift();u?u.reject(l):o=l,n.return()}},{EventEmitter:Bo,defaultMaxListeners:Uo,init:Fo,listenerCount:Wo,on:zo,once:Ho}=Bt}),Ve=ge((p,e)=>{ue(),ce(),he();var t=(Ue(),Me(Be)),{format:i,inspect:o}=jo(),{codes:{ERR_INVALID_ARG_TYPE:r}}=Ge(),{kResistStopPropagation:n,AggregateError:s,SymbolDispose:a}=De(),l=globalThis.AbortSignal||rr().AbortSignal,u=globalThis.AbortController||rr().AbortController,c=Object.getPrototypeOf(async function(){}).constructor,d=globalThis.Blob||t.Blob,y=typeof d<"u"?function(b){return b instanceof d}:function(b){return!1},f=(b,E)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new r(E,"AbortSignal",b)},m=(b,E)=>{if(typeof b!="function")throw new r(E,"Function",b)};e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(b){let E=!1;return function(...g){E||(E=!0,b.apply(this,g))}},createDeferredPromise:function(){let b,E;return{promise:new Promise((g,_)=>{b=g,E=_}),resolve:b,reject:E}},promisify(b){return new Promise((E,g)=>{b((_,...x)=>_?g(_):E(...x))})},debuglog(){return function(){}},format:i,inspect:o,types:{isAsyncFunction(b){return b instanceof c},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:y,deprecate(b,E){return b},addAbortListener:(Pt(),Me(xt)).addAbortListener||function(b,E){if(b===void 0)throw new r("signal","AbortSignal",b);f(b,"signal"),m(E,"listener");let g;return b.aborted?queueMicrotask(()=>E()):(b.addEventListener("abort",E,{__proto__:null,once:!0,[n]:!0}),g=()=>{b.removeEventListener("abort",E)}),{__proto__:null,[a](){var _;(_=g)===null||_===void 0||_()}}},AbortSignalAny:l.any||function(b){if(b.length===1)return b[0];let E=new u,g=()=>E.abort();return b.forEach(_=>{f(_,"signals"),_.addEventListener("abort",g,{once:!0})}),E.signal.addEventListener("abort",()=>{b.forEach(_=>_.removeEventListener("abort",g))},{once:!0}),E.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),ir=ge((p,e)=>{ue(),ce(),he();var{ArrayIsArray:t,ArrayPrototypeIncludes:i,ArrayPrototypeJoin:o,ArrayPrototypeMap:r,NumberIsInteger:n,NumberIsNaN:s,NumberMAX_SAFE_INTEGER:a,NumberMIN_SAFE_INTEGER:l,NumberParseInt:u,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:d,String:y,StringPrototypeToUpperCase:f,StringPrototypeTrim:m}=De(),{hideStackFrames:b,codes:{ERR_SOCKET_BAD_PORT:E,ERR_INVALID_ARG_TYPE:g,ERR_INVALID_ARG_VALUE:_,ERR_OUT_OF_RANGE:x,ERR_UNKNOWN_SIGNAL:v}}=Ge(),{normalizeEncoding:A}=Ve(),{isAsyncFunction:S,isArrayBufferView:I}=Ve().types,P={};function C(H){return H===(H|0)}function B(H){return H===H>>>0}var T=/^[0-7]+$/,z="must be a 32-bit unsigned integer or an octal string";function U(H,me,we){if(typeof H>"u"&&(H=we),typeof H=="string"){if(d(T,H)===null)throw new _(me,H,z);H=u(H,8)}return Y(H,me),H}var D=b((H,me,we=l,ae=a)=>{if(typeof H!="number")throw new g(me,"number",H);if(!n(H))throw new x(me,"an integer",H);if(H<we||H>ae)throw new x(me,`>= ${we} && <= ${ae}`,H)}),le=b((H,me,we=-2147483648,ae=2147483647)=>{if(typeof H!="number")throw new g(me,"number",H);if(!n(H))throw new x(me,"an integer",H);if(H<we||H>ae)throw new x(me,`>= ${we} && <= ${ae}`,H)}),Y=b((H,me,we=!1)=>{if(typeof H!="number")throw new g(me,"number",H);if(!n(H))throw new x(me,"an integer",H);let ae=we?1:0,Re=4294967295;if(H<ae||H>Re)throw new x(me,`>= ${ae} && <= ${Re}`,H)});function G(H,me){if(typeof H!="string")throw new g(me,"string",H)}function re(H,me,we=void 0,ae){if(typeof H!="number")throw new g(me,"number",H);if(we!=null&&H<we||ae!=null&&H>ae||(we!=null||ae!=null)&&s(H))throw new x(me,`${we!=null?`>= ${we}`:""}${we!=null&&ae!=null?" && ":""}${ae!=null?`<= ${ae}`:""}`,H)}var F=b((H,me,we)=>{if(!i(we,H)){let ae="must be one of: "+o(r(we,Re=>typeof Re=="string"?`'${Re}'`:y(Re)),", ");throw new _(me,H,ae)}});function Z(H,me){if(typeof H!="boolean")throw new g(me,"boolean",H)}function R(H,me,we){return H==null||!c(H,me)?we:H[me]}var X=b((H,me,we=null)=>{let ae=R(we,"allowArray",!1),Re=R(we,"allowFunction",!1);if(!R(we,"nullable",!1)&&H===null||!ae&&t(H)||typeof H!="object"&&(!Re||typeof H!="function"))throw new g(me,"Object",H)}),be=b((H,me)=>{if(H!=null&&typeof H!="object"&&typeof H!="function")throw new g(me,"a dictionary",H)}),te=b((H,me,we=0)=>{if(!t(H))throw new g(me,"Array",H);if(H.length<we){let ae=`must be longer than ${we}`;throw new _(me,H,ae)}});function _e(H,me){te(H,me);for(let we=0;we<H.length;we++)G(H[we],`${me}[${we}]`)}function V(H,me){te(H,me);for(let we=0;we<H.length;we++)Z(H[we],`${me}[${we}]`)}function L(H,me){te(H,me);for(let we=0;we<H.length;we++){let ae=H[we],Re=`${me}[${we}]`;if(ae==null)throw new g(Re,"AbortSignal",ae);ye(ae,Re)}}function ie(H,me="signal"){if(G(H,me),P[H]===void 0)throw P[f(H)]!==void 0?new v(H+" (signals must use all capital letters)"):new v(H)}var q=b((H,me="buffer")=>{if(!I(H))throw new g(me,["Buffer","TypedArray","DataView"],H)});function K(H,me){let we=A(me),ae=H.length;if(we==="hex"&&ae%2!==0)throw new _("encoding",me,`is invalid for data of length ${ae}`)}function Q(H,me="Port",we=!0){if(typeof H!="number"&&typeof H!="string"||typeof H=="string"&&m(H).length===0||+H!==+H>>>0||H>65535||H===0&&!we)throw new E(me,H,we);return H|0}var ye=b((H,me)=>{if(H!==void 0&&(H===null||typeof H!="object"||!("aborted"in H)))throw new g(me,"AbortSignal",H)}),oe=b((H,me)=>{if(typeof H!="function")throw new g(me,"Function",H)}),M=b((H,me)=>{if(typeof H!="function"||S(H))throw new g(me,"Function",H)}),W=b((H,me)=>{if(H!==void 0)throw new g(me,"undefined",H)});function ee(H,me,we){if(!i(we,H))throw new g(me,`('${o(we,"|")}')`,H)}var de=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function pe(H,me){if(typeof H>"u"||!d(de,H))throw new _(me,H,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ve(H){if(typeof H=="string")return pe(H,"hints"),H;if(t(H)){let me=H.length,we="";if(me===0)return we;for(let ae=0;ae<me;ae++){let Re=H[ae];pe(Re,"hints"),we+=Re,ae!==me-1&&(we+=", ")}return we}throw new _("hints",H,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:C,isUint32:B,parseFileMode:U,validateArray:te,validateStringArray:_e,validateBooleanArray:V,validateAbortSignalArray:L,validateBoolean:Z,validateBuffer:q,validateDictionary:be,validateEncoding:K,validateFunction:oe,validateInt32:le,validateInteger:D,validateNumber:re,validateObject:X,validateOneOf:F,validatePlainFunction:M,validatePort:Q,validateSignalName:ie,validateString:G,validateUint32:Y,validateUndefined:W,validateUnion:ee,validateAbortSignal:ye,validateLinkHeaderValue:ve}}),Mt=ge((p,e)=>{ue(),ce(),he();var t=e.exports={},i,o;function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?i=setTimeout:i=r}catch{i=r}try{typeof clearTimeout=="function"?o=clearTimeout:o=n}catch{o=n}})();function s(E){if(i===setTimeout)return setTimeout(E,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(E,0);try{return i(E,0)}catch{try{return i.call(null,E,0)}catch{return i.call(this,E,0)}}}function a(E){if(o===clearTimeout)return clearTimeout(E);if((o===n||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(E);try{return o(E)}catch{try{return o.call(null,E)}catch{return o.call(this,E)}}}var l=[],u=!1,c,d=-1;function y(){!u||!c||(u=!1,c.length?l=c.concat(l):d=-1,l.length&&f())}function f(){if(!u){var E=s(y);u=!0;for(var g=l.length;g;){for(c=l,l=[];++d<g;)c&&c[d].run();d=-1,g=l.length}c=null,u=!1,a(E)}}t.nextTick=function(E){var g=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)g[_-1]=arguments[_];l.push(new m(E,g)),l.length===1&&!u&&s(f)};function m(E,g){this.fun=E,this.array=g}m.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function b(){}t.on=b,t.addListener=b,t.once=b,t.off=b,t.removeListener=b,t.removeAllListeners=b,t.emit=b,t.prependListener=b,t.prependOnceListener=b,t.listeners=function(E){return[]},t.binding=function(E){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(E){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}),mt=ge((p,e)=>{ue(),ce(),he();var{SymbolAsyncIterator:t,SymbolIterator:i,SymbolFor:o}=De(),r=o("nodejs.stream.destroyed"),n=o("nodejs.stream.errored"),s=o("nodejs.stream.readable"),a=o("nodejs.stream.writable"),l=o("nodejs.stream.disturbed"),u=o("nodejs.webstream.isClosedPromise"),c=o("nodejs.webstream.controllerErrorFunction");function d(R,X=!1){var be;return!!(R&&typeof R.pipe=="function"&&typeof R.on=="function"&&(!X||typeof R.pause=="function"&&typeof R.resume=="function")&&(!R._writableState||((be=R._readableState)===null||be===void 0?void 0:be.readable)!==!1)&&(!R._writableState||R._readableState))}function y(R){var X;return!!(R&&typeof R.write=="function"&&typeof R.on=="function"&&(!R._readableState||((X=R._writableState)===null||X===void 0?void 0:X.writable)!==!1))}function f(R){return!!(R&&typeof R.pipe=="function"&&R._readableState&&typeof R.on=="function"&&typeof R.write=="function")}function m(R){return R&&(R._readableState||R._writableState||typeof R.write=="function"&&typeof R.on=="function"||typeof R.pipe=="function"&&typeof R.on=="function")}function b(R){return!!(R&&!m(R)&&typeof R.pipeThrough=="function"&&typeof R.getReader=="function"&&typeof R.cancel=="function")}function E(R){return!!(R&&!m(R)&&typeof R.getWriter=="function"&&typeof R.abort=="function")}function g(R){return!!(R&&!m(R)&&typeof R.readable=="object"&&typeof R.writable=="object")}function _(R){return b(R)||E(R)||g(R)}function x(R,X){return R==null?!1:X===!0?typeof R[t]=="function":X===!1?typeof R[i]=="function":typeof R[t]=="function"||typeof R[i]=="function"}function v(R){if(!m(R))return null;let X=R._writableState,be=R._readableState,te=X||be;return!!(R.destroyed||R[r]||te!=null&&te.destroyed)}function A(R){if(!y(R))return null;if(R.writableEnded===!0)return!0;let X=R._writableState;return X!=null&&X.errored?!1:typeof X?.ended!="boolean"?null:X.ended}function S(R,X){if(!y(R))return null;if(R.writableFinished===!0)return!0;let be=R._writableState;return be!=null&&be.errored?!1:typeof be?.finished!="boolean"?null:!!(be.finished||X===!1&&be.ended===!0&&be.length===0)}function I(R){if(!d(R))return null;if(R.readableEnded===!0)return!0;let X=R._readableState;return!X||X.errored?!1:typeof X?.ended!="boolean"?null:X.ended}function P(R,X){if(!d(R))return null;let be=R._readableState;return be!=null&&be.errored?!1:typeof be?.endEmitted!="boolean"?null:!!(be.endEmitted||X===!1&&be.ended===!0&&be.length===0)}function C(R){return R&&R[s]!=null?R[s]:typeof R?.readable!="boolean"?null:v(R)?!1:d(R)&&R.readable&&!P(R)}function B(R){return R&&R[a]!=null?R[a]:typeof R?.writable!="boolean"?null:v(R)?!1:y(R)&&R.writable&&!A(R)}function T(R,X){return m(R)?v(R)?!0:!(X?.readable!==!1&&C(R)||X?.writable!==!1&&B(R)):null}function z(R){var X,be;return m(R)?R.writableErrored?R.writableErrored:(X=(be=R._writableState)===null||be===void 0?void 0:be.errored)!==null&&X!==void 0?X:null:null}function U(R){var X,be;return m(R)?R.readableErrored?R.readableErrored:(X=(be=R._readableState)===null||be===void 0?void 0:be.errored)!==null&&X!==void 0?X:null:null}function D(R){if(!m(R))return null;if(typeof R.closed=="boolean")return R.closed;let X=R._writableState,be=R._readableState;return typeof X?.closed=="boolean"||typeof be?.closed=="boolean"?X?.closed||be?.closed:typeof R._closed=="boolean"&&le(R)?R._closed:null}function le(R){return typeof R._closed=="boolean"&&typeof R._defaultKeepAlive=="boolean"&&typeof R._removedConnection=="boolean"&&typeof R._removedContLen=="boolean"}function Y(R){return typeof R._sent100=="boolean"&&le(R)}function G(R){var X;return typeof R._consuming=="boolean"&&typeof R._dumped=="boolean"&&((X=R.req)===null||X===void 0?void 0:X.upgradeOrConnect)===void 0}function re(R){if(!m(R))return null;let X=R._writableState,be=R._readableState,te=X||be;return!te&&Y(R)||!!(te&&te.autoDestroy&&te.emitClose&&te.closed===!1)}function F(R){var X;return!!(R&&((X=R[l])!==null&&X!==void 0?X:R.readableDidRead||R.readableAborted))}function Z(R){var X,be,te,_e,V,L,ie,q,K,Q;return!!(R&&((X=(be=(te=(_e=(V=(L=R[n])!==null&&L!==void 0?L:R.readableErrored)!==null&&V!==void 0?V:R.writableErrored)!==null&&_e!==void 0?_e:(ie=R._readableState)===null||ie===void 0?void 0:ie.errorEmitted)!==null&&te!==void 0?te:(q=R._writableState)===null||q===void 0?void 0:q.errorEmitted)!==null&&be!==void 0?be:(K=R._readableState)===null||K===void 0?void 0:K.errored)!==null&&X!==void 0?X:!((Q=R._writableState)===null||Q===void 0)&&Q.errored))}e.exports={isDestroyed:v,kIsDestroyed:r,isDisturbed:F,kIsDisturbed:l,isErrored:Z,kIsErrored:n,isReadable:C,kIsReadable:s,kIsClosedPromise:u,kControllerErrorFunction:c,kIsWritable:a,isClosed:D,isDuplexNodeStream:f,isFinished:T,isIterable:x,isReadableNodeStream:d,isReadableStream:b,isReadableEnded:I,isReadableFinished:P,isReadableErrored:U,isNodeStream:m,isWebStream:_,isWritable:B,isWritableNodeStream:y,isWritableStream:E,isWritableEnded:A,isWritableFinished:S,isWritableErrored:z,isServerRequest:G,isServerResponse:Y,willEmitClose:re,isTransformStream:g}}),At=ge((p,e)=>{ue(),ce(),he();var t=Mt(),{AbortError:i,codes:o}=Ge(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:n}=o,{kEmptyObject:s,once:a}=Ve(),{validateAbortSignal:l,validateFunction:u,validateObject:c,validateBoolean:d}=ir(),{Promise:y,PromisePrototypeThen:f,SymbolDispose:m}=De(),{isClosed:b,isReadable:E,isReadableNodeStream:g,isReadableStream:_,isReadableFinished:x,isReadableErrored:v,isWritable:A,isWritableNodeStream:S,isWritableStream:I,isWritableFinished:P,isWritableErrored:C,isNodeStream:B,willEmitClose:T,kIsClosedPromise:z}=mt(),U;function D(F){return F.setHeader&&typeof F.abort=="function"}var le=()=>{};function Y(F,Z,R){var X,be;if(arguments.length===2?(R=Z,Z=s):Z==null?Z=s:c(Z,"options"),u(R,"callback"),l(Z.signal,"options.signal"),R=a(R),_(F)||I(F))return G(F,Z,R);if(!B(F))throw new r("stream",["ReadableStream","WritableStream","Stream"],F);let te=(X=Z.readable)!==null&&X!==void 0?X:g(F),_e=(be=Z.writable)!==null&&be!==void 0?be:S(F),V=F._writableState,L=F._readableState,ie=()=>{F.writable||Q()},q=T(F)&&g(F)===te&&S(F)===_e,K=P(F,!1),Q=()=>{K=!0,F.destroyed&&(q=!1),!(q&&(!F.readable||te))&&(!te||ye)&&R.call(F)},ye=x(F,!1),oe=()=>{ye=!0,F.destroyed&&(q=!1),!(q&&(!F.writable||_e))&&(!_e||K)&&R.call(F)},M=H=>{R.call(F,H)},W=b(F),ee=()=>{W=!0;let H=C(F)||v(F);if(H&&typeof H!="boolean")return R.call(F,H);if(te&&!ye&&g(F,!0)&&!x(F,!1))return R.call(F,new n);if(_e&&!K&&!P(F,!1))return R.call(F,new n);R.call(F)},de=()=>{W=!0;let H=C(F)||v(F);if(H&&typeof H!="boolean")return R.call(F,H);R.call(F)},pe=()=>{F.req.on("finish",Q)};D(F)?(F.on("complete",Q),q||F.on("abort",ee),F.req?pe():F.on("request",pe)):_e&&!V&&(F.on("end",ie),F.on("close",ie)),!q&&typeof F.aborted=="boolean"&&F.on("aborted",ee),F.on("end",oe),F.on("finish",Q),Z.error!==!1&&F.on("error",M),F.on("close",ee),W?t.nextTick(ee):V!=null&&V.errorEmitted||L!=null&&L.errorEmitted?q||t.nextTick(de):(!te&&(!q||E(F))&&(K||A(F)===!1)||!_e&&(!q||A(F))&&(ye||E(F)===!1)||L&&F.req&&F.aborted)&&t.nextTick(de);let ve=()=>{R=le,F.removeListener("aborted",ee),F.removeListener("complete",Q),F.removeListener("abort",ee),F.removeListener("request",pe),F.req&&F.req.removeListener("finish",Q),F.removeListener("end",ie),F.removeListener("close",ie),F.removeListener("finish",Q),F.removeListener("end",oe),F.removeListener("error",M),F.removeListener("close",ee)};if(Z.signal&&!W){let H=()=>{let me=R;ve(),me.call(F,new i(void 0,{cause:Z.signal.reason}))};if(Z.signal.aborted)t.nextTick(H);else{U=U||Ve().addAbortListener;let me=U(Z.signal,H),we=R;R=a((...ae)=>{me[m](),we.apply(F,ae)})}}return ve}function G(F,Z,R){let X=!1,be=le;if(Z.signal)if(be=()=>{X=!0,R.call(F,new i(void 0,{cause:Z.signal.reason}))},Z.signal.aborted)t.nextTick(be);else{U=U||Ve().addAbortListener;let _e=U(Z.signal,be),V=R;R=a((...L)=>{_e[m](),V.apply(F,L)})}let te=(..._e)=>{X||t.nextTick(()=>R.apply(F,_e))};return f(F[z].promise,te,te),le}function re(F,Z){var R;let X=!1;return Z===null&&(Z=s),(R=Z)!==null&&R!==void 0&&R.cleanup&&(d(Z.cleanup,"cleanup"),X=Z.cleanup),new y((be,te)=>{let _e=Y(F,Z,V=>{X&&_e(),V?te(V):be()})})}e.exports=Y,e.exports.finished=re}),Wt=ge((p,e)=>{ue(),ce(),he();var t=Mt(),{aggregateTwoErrors:i,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:r}=Ge(),{Symbol:n}=De(),{kIsDestroyed:s,isDestroyed:a,isFinished:l,isServerRequest:u}=mt(),c=n("kDestroy"),d=n("kConstruct");function y(T,z,U){T&&(T.stack,z&&!z.errored&&(z.errored=T),U&&!U.errored&&(U.errored=T))}function f(T,z){let U=this._readableState,D=this._writableState,le=D||U;return D!=null&&D.destroyed||U!=null&&U.destroyed?(typeof z=="function"&&z(),this):(y(T,D,U),D&&(D.destroyed=!0),U&&(U.destroyed=!0),le.constructed?m(this,T,z):this.once(c,function(Y){m(this,i(Y,T),z)}),this)}function m(T,z,U){let D=!1;function le(Y){if(D)return;D=!0;let G=T._readableState,re=T._writableState;y(Y,re,G),re&&(re.closed=!0),G&&(G.closed=!0),typeof U=="function"&&U(Y),Y?t.nextTick(b,T,Y):t.nextTick(E,T)}try{T._destroy(z||null,le)}catch(Y){le(Y)}}function b(T,z){g(T,z),E(T)}function E(T){let z=T._readableState,U=T._writableState;U&&(U.closeEmitted=!0),z&&(z.closeEmitted=!0),(U!=null&&U.emitClose||z!=null&&z.emitClose)&&T.emit("close")}function g(T,z){let U=T._readableState,D=T._writableState;D!=null&&D.errorEmitted||U!=null&&U.errorEmitted||(D&&(D.errorEmitted=!0),U&&(U.errorEmitted=!0),T.emit("error",z))}function _(){let T=this._readableState,z=this._writableState;T&&(T.constructed=!0,T.closed=!1,T.closeEmitted=!1,T.destroyed=!1,T.errored=null,T.errorEmitted=!1,T.reading=!1,T.ended=T.readable===!1,T.endEmitted=T.readable===!1),z&&(z.constructed=!0,z.destroyed=!1,z.closed=!1,z.closeEmitted=!1,z.errored=null,z.errorEmitted=!1,z.finalCalled=!1,z.prefinished=!1,z.ended=z.writable===!1,z.ending=z.writable===!1,z.finished=z.writable===!1)}function x(T,z,U){let D=T._readableState,le=T._writableState;if(le!=null&&le.destroyed||D!=null&&D.destroyed)return this;D!=null&&D.autoDestroy||le!=null&&le.autoDestroy?T.destroy(z):z&&(z.stack,le&&!le.errored&&(le.errored=z),D&&!D.errored&&(D.errored=z),U?t.nextTick(g,T,z):g(T,z))}function v(T,z){if(typeof T._construct!="function")return;let U=T._readableState,D=T._writableState;U&&(U.constructed=!1),D&&(D.constructed=!1),T.once(d,z),!(T.listenerCount(d)>1)&&t.nextTick(A,T)}function A(T){let z=!1;function U(D){if(z){x(T,D??new o);return}z=!0;let le=T._readableState,Y=T._writableState,G=Y||le;le&&(le.constructed=!0),Y&&(Y.constructed=!0),G.destroyed?T.emit(c,D):D?x(T,D,!0):t.nextTick(S,T)}try{T._construct(D=>{t.nextTick(U,D)})}catch(D){t.nextTick(U,D)}}function S(T){T.emit(d)}function I(T){return T?.setHeader&&typeof T.abort=="function"}function P(T){T.emit("close")}function C(T,z){T.emit("error",z),t.nextTick(P,T)}function B(T,z){!T||a(T)||(!z&&!l(T)&&(z=new r),u(T)?(T.socket=null,T.destroy(z)):I(T)?T.abort():I(T.req)?T.req.abort():typeof T.destroy=="function"?T.destroy(z):typeof T.close=="function"?T.close():z?t.nextTick(C,T,z):t.nextTick(P,T),T.destroyed||(T[s]=!0))}e.exports={construct:v,destroyer:B,destroy:f,undestroy:_,errorOrDestroy:x}}),es=ge((p,e)=>{ue(),ce(),he();var{ArrayIsArray:t,ObjectSetPrototypeOf:i}=De(),{EventEmitter:o}=(Pt(),Me(xt));function r(s){o.call(this,s)}i(r.prototype,o.prototype),i(r,o),r.prototype.pipe=function(s,a){let l=this;function u(E){s.writable&&s.write(E)===!1&&l.pause&&l.pause()}l.on("data",u);function c(){l.readable&&l.resume&&l.resume()}s.on("drain",c),!s._isStdio&&(!a||a.end!==!1)&&(l.on("end",y),l.on("close",f));let d=!1;function y(){d||(d=!0,s.end())}function f(){d||(d=!0,typeof s.destroy=="function"&&s.destroy())}function m(E){b(),o.listenerCount(this,"error")===0&&this.emit("error",E)}n(l,"error",m),n(s,"error",m);function b(){l.removeListener("data",u),s.removeListener("drain",c),l.removeListener("end",y),l.removeListener("close",f),l.removeListener("error",m),s.removeListener("error",m),l.removeListener("end",b),l.removeListener("close",b),s.removeListener("close",b)}return l.on("end",b),l.on("close",b),s.on("close",b),s.emit("pipe",l),s};function n(s,a,l){if(typeof s.prependListener=="function")return s.prependListener(a,l);!s._events||!s._events[a]?s.on(a,l):t(s._events[a])?s._events[a].unshift(l):s._events[a]=[l,s._events[a]]}e.exports={Stream:r,prependListener:n}}),zr=ge((p,e)=>{ue(),ce(),he();var{SymbolDispose:t}=De(),{AbortError:i,codes:o}=Ge(),{isNodeStream:r,isWebStream:n,kControllerErrorFunction:s}=mt(),a=At(),{ERR_INVALID_ARG_TYPE:l}=o,u,c=(d,y)=>{if(typeof d!="object"||!("aborted"in d))throw new l(y,"AbortSignal",d)};e.exports.addAbortSignal=function(d,y){if(c(d,"signal"),!r(y)&&!n(y))throw new l("stream",["ReadableStream","WritableStream","Stream"],y);return e.exports.addAbortSignalNoValidate(d,y)},e.exports.addAbortSignalNoValidate=function(d,y){if(typeof d!="object"||!("aborted"in d))return y;let f=r(y)?()=>{y.destroy(new i(void 0,{cause:d.reason}))}:()=>{y[s](new i(void 0,{cause:d.reason}))};if(d.aborted)f();else{u=u||Ve().addAbortListener;let m=u(d,f);a(y,m[t])}return y}}),pl=ge((p,e)=>{ue(),ce(),he();var{StringPrototypeSlice:t,SymbolIterator:i,TypedArrayPrototypeSet:o,Uint8Array:r}=De(),{Buffer:n}=(Ue(),Me(Be)),{inspect:s}=Ve();e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(a){let l={data:a,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(a){let l={data:a,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;let a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}clear(){this.head=this.tail=null,this.length=0}join(a){if(this.length===0)return"";let l=this.head,u=""+l.data;for(;(l=l.next)!==null;)u+=a+l.data;return u}concat(a){if(this.length===0)return n.alloc(0);let l=n.allocUnsafe(a>>>0),u=this.head,c=0;for(;u;)o(l,u.data,c),c+=u.data.length,u=u.next;return l}consume(a,l){let u=this.head.data;if(a<u.length){let c=u.slice(0,a);return this.head.data=u.slice(a),c}return a===u.length?this.shift():l?this._getString(a):this._getBuffer(a)}first(){return this.head.data}*[i](){for(let a=this.head;a;a=a.next)yield a.data}_getString(a){let l="",u=this.head,c=0;do{let d=u.data;if(a>d.length)l+=d,a-=d.length;else{a===d.length?(l+=d,++c,u.next?this.head=u.next:this.head=this.tail=null):(l+=t(d,0,a),this.head=u,u.data=t(d,a));break}++c}while((u=u.next)!==null);return this.length-=c,l}_getBuffer(a){let l=n.allocUnsafe(a),u=a,c=this.head,d=0;do{let y=c.data;if(a>y.length)o(l,y,u-a),a-=y.length;else{a===y.length?(o(l,y,u-a),++d,c.next?this.head=c.next:this.head=this.tail=null):(o(l,new r(y.buffer,y.byteOffset,a),u-a),this.head=c,c.data=y.slice(a));break}++d}while((c=c.next)!==null);return this.length-=d,l}[Symbol.for("nodejs.util.inspect.custom")](a,l){return s(this,{...l,depth:0,customInspect:!1})}}}),Hr=ge((p,e)=>{ue(),ce(),he();var{MathFloor:t,NumberIsInteger:i}=De(),{validateInteger:o}=ir(),{ERR_INVALID_ARG_VALUE:r}=Ge().codes,n=16*1024,s=16;function a(d,y,f){return d.highWaterMark!=null?d.highWaterMark:y?d[f]:null}function l(d){return d?s:n}function u(d,y){o(y,"value",0),d?s=y:n=y}function c(d,y,f,m){let b=a(y,m,f);if(b!=null){if(!i(b)||b<0){let E=m?`options.${f}`:"options.highWaterMark";throw new r(E,b)}return t(b)}return l(d.objectMode)}e.exports={getHighWaterMark:c,getDefaultHighWaterMark:l,setDefaultHighWaterMark:u}}),gl=ge((p,e)=>{ue(),ce(),he();var t=(Ue(),Me(Be)),i=t.Buffer;function o(n,s){for(var a in n)s[a]=n[a]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=t:(o(t,p),p.Buffer=r);function r(n,s,a){return i(n,s,a)}r.prototype=Object.create(i.prototype),o(i,r),r.from=function(n,s,a){if(typeof n=="number")throw new TypeError("Argument must not be a number");return i(n,s,a)},r.alloc=function(n,s,a){if(typeof n!="number")throw new TypeError("Argument must be a number");var l=i(n);return s!==void 0?typeof a=="string"?l.fill(s,a):l.fill(s):l.fill(0),l},r.allocUnsafe=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return i(n)},r.allocUnsafeSlow=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(n)}}),ml=ge(p=>{ue(),ce(),he();var e=gl().Buffer,t=e.isEncoding||function(g){switch(g=""+g,g&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(g){if(!g)return"utf8";for(var _;;)switch(g){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return g;default:if(_)return;g=(""+g).toLowerCase(),_=!0}}function o(g){var _=i(g);if(typeof _!="string"&&(e.isEncoding===t||!t(g)))throw new Error("Unknown encoding: "+g);return _||g}p.StringDecoder=r;function r(g){this.encoding=o(g);var _;switch(this.encoding){case"utf16le":this.text=d,this.end=y,_=4;break;case"utf8":this.fillLast=l,_=4;break;case"base64":this.text=f,this.end=m,_=3;break;default:this.write=b,this.end=E;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(_)}r.prototype.write=function(g){if(g.length===0)return"";var _,x;if(this.lastNeed){if(_=this.fillLast(g),_===void 0)return"";x=this.lastNeed,this.lastNeed=0}else x=0;return x<g.length?_?_+this.text(g,x):this.text(g,x):_||""},r.prototype.end=c,r.prototype.text=u,r.prototype.fillLast=function(g){if(this.lastNeed<=g.length)return g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,g.length),this.lastNeed-=g.length};function n(g){return g<=127?0:g>>5===6?2:g>>4===14?3:g>>3===30?4:g>>6===2?-1:-2}function s(g,_,x){var v=_.length-1;if(v<x)return 0;var A=n(_[v]);return A>=0?(A>0&&(g.lastNeed=A-1),A):--v<x||A===-2?0:(A=n(_[v]),A>=0?(A>0&&(g.lastNeed=A-2),A):--v<x||A===-2?0:(A=n(_[v]),A>=0?(A>0&&(A===2?A=0:g.lastNeed=A-3),A):0))}function a(g,_,x){if((_[0]&192)!==128)return g.lastNeed=0,"";if(g.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return g.lastNeed=1,"";if(g.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return g.lastNeed=2,""}}function l(g){var _=this.lastTotal-this.lastNeed,x=a(this,g);if(x!==void 0)return x;if(this.lastNeed<=g.length)return g.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,_,0,g.length),this.lastNeed-=g.length}function u(g,_){var x=s(this,g,_);if(!this.lastNeed)return g.toString("utf8",_);this.lastTotal=x;var v=g.length-(x-this.lastNeed);return g.copy(this.lastChar,0,v),g.toString("utf8",_,v)}function c(g){var _=g&&g.length?this.write(g):"";return this.lastNeed?_+"":_}function d(g,_){if((g.length-_)%2===0){var x=g.toString("utf16le",_);if(x){var v=x.charCodeAt(x.length-1);if(v>=55296&&v<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],x.slice(0,-1)}return x}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",_,g.length-1)}function y(g){var _=g&&g.length?this.write(g):"";if(this.lastNeed){var x=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,x)}return _}function f(g,_){var x=(g.length-_)%3;return x===0?g.toString("base64",_):(this.lastNeed=3-x,this.lastTotal=3,x===1?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",_,g.length-x))}function m(g){var _=g&&g.length?this.write(g):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function b(g){return g.toString(this.encoding)}function E(g){return g&&g.length?this.write(g):""}}),qo=ge((p,e)=>{ue(),ce(),he();var t=Mt(),{PromisePrototypeThen:i,SymbolAsyncIterator:o,SymbolIterator:r}=De(),{Buffer:n}=(Ue(),Me(Be)),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:a}=Ge().codes;function l(u,c,d){let y;if(typeof c=="string"||c instanceof n)return new u({objectMode:!0,...d,read(){this.push(c),this.push(null)}});let f;if(c&&c[o])f=!0,y=c[o]();else if(c&&c[r])f=!1,y=c[r]();else throw new s("iterable",["Iterable"],c);let m=new u({objectMode:!0,highWaterMark:1,...d}),b=!1;m._read=function(){b||(b=!0,g())},m._destroy=function(_,x){i(E(_),()=>t.nextTick(x,_),v=>t.nextTick(x,v||_))};async function E(_){let x=_!=null,v=typeof y.throw=="function";if(x&&v){let{value:A,done:S}=await y.throw(_);if(await A,S)return}if(typeof y.return=="function"){let{value:A}=await y.return();await A}}async function g(){for(;;){try{let{value:_,done:x}=f?await y.next():y.next();if(x)m.push(null);else{let v=_&&typeof _.then=="function"?await _:_;if(v===null)throw b=!1,new a;if(m.push(v))continue;b=!1}}catch(_){m.destroy(_)}break}}return m}e.exports=l}),qr=ge((p,e)=>{ue(),ce(),he();var t=Mt(),{ArrayPrototypeIndexOf:i,NumberIsInteger:o,NumberIsNaN:r,NumberParseInt:n,ObjectDefineProperties:s,ObjectKeys:a,ObjectSetPrototypeOf:l,Promise:u,SafeSet:c,SymbolAsyncDispose:d,SymbolAsyncIterator:y,Symbol:f}=De();e.exports=ae,ae.ReadableState=we;var{EventEmitter:m}=(Pt(),Me(xt)),{Stream:b,prependListener:E}=es(),{Buffer:g}=(Ue(),Me(Be)),{addAbortSignal:_}=zr(),x=At(),v=Ve().debuglog("stream",O=>{v=O}),A=pl(),S=Wt(),{getHighWaterMark:I,getDefaultHighWaterMark:P}=Hr(),{aggregateTwoErrors:C,codes:{ERR_INVALID_ARG_TYPE:B,ERR_METHOD_NOT_IMPLEMENTED:T,ERR_OUT_OF_RANGE:z,ERR_STREAM_PUSH_AFTER_EOF:U,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:D},AbortError:le}=Ge(),{validateObject:Y}=ir(),G=f("kPaused"),{StringDecoder:re}=ml(),F=qo();l(ae.prototype,b.prototype),l(ae,b);var Z=()=>{},{errorOrDestroy:R}=S,X=1,be=2,te=4,_e=8,V=16,L=32,ie=64,q=128,K=256,Q=512,ye=1024,oe=2048,M=4096,W=8192,ee=16384,de=32768,pe=65536,ve=1<<17,H=1<<18;function me(O){return{enumerable:!1,get(){return(this.state&O)!==0},set(N){N?this.state|=O:this.state&=~O}}}s(we.prototype,{objectMode:me(X),ended:me(be),endEmitted:me(te),reading:me(_e),constructed:me(V),sync:me(L),needReadable:me(ie),emittedReadable:me(q),readableListening:me(K),resumeScheduled:me(Q),errorEmitted:me(ye),emitClose:me(oe),autoDestroy:me(M),destroyed:me(W),closed:me(ee),closeEmitted:me(de),multiAwaitDrain:me(pe),readingMore:me(ve),dataEmitted:me(H)});function we(O,N,Ee){typeof Ee!="boolean"&&(Ee=N instanceof pt()),this.state=oe|M|V|L,O&&O.objectMode&&(this.state|=X),Ee&&O&&O.readableObjectMode&&(this.state|=X),this.highWaterMark=O?I(this,O,"readableHighWaterMark",Ee):P(!1),this.buffer=new A,this.length=0,this.pipes=[],this.flowing=null,this[G]=null,O&&O.emitClose===!1&&(this.state&=~oe),O&&O.autoDestroy===!1&&(this.state&=~M),this.errored=null,this.defaultEncoding=O&&O.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,O&&O.encoding&&(this.decoder=new re(O.encoding),this.encoding=O.encoding)}function ae(O){if(!(this instanceof ae))return new ae(O);let N=this instanceof pt();this._readableState=new we(O,this,N),O&&(typeof O.read=="function"&&(this._read=O.read),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.construct=="function"&&(this._construct=O.construct),O.signal&&!N&&_(O.signal,this)),b.call(this,O),S.construct(this,()=>{this._readableState.needReadable&&$(this,this._readableState)})}ae.prototype.destroy=S.destroy,ae.prototype._undestroy=S.undestroy,ae.prototype._destroy=function(O,N){N(O)},ae.prototype[m.captureRejectionSymbol]=function(O){this.destroy(O)},ae.prototype[d]=function(){let O;return this.destroyed||(O=this.readableEnded?null:new le,this.destroy(O)),new u((N,Ee)=>x(this,xe=>xe&&xe!==O?Ee(xe):N(null)))},ae.prototype.push=function(O,N){return Re(this,O,N,!1)},ae.prototype.unshift=function(O,N){return Re(this,O,N,!0)};function Re(O,N,Ee,xe){v("readableAddChunk",N);let Ae=O._readableState,je;if((Ae.state&X)===0&&(typeof N=="string"?(Ee=Ee||Ae.defaultEncoding,Ae.encoding!==Ee&&(xe&&Ae.encoding?N=g.from(N,Ee).toString(Ae.encoding):(N=g.from(N,Ee),Ee=""))):N instanceof g?Ee="":b._isUint8Array(N)?(N=b._uint8ArrayToBuffer(N),Ee=""):N!=null&&(je=new B("chunk",["string","Buffer","Uint8Array"],N))),je)R(O,je);else if(N===null)Ae.state&=~_e,J(O,Ae);else if((Ae.state&X)!==0||N&&N.length>0)if(xe)if((Ae.state&te)!==0)R(O,new D);else{if(Ae.destroyed||Ae.errored)return!1;h(O,Ae,N,!0)}else if(Ae.ended)R(O,new U);else{if(Ae.destroyed||Ae.errored)return!1;Ae.state&=~_e,Ae.decoder&&!Ee?(N=Ae.decoder.write(N),Ae.objectMode||N.length!==0?h(O,Ae,N,!1):$(O,Ae)):h(O,Ae,N,!1)}else xe||(Ae.state&=~_e,$(O,Ae));return!Ae.ended&&(Ae.length<Ae.highWaterMark||Ae.length===0)}function h(O,N,Ee,xe){N.flowing&&N.length===0&&!N.sync&&O.listenerCount("data")>0?((N.state&pe)!==0?N.awaitDrainWriters.clear():N.awaitDrainWriters=null,N.dataEmitted=!0,O.emit("data",Ee)):(N.length+=N.objectMode?1:Ee.length,xe?N.buffer.unshift(Ee):N.buffer.push(Ee),(N.state&ie)!==0&&fe(O)),$(O,N)}ae.prototype.isPaused=function(){let O=this._readableState;return O[G]===!0||O.flowing===!1},ae.prototype.setEncoding=function(O){let N=new re(O);this._readableState.decoder=N,this._readableState.encoding=this._readableState.decoder.encoding;let Ee=this._readableState.buffer,xe="";for(let Ae of Ee)xe+=N.write(Ae);return Ee.clear(),xe!==""&&Ee.push(xe),this._readableState.length=xe.length,this};var w=1073741824;function k(O){if(O>w)throw new z("size","<= 1GiB",O);return O--,O|=O>>>1,O|=O>>>2,O|=O>>>4,O|=O>>>8,O|=O>>>16,O++,O}function j(O,N){return O<=0||N.length===0&&N.ended?0:(N.state&X)!==0?1:r(O)?N.flowing&&N.length?N.buffer.first().length:N.length:O<=N.length?O:N.ended?N.length:0}ae.prototype.read=function(O){v("read",O),O===void 0?O=NaN:o(O)||(O=n(O,10));let N=this._readableState,Ee=O;if(O>N.highWaterMark&&(N.highWaterMark=k(O)),O!==0&&(N.state&=~q),O===0&&N.needReadable&&((N.highWaterMark!==0?N.length>=N.highWaterMark:N.length>0)||N.ended))return v("read: emitReadable",N.length,N.ended),N.length===0&&N.ended?it(this):fe(this),null;if(O=j(O,N),O===0&&N.ended)return N.length===0&&it(this),null;let xe=(N.state&ie)!==0;if(v("need readable",xe),(N.length===0||N.length-O<N.highWaterMark)&&(xe=!0,v("length less than watermark",xe)),N.ended||N.reading||N.destroyed||N.errored||!N.constructed)xe=!1,v("reading, ended or constructing",xe);else if(xe){v("do read"),N.state|=_e|L,N.length===0&&(N.state|=ie);try{this._read(N.highWaterMark)}catch(je){R(this,je)}N.state&=~L,N.reading||(O=j(Ee,N))}let Ae;return O>0?Ae=Lt(O,N):Ae=null,Ae===null?(N.needReadable=N.length<=N.highWaterMark,O=0):(N.length-=O,N.multiAwaitDrain?N.awaitDrainWriters.clear():N.awaitDrainWriters=null),N.length===0&&(N.ended||(N.needReadable=!0),Ee!==O&&N.ended&&it(this)),Ae!==null&&!N.errorEmitted&&!N.closeEmitted&&(N.dataEmitted=!0,this.emit("data",Ae)),Ae};function J(O,N){if(v("onEofChunk"),!N.ended){if(N.decoder){let Ee=N.decoder.end();Ee&&Ee.length&&(N.buffer.push(Ee),N.length+=N.objectMode?1:Ee.length)}N.ended=!0,N.sync?fe(O):(N.needReadable=!1,N.emittedReadable=!0,Se(O))}}function fe(O){let N=O._readableState;v("emitReadable",N.needReadable,N.emittedReadable),N.needReadable=!1,N.emittedReadable||(v("emitReadable",N.flowing),N.emittedReadable=!0,t.nextTick(Se,O))}function Se(O){let N=O._readableState;v("emitReadable_",N.destroyed,N.length,N.ended),!N.destroyed&&!N.errored&&(N.length||N.ended)&&(O.emit("readable"),N.emittedReadable=!1),N.needReadable=!N.flowing&&!N.ended&&N.length<=N.highWaterMark,tt(O)}function $(O,N){!N.readingMore&&N.constructed&&(N.readingMore=!0,t.nextTick(ne,O,N))}function ne(O,N){for(;!N.reading&&!N.ended&&(N.length<N.highWaterMark||N.flowing&&N.length===0);){let Ee=N.length;if(v("maybeReadMore read 0"),O.read(0),Ee===N.length)break}N.readingMore=!1}ae.prototype._read=function(O){throw new T("_read()")},ae.prototype.pipe=function(O,N){let Ee=this,xe=this._readableState;xe.pipes.length===1&&(xe.multiAwaitDrain||(xe.multiAwaitDrain=!0,xe.awaitDrainWriters=new c(xe.awaitDrainWriters?[xe.awaitDrainWriters]:[]))),xe.pipes.push(O),v("pipe count=%d opts=%j",xe.pipes.length,N);let Ae=(!N||N.end!==!1)&&O!==t.stdout&&O!==t.stderr?qe:It;xe.endEmitted?t.nextTick(Ae):Ee.once("end",Ae),O.on("unpipe",je);function je(st,lt){v("onunpipe"),st===Ee&&lt&&lt.hasUnpiped===!1&&(lt.hasUnpiped=!0,Gt())}function qe(){v("onend"),O.end()}let Je,$t=!1;function Gt(){v("cleanup"),O.removeListener("close",nt),O.removeListener("finish",vt),Je&&O.removeListener("drain",Je),O.removeListener("error",kt),O.removeListener("unpipe",je),Ee.removeListener("end",qe),Ee.removeListener("end",It),Ee.removeListener("data",or),$t=!0,Je&&xe.awaitDrainWriters&&(!O._writableState||O._writableState.needDrain)&&Je()}function Vt(){$t||(xe.pipes.length===1&&xe.pipes[0]===O?(v("false write response, pause",0),xe.awaitDrainWriters=O,xe.multiAwaitDrain=!1):xe.pipes.length>1&&xe.pipes.includes(O)&&(v("false write response, pause",xe.awaitDrainWriters.size),xe.awaitDrainWriters.add(O)),Ee.pause()),Je||(Je=ke(Ee,O),O.on("drain",Je))}Ee.on("data",or);function or(st){v("ondata");let lt=O.write(st);v("dest.write",lt),lt===!1&&Vt()}function kt(st){if(v("onerror",st),It(),O.removeListener("error",kt),O.listenerCount("error")===0){let lt=O._writableState||O._readableState;lt&&!lt.errorEmitted?R(O,st):O.emit("error",st)}}E(O,"error",kt);function nt(){O.removeListener("finish",vt),It()}O.once("close",nt);function vt(){v("onfinish"),O.removeListener("close",nt),It()}O.once("finish",vt);function It(){v("unpipe"),Ee.unpipe(O)}return O.emit("pipe",Ee),O.writableNeedDrain===!0?Vt():xe.flowing||(v("pipe resume"),Ee.resume()),O};function ke(O,N){return function(){let Ee=O._readableState;Ee.awaitDrainWriters===N?(v("pipeOnDrain",1),Ee.awaitDrainWriters=null):Ee.multiAwaitDrain&&(v("pipeOnDrain",Ee.awaitDrainWriters.size),Ee.awaitDrainWriters.delete(N)),(!Ee.awaitDrainWriters||Ee.awaitDrainWriters.size===0)&&O.listenerCount("data")&&O.resume()}}ae.prototype.unpipe=function(O){let N=this._readableState,Ee={hasUnpiped:!1};if(N.pipes.length===0)return this;if(!O){let Ae=N.pipes;N.pipes=[],this.pause();for(let je=0;je<Ae.length;je++)Ae[je].emit("unpipe",this,{hasUnpiped:!1});return this}let xe=i(N.pipes,O);return xe===-1?this:(N.pipes.splice(xe,1),N.pipes.length===0&&this.pause(),O.emit("unpipe",this,Ee),this)},ae.prototype.on=function(O,N){let Ee=b.prototype.on.call(this,O,N),xe=this._readableState;return O==="data"?(xe.readableListening=this.listenerCount("readable")>0,xe.flowing!==!1&&this.resume()):O==="readable"&&!xe.endEmitted&&!xe.readableListening&&(xe.readableListening=xe.needReadable=!0,xe.flowing=!1,xe.emittedReadable=!1,v("on readable",xe.length,xe.reading),xe.length?fe(this):xe.reading||t.nextTick(Ce,this)),Ee},ae.prototype.addListener=ae.prototype.on,ae.prototype.removeListener=function(O,N){let Ee=b.prototype.removeListener.call(this,O,N);return O==="readable"&&t.nextTick(Ie,this),Ee},ae.prototype.off=ae.prototype.removeListener,ae.prototype.removeAllListeners=function(O){let N=b.prototype.removeAllListeners.apply(this,arguments);return(O==="readable"||O===void 0)&&t.nextTick(Ie,this),N};function Ie(O){let N=O._readableState;N.readableListening=O.listenerCount("readable")>0,N.resumeScheduled&&N[G]===!1?N.flowing=!0:O.listenerCount("data")>0?O.resume():N.readableListening||(N.flowing=null)}function Ce(O){v("readable nexttick read 0"),O.read(0)}ae.prototype.resume=function(){let O=this._readableState;return O.flowing||(v("resume"),O.flowing=!O.readableListening,Pe(this,O)),O[G]=!1,this};function Pe(O,N){N.resumeScheduled||(N.resumeScheduled=!0,t.nextTick(et,O,N))}function et(O,N){v("resume",N.reading),N.reading||O.read(0),N.resumeScheduled=!1,O.emit("resume"),tt(O),N.flowing&&!N.reading&&O.read(0)}ae.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[G]=!0,this};function tt(O){let N=O._readableState;for(v("flow",N.flowing);N.flowing&&O.read()!==null;);}ae.prototype.wrap=function(O){let N=!1;O.on("data",xe=>{!this.push(xe)&&O.pause&&(N=!0,O.pause())}),O.on("end",()=>{this.push(null)}),O.on("error",xe=>{R(this,xe)}),O.on("close",()=>{this.destroy()}),O.on("destroy",()=>{this.destroy()}),this._read=()=>{N&&O.resume&&(N=!1,O.resume())};let Ee=a(O);for(let xe=1;xe<Ee.length;xe++){let Ae=Ee[xe];this[Ae]===void 0&&typeof O[Ae]=="function"&&(this[Ae]=O[Ae].bind(O))}return this},ae.prototype[y]=function(){return Fe(this)},ae.prototype.iterator=function(O){return O!==void 0&&Y(O,"options"),Fe(this,O)};function Fe(O,N){typeof O.read!="function"&&(O=ae.wrap(O,{objectMode:!0}));let Ee=rt(O,N);return Ee.stream=O,Ee}async function*rt(O,N){let Ee=Z;function xe(qe){this===O?(Ee(),Ee=Z):Ee=qe}O.on("readable",xe);let Ae,je=x(O,{writable:!1},qe=>{Ae=qe?C(Ae,qe):null,Ee(),Ee=Z});try{for(;;){let qe=O.destroyed?null:O.read();if(qe!==null)yield qe;else{if(Ae)throw Ae;if(Ae===null)return;await new u(xe)}}}catch(qe){throw Ae=C(Ae,qe),Ae}finally{(Ae||N?.destroyOnReturn!==!1)&&(Ae===void 0||O._readableState.autoDestroy)?S.destroyer(O,null):(O.off("readable",xe),je())}}s(ae.prototype,{readable:{__proto__:null,get(){let O=this._readableState;return!!O&&O.readable!==!1&&!O.destroyed&&!O.errorEmitted&&!O.endEmitted},set(O){this._readableState&&(this._readableState.readable=!!O)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(O){this._readableState&&(this._readableState.flowing=O)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(O){this._readableState&&(this._readableState.destroyed=O)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(we.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[G]!==!1},set(O){this[G]=!!O}}}),ae._fromList=Lt;function Lt(O,N){if(N.length===0)return null;let Ee;return N.objectMode?Ee=N.buffer.shift():!O||O>=N.length?(N.decoder?Ee=N.buffer.join(""):N.buffer.length===1?Ee=N.buffer.first():Ee=N.buffer.concat(N.length),N.buffer.clear()):Ee=N.buffer.consume(O,N.decoder),Ee}function it(O){let N=O._readableState;v("endReadable",N.endEmitted),N.endEmitted||(N.ended=!0,t.nextTick(Ye,N,O))}function Ye(O,N){if(v("endReadableNT",O.endEmitted,O.length),!O.errored&&!O.closeEmitted&&!O.endEmitted&&O.length===0){if(O.endEmitted=!0,N.emit("end"),N.writable&&N.allowHalfOpen===!1)t.nextTick(sr,N);else if(O.autoDestroy){let Ee=N._writableState;(!Ee||Ee.autoDestroy&&(Ee.finished||Ee.writable===!1))&&N.destroy()}}}function sr(O){O.writable&&!O.writableEnded&&!O.destroyed&&O.end()}ae.from=function(O,N){return F(ae,O,N)};var Dt;function qt(){return Dt===void 0&&(Dt={}),Dt}ae.fromWeb=function(O,N){return qt().newStreamReadableFromReadableStream(O,N)},ae.toWeb=function(O,N){return qt().newReadableStreamFromStreamReadable(O,N)},ae.wrap=function(O,N){var Ee,xe;return new ae({objectMode:(Ee=(xe=O.readableObjectMode)!==null&&xe!==void 0?xe:O.objectMode)!==null&&Ee!==void 0?Ee:!0,...N,destroy(Ae,je){S.destroyer(O,Ae),je(Ae)}}).wrap(O)}}),ts=ge((p,e)=>{ue(),ce(),he();var t=Mt(),{ArrayPrototypeSlice:i,Error:o,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:n,ObjectDefineProperties:s,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:l,Symbol:u,SymbolHasInstance:c}=De();e.exports=Y,Y.WritableState=D;var{EventEmitter:d}=(Pt(),Me(xt)),y=es().Stream,{Buffer:f}=(Ue(),Me(Be)),m=Wt(),{addAbortSignal:b}=zr(),{getHighWaterMark:E,getDefaultHighWaterMark:g}=Hr(),{ERR_INVALID_ARG_TYPE:_,ERR_METHOD_NOT_IMPLEMENTED:x,ERR_MULTIPLE_CALLBACK:v,ERR_STREAM_CANNOT_PIPE:A,ERR_STREAM_DESTROYED:S,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:P,ERR_STREAM_WRITE_AFTER_END:C,ERR_UNKNOWN_ENCODING:B}=Ge().codes,{errorOrDestroy:T}=m;a(Y.prototype,y.prototype),a(Y,y);function z(){}var U=u("kOnFinished");function D(M,W,ee){typeof ee!="boolean"&&(ee=W instanceof pt()),this.objectMode=!!(M&&M.objectMode),ee&&(this.objectMode=this.objectMode||!!(M&&M.writableObjectMode)),this.highWaterMark=M?E(this,M,"writableHighWaterMark",ee):g(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let de=!!(M&&M.decodeStrings===!1);this.decodeStrings=!de,this.defaultEncoding=M&&M.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=R.bind(void 0,W),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,le(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!M||M.emitClose!==!1,this.autoDestroy=!M||M.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[U]=[]}function le(M){M.buffered=[],M.bufferedIndex=0,M.allBuffers=!0,M.allNoop=!0}D.prototype.getBuffer=function(){return i(this.buffered,this.bufferedIndex)},n(D.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Y(M){let W=this instanceof pt();if(!W&&!r(Y,this))return new Y(M);this._writableState=new D(M,this,W),M&&(typeof M.write=="function"&&(this._write=M.write),typeof M.writev=="function"&&(this._writev=M.writev),typeof M.destroy=="function"&&(this._destroy=M.destroy),typeof M.final=="function"&&(this._final=M.final),typeof M.construct=="function"&&(this._construct=M.construct),M.signal&&b(M.signal,this)),y.call(this,M),m.construct(this,()=>{let ee=this._writableState;ee.writing||_e(this,ee),q(this,ee)})}n(Y,c,{__proto__:null,value:function(M){return r(this,M)?!0:this!==Y?!1:M&&M._writableState instanceof D}}),Y.prototype.pipe=function(){T(this,new A)};function G(M,W,ee,de){let pe=M._writableState;if(typeof ee=="function")de=ee,ee=pe.defaultEncoding;else{if(!ee)ee=pe.defaultEncoding;else if(ee!=="buffer"&&!f.isEncoding(ee))throw new B(ee);typeof de!="function"&&(de=z)}if(W===null)throw new P;if(!pe.objectMode)if(typeof W=="string")pe.decodeStrings!==!1&&(W=f.from(W,ee),ee="buffer");else if(W instanceof f)ee="buffer";else if(y._isUint8Array(W))W=y._uint8ArrayToBuffer(W),ee="buffer";else throw new _("chunk",["string","Buffer","Uint8Array"],W);let ve;return pe.ending?ve=new C:pe.destroyed&&(ve=new S("write")),ve?(t.nextTick(de,ve),T(M,ve,!0),ve):(pe.pendingcb++,re(M,pe,W,ee,de))}Y.prototype.write=function(M,W,ee){return G(this,M,W,ee)===!0},Y.prototype.cork=function(){this._writableState.corked++},Y.prototype.uncork=function(){let M=this._writableState;M.corked&&(M.corked--,M.writing||_e(this,M))},Y.prototype.setDefaultEncoding=function(M){if(typeof M=="string"&&(M=l(M)),!f.isEncoding(M))throw new B(M);return this._writableState.defaultEncoding=M,this};function re(M,W,ee,de,pe){let ve=W.objectMode?1:ee.length;W.length+=ve;let H=W.length<W.highWaterMark;return H||(W.needDrain=!0),W.writing||W.corked||W.errored||!W.constructed?(W.buffered.push({chunk:ee,encoding:de,callback:pe}),W.allBuffers&&de!=="buffer"&&(W.allBuffers=!1),W.allNoop&&pe!==z&&(W.allNoop=!1)):(W.writelen=ve,W.writecb=pe,W.writing=!0,W.sync=!0,M._write(ee,de,W.onwrite),W.sync=!1),H&&!W.errored&&!W.destroyed}function F(M,W,ee,de,pe,ve,H){W.writelen=de,W.writecb=H,W.writing=!0,W.sync=!0,W.destroyed?W.onwrite(new S("write")):ee?M._writev(pe,W.onwrite):M._write(pe,ve,W.onwrite),W.sync=!1}function Z(M,W,ee,de){--W.pendingcb,de(ee),te(W),T(M,ee)}function R(M,W){let ee=M._writableState,de=ee.sync,pe=ee.writecb;if(typeof pe!="function"){T(M,new v);return}ee.writing=!1,ee.writecb=null,ee.length-=ee.writelen,ee.writelen=0,W?(W.stack,ee.errored||(ee.errored=W),M._readableState&&!M._readableState.errored&&(M._readableState.errored=W),de?t.nextTick(Z,M,ee,W,pe):Z(M,ee,W,pe)):(ee.buffered.length>ee.bufferedIndex&&_e(M,ee),de?ee.afterWriteTickInfo!==null&&ee.afterWriteTickInfo.cb===pe?ee.afterWriteTickInfo.count++:(ee.afterWriteTickInfo={count:1,cb:pe,stream:M,state:ee},t.nextTick(X,ee.afterWriteTickInfo)):be(M,ee,1,pe))}function X({stream:M,state:W,count:ee,cb:de}){return W.afterWriteTickInfo=null,be(M,W,ee,de)}function be(M,W,ee,de){for(!W.ending&&!M.destroyed&&W.length===0&&W.needDrain&&(W.needDrain=!1,M.emit("drain"));ee-- >0;)W.pendingcb--,de();W.destroyed&&te(W),q(M,W)}function te(M){if(M.writing)return;for(let pe=M.bufferedIndex;pe<M.buffered.length;++pe){var W;let{chunk:ve,callback:H}=M.buffered[pe],me=M.objectMode?1:ve.length;M.length-=me,H((W=M.errored)!==null&&W!==void 0?W:new S("write"))}let ee=M[U].splice(0);for(let pe=0;pe<ee.length;pe++){var de;ee[pe]((de=M.errored)!==null&&de!==void 0?de:new S("end"))}le(M)}function _e(M,W){if(W.corked||W.bufferProcessing||W.destroyed||!W.constructed)return;let{buffered:ee,bufferedIndex:de,objectMode:pe}=W,ve=ee.length-de;if(!ve)return;let H=de;if(W.bufferProcessing=!0,ve>1&&M._writev){W.pendingcb-=ve-1;let me=W.allNoop?z:ae=>{for(let Re=H;Re<ee.length;++Re)ee[Re].callback(ae)},we=W.allNoop&&H===0?ee:i(ee,H);we.allBuffers=W.allBuffers,F(M,W,!0,W.length,we,"",me),le(W)}else{do{let{chunk:me,encoding:we,callback:ae}=ee[H];ee[H++]=null;let Re=pe?1:me.length;F(M,W,!1,Re,me,we,ae)}while(H<ee.length&&!W.writing);H===ee.length?le(W):H>256?(ee.splice(0,H),W.bufferedIndex=0):W.bufferedIndex=H}W.bufferProcessing=!1}Y.prototype._write=function(M,W,ee){if(this._writev)this._writev([{chunk:M,encoding:W}],ee);else throw new x("_write()")},Y.prototype._writev=null,Y.prototype.end=function(M,W,ee){let de=this._writableState;typeof M=="function"?(ee=M,M=null,W=null):typeof W=="function"&&(ee=W,W=null);let pe;if(M!=null){let ve=G(this,M,W);ve instanceof o&&(pe=ve)}return de.corked&&(de.corked=1,this.uncork()),pe||(!de.errored&&!de.ending?(de.ending=!0,q(this,de,!0),de.ended=!0):de.finished?pe=new I("end"):de.destroyed&&(pe=new S("end"))),typeof ee=="function"&&(pe||de.finished?t.nextTick(ee,pe):de[U].push(ee)),this};function V(M){return M.ending&&!M.destroyed&&M.constructed&&M.length===0&&!M.errored&&M.buffered.length===0&&!M.finished&&!M.writing&&!M.errorEmitted&&!M.closeEmitted}function L(M,W){let ee=!1;function de(pe){if(ee){T(M,pe??v());return}if(ee=!0,W.pendingcb--,pe){let ve=W[U].splice(0);for(let H=0;H<ve.length;H++)ve[H](pe);T(M,pe,W.sync)}else V(W)&&(W.prefinished=!0,M.emit("prefinish"),W.pendingcb++,t.nextTick(K,M,W))}W.sync=!0,W.pendingcb++;try{M._final(de)}catch(pe){de(pe)}W.sync=!1}function ie(M,W){!W.prefinished&&!W.finalCalled&&(typeof M._final=="function"&&!W.destroyed?(W.finalCalled=!0,L(M,W)):(W.prefinished=!0,M.emit("prefinish")))}function q(M,W,ee){V(W)&&(ie(M,W),W.pendingcb===0&&(ee?(W.pendingcb++,t.nextTick((de,pe)=>{V(pe)?K(de,pe):pe.pendingcb--},M,W)):V(W)&&(W.pendingcb++,K(M,W))))}function K(M,W){W.pendingcb--,W.finished=!0;let ee=W[U].splice(0);for(let de=0;de<ee.length;de++)ee[de]();if(M.emit("finish"),W.autoDestroy){let de=M._readableState;(!de||de.autoDestroy&&(de.endEmitted||de.readable===!1))&&M.destroy()}}s(Y.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(M){this._writableState&&(this._writableState.destroyed=M)}},writable:{__proto__:null,get(){let M=this._writableState;return!!M&&M.writable!==!1&&!M.destroyed&&!M.errored&&!M.ending&&!M.ended},set(M){this._writableState&&(this._writableState.writable=!!M)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let M=this._writableState;return M?!M.destroyed&&!M.ending&&M.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var Q=m.destroy;Y.prototype.destroy=function(M,W){let ee=this._writableState;return!ee.destroyed&&(ee.bufferedIndex<ee.buffered.length||ee[U].length)&&t.nextTick(te,ee),Q.call(this,M,W),this},Y.prototype._undestroy=m.undestroy,Y.prototype._destroy=function(M,W){W(M)},Y.prototype[d.captureRejectionSymbol]=function(M){this.destroy(M)};var ye;function oe(){return ye===void 0&&(ye={}),ye}Y.fromWeb=function(M,W){return oe().newStreamWritableFromWritableStream(M,W)},Y.toWeb=function(M){return oe().newWritableStreamFromStreamWritable(M)}}),yl=ge((p,e)=>{ue(),ce(),he();var t=Mt(),i=(Ue(),Me(Be)),{isReadable:o,isWritable:r,isIterable:n,isNodeStream:s,isReadableNodeStream:a,isWritableNodeStream:l,isDuplexNodeStream:u,isReadableStream:c,isWritableStream:d}=mt(),y=At(),{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:m,ERR_INVALID_RETURN_VALUE:b}}=Ge(),{destroyer:E}=Wt(),g=pt(),_=qr(),x=ts(),{createDeferredPromise:v}=Ve(),A=qo(),S=globalThis.Blob||i.Blob,I=typeof S<"u"?function(U){return U instanceof S}:function(U){return!1},P=globalThis.AbortController||rr().AbortController,{FunctionPrototypeCall:C}=De(),B=class extends g{constructor(U){super(U),U?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),U?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};e.exports=function U(D,le){if(u(D))return D;if(a(D))return z({readable:D});if(l(D))return z({writable:D});if(s(D))return z({writable:!1,readable:!1});if(c(D))return z({readable:_.fromWeb(D)});if(d(D))return z({writable:x.fromWeb(D)});if(typeof D=="function"){let{value:G,write:re,final:F,destroy:Z}=T(D);if(n(G))return A(B,G,{objectMode:!0,write:re,final:F,destroy:Z});let R=G?.then;if(typeof R=="function"){let X,be=C(R,G,te=>{if(te!=null)throw new b("nully","body",te)},te=>{E(X,te)});return X=new B({objectMode:!0,readable:!1,write:re,final(te){F(async()=>{try{await be,t.nextTick(te,null)}catch(_e){t.nextTick(te,_e)}})},destroy:Z})}throw new b("Iterable, AsyncIterable or AsyncFunction",le,G)}if(I(D))return U(D.arrayBuffer());if(n(D))return A(B,D,{objectMode:!0,writable:!1});if(c(D?.readable)&&d(D?.writable))return B.fromWeb(D);if(typeof D?.writable=="object"||typeof D?.readable=="object"){let G=D!=null&&D.readable?a(D?.readable)?D?.readable:U(D.readable):void 0,re=D!=null&&D.writable?l(D?.writable)?D?.writable:U(D.writable):void 0;return z({readable:G,writable:re})}let Y=D?.then;if(typeof Y=="function"){let G;return C(Y,D,re=>{re!=null&&G.push(re),G.push(null)},re=>{E(G,re)}),G=new B({objectMode:!0,writable:!1,read(){}})}throw new m(le,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],D)};function T(U){let{promise:D,resolve:le}=v(),Y=new P,G=Y.signal;return{value:U((async function*(){for(;;){let re=D;D=null;let{chunk:F,done:Z,cb:R}=await re;if(t.nextTick(R),Z)return;if(G.aborted)throw new f(void 0,{cause:G.reason});({promise:D,resolve:le}=v()),yield F}})(),{signal:G}),write(re,F,Z){let R=le;le=null,R({chunk:re,done:!1,cb:Z})},final(re){let F=le;le=null,F({done:!0,cb:re})},destroy(re,F){Y.abort(),F(re)}}}function z(U){let D=U.readable&&typeof U.readable.read!="function"?_.wrap(U.readable):U.readable,le=U.writable,Y=!!o(D),G=!!r(le),re,F,Z,R,X;function be(te){let _e=R;R=null,_e?_e(te):te&&X.destroy(te)}return X=new B({readableObjectMode:!!(D!=null&&D.readableObjectMode),writableObjectMode:!!(le!=null&&le.writableObjectMode),readable:Y,writable:G}),G&&(y(le,te=>{G=!1,te&&E(D,te),be(te)}),X._write=function(te,_e,V){le.write(te,_e)?V():re=V},X._final=function(te){le.end(),F=te},le.on("drain",function(){if(re){let te=re;re=null,te()}}),le.on("finish",function(){if(F){let te=F;F=null,te()}})),Y&&(y(D,te=>{Y=!1,te&&E(D,te),be(te)}),D.on("readable",function(){if(Z){let te=Z;Z=null,te()}}),D.on("end",function(){X.push(null)}),X._read=function(){for(;;){let te=D.read();if(te===null){Z=X._read;return}if(!X.push(te))return}}),X._destroy=function(te,_e){!te&&R!==null&&(te=new f),Z=null,re=null,F=null,R===null?_e(te):(R=_e,E(le,te),E(D,te))},X}}),pt=ge((p,e)=>{ue(),ce(),he();var{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:i,ObjectKeys:o,ObjectSetPrototypeOf:r}=De();e.exports=a;var n=qr(),s=ts();r(a.prototype,n.prototype),r(a,n);{let d=o(s.prototype);for(let y=0;y<d.length;y++){let f=d[y];a.prototype[f]||(a.prototype[f]=s.prototype[f])}}function a(d){if(!(this instanceof a))return new a(d);n.call(this,d),s.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(a.prototype,{writable:{__proto__:null,...i(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...i(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...i(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...i(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...i(s.prototype,"writableLength")},writableFinished:{__proto__:null,...i(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...i(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...i(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...i(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});var l;function u(){return l===void 0&&(l={}),l}a.fromWeb=function(d,y){return u().newStreamDuplexFromReadableWritablePair(d,y)},a.toWeb=function(d){return u().newReadableWritablePairFromDuplex(d)};var c;a.from=function(d){return c||(c=yl()),c(d,"body")}}),$o=ge((p,e)=>{ue(),ce(),he();var{ObjectSetPrototypeOf:t,Symbol:i}=De();e.exports=a;var{ERR_METHOD_NOT_IMPLEMENTED:o}=Ge().codes,r=pt(),{getHighWaterMark:n}=Hr();t(a.prototype,r.prototype),t(a,r);var s=i("kCallback");function a(c){if(!(this instanceof a))return new a(c);let d=c?n(this,c,"readableHighWaterMark",!0):null;d===0&&(c={...c,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:c.writableHighWaterMark||0}),r.call(this,c),this._readableState.sync=!1,this[s]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",u)}function l(c){typeof this._flush=="function"&&!this.destroyed?this._flush((d,y)=>{if(d){c?c(d):this.destroy(d);return}y!=null&&this.push(y),this.push(null),c&&c()}):(this.push(null),c&&c())}function u(){this._final!==l&&l.call(this)}a.prototype._final=l,a.prototype._transform=function(c,d,y){throw new o("_transform()")},a.prototype._write=function(c,d,y){let f=this._readableState,m=this._writableState,b=f.length;this._transform(c,d,(E,g)=>{if(E){y(E);return}g!=null&&this.push(g),m.ended||b===f.length||f.length<f.highWaterMark?y():this[s]=y})},a.prototype._read=function(){if(this[s]){let c=this[s];this[s]=null,c()}}}),Go=ge((p,e)=>{ue(),ce(),he();var{ObjectSetPrototypeOf:t}=De();e.exports=o;var i=$o();t(o.prototype,i.prototype),t(o,i);function o(r){if(!(this instanceof o))return new o(r);i.call(this,r)}o.prototype._transform=function(r,n,s){s(null,r)}}),rs=ge((p,e)=>{ue(),ce(),he();var t=Mt(),{ArrayIsArray:i,Promise:o,SymbolAsyncIterator:r,SymbolDispose:n}=De(),s=At(),{once:a}=Ve(),l=Wt(),u=pt(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:y,ERR_MISSING_ARGS:f,ERR_STREAM_DESTROYED:m,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:E}=Ge(),{validateFunction:g,validateAbortSignal:_}=ir(),{isIterable:x,isReadable:v,isReadableNodeStream:A,isNodeStream:S,isTransformStream:I,isWebStream:P,isReadableStream:C,isReadableFinished:B}=mt(),T=globalThis.AbortController||rr().AbortController,z,U,D;function le(te,_e,V){let L=!1;te.on("close",()=>{L=!0});let ie=s(te,{readable:_e,writable:V},q=>{L=!q});return{destroy:q=>{L||(L=!0,l.destroyer(te,q||new m("pipe")))},cleanup:ie}}function Y(te){return g(te[te.length-1],"streams[stream.length - 1]"),te.pop()}function G(te){if(x(te))return te;if(A(te))return re(te);throw new d("val",["Readable","Iterable","AsyncIterable"],te)}async function*re(te){U||(U=qr()),yield*U.prototype[r].call(te)}async function F(te,_e,V,{end:L}){let ie,q=null,K=oe=>{if(oe&&(ie=oe),q){let M=q;q=null,M()}},Q=()=>new o((oe,M)=>{ie?M(ie):q=()=>{ie?M(ie):oe()}});_e.on("drain",K);let ye=s(_e,{readable:!1},K);try{_e.writableNeedDrain&&await Q();for await(let oe of te)_e.write(oe)||await Q();L&&(_e.end(),await Q()),V()}catch(oe){V(ie!==oe?c(ie,oe):oe)}finally{ye(),_e.off("drain",K)}}async function Z(te,_e,V,{end:L}){I(_e)&&(_e=_e.writable);let ie=_e.getWriter();try{for await(let q of te)await ie.ready,ie.write(q).catch(()=>{});await ie.ready,L&&await ie.close(),V()}catch(q){try{await ie.abort(q),V(q)}catch(K){V(K)}}}function R(...te){return X(te,a(Y(te)))}function X(te,_e,V){if(te.length===1&&i(te[0])&&(te=te[0]),te.length<2)throw new f("streams");let L=new T,ie=L.signal,q=V?.signal,K=[];_(q,"options.signal");function Q(){pe(new E)}D=D||Ve().addAbortListener;let ye;q&&(ye=D(q,Q));let oe,M,W=[],ee=0;function de(we){pe(we,--ee===0)}function pe(we,ae){var Re;if(we&&(!oe||oe.code==="ERR_STREAM_PREMATURE_CLOSE")&&(oe=we),!(!oe&&!ae)){for(;W.length;)W.shift()(oe);(Re=ye)===null||Re===void 0||Re[n](),L.abort(),ae&&(oe||K.forEach(h=>h()),t.nextTick(_e,oe,M))}}let ve;for(let we=0;we<te.length;we++){let ae=te[we],Re=we<te.length-1,h=we>0,w=Re||V?.end!==!1,k=we===te.length-1;if(S(ae)){let j=function(J){J&&J.name!=="AbortError"&&J.code!=="ERR_STREAM_PREMATURE_CLOSE"&&de(J)};if(w){let{destroy:J,cleanup:fe}=le(ae,Re,h);W.push(J),v(ae)&&k&&K.push(fe)}ae.on("error",j),v(ae)&&k&&K.push(()=>{ae.removeListener("error",j)})}if(we===0)if(typeof ae=="function"){if(ve=ae({signal:ie}),!x(ve))throw new y("Iterable, AsyncIterable or Stream","source",ve)}else x(ae)||A(ae)||I(ae)?ve=ae:ve=u.from(ae);else if(typeof ae=="function"){if(I(ve)){var H;ve=G((H=ve)===null||H===void 0?void 0:H.readable)}else ve=G(ve);if(ve=ae(ve,{signal:ie}),Re){if(!x(ve,!0))throw new y("AsyncIterable",`transform[${we-1}]`,ve)}else{var me;z||(z=Go());let j=new z({objectMode:!0}),J=(me=ve)===null||me===void 0?void 0:me.then;if(typeof J=="function")ee++,J.call(ve,$=>{M=$,$!=null&&j.write($),w&&j.end(),t.nextTick(de)},$=>{j.destroy($),t.nextTick(de,$)});else if(x(ve,!0))ee++,F(ve,j,de,{end:w});else if(C(ve)||I(ve)){let $=ve.readable||ve;ee++,F($,j,de,{end:w})}else throw new y("AsyncIterable or Promise","destination",ve);ve=j;let{destroy:fe,cleanup:Se}=le(ve,!1,!0);W.push(fe),k&&K.push(Se)}}else if(S(ae)){if(A(ve)){ee+=2;let j=be(ve,ae,de,{end:w});v(ae)&&k&&K.push(j)}else if(I(ve)||C(ve)){let j=ve.readable||ve;ee++,F(j,ae,de,{end:w})}else if(x(ve))ee++,F(ve,ae,de,{end:w});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ve);ve=ae}else if(P(ae)){if(A(ve))ee++,Z(G(ve),ae,de,{end:w});else if(C(ve)||x(ve))ee++,Z(ve,ae,de,{end:w});else if(I(ve))ee++,Z(ve.readable,ae,de,{end:w});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ve);ve=ae}else ve=u.from(ae)}return(ie!=null&&ie.aborted||q!=null&&q.aborted)&&t.nextTick(Q),ve}function be(te,_e,V,{end:L}){let ie=!1;if(_e.on("close",()=>{ie||V(new b)}),te.pipe(_e,{end:!1}),L){let q=function(){ie=!0,_e.end()};B(te)?t.nextTick(q):te.once("end",q)}else V();return s(te,{readable:!0,writable:!1},q=>{let K=te._readableState;q&&q.code==="ERR_STREAM_PREMATURE_CLOSE"&&K&&K.ended&&!K.errored&&!K.errorEmitted?te.once("end",V).once("error",V):V(q)}),s(_e,{readable:!1,writable:!0},V)}e.exports={pipelineImpl:X,pipeline:R}}),Vo=ge((p,e)=>{ue(),ce(),he();var{pipeline:t}=rs(),i=pt(),{destroyer:o}=Wt(),{isNodeStream:r,isReadable:n,isWritable:s,isWebStream:a,isTransformStream:l,isWritableStream:u,isReadableStream:c}=mt(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:y,ERR_MISSING_ARGS:f}}=Ge(),m=At();e.exports=function(...b){if(b.length===0)throw new f("streams");if(b.length===1)return i.from(b[0]);let E=[...b];if(typeof b[0]=="function"&&(b[0]=i.from(b[0])),typeof b[b.length-1]=="function"){let T=b.length-1;b[T]=i.from(b[T])}for(let T=0;T<b.length;++T)if(!(!r(b[T])&&!a(b[T]))){if(T<b.length-1&&!(n(b[T])||c(b[T])||l(b[T])))throw new y(`streams[${T}]`,E[T],"must be readable");if(T>0&&!(s(b[T])||u(b[T])||l(b[T])))throw new y(`streams[${T}]`,E[T],"must be writable")}let g,_,x,v,A;function S(T){let z=v;v=null,z?z(T):T?A.destroy(T):!B&&!C&&A.destroy()}let I=b[0],P=t(b,S),C=!!(s(I)||u(I)||l(I)),B=!!(n(P)||c(P)||l(P));if(A=new i({writableObjectMode:!!(I!=null&&I.writableObjectMode),readableObjectMode:!!(P!=null&&P.readableObjectMode),writable:C,readable:B}),C){if(r(I))A._write=function(z,U,D){I.write(z,U)?D():g=D},A._final=function(z){I.end(),_=z},I.on("drain",function(){if(g){let z=g;g=null,z()}});else if(a(I)){let z=(l(I)?I.writable:I).getWriter();A._write=async function(U,D,le){try{await z.ready,z.write(U).catch(()=>{}),le()}catch(Y){le(Y)}},A._final=async function(U){try{await z.ready,z.close().catch(()=>{}),_=U}catch(D){U(D)}}}let T=l(P)?P.readable:P;m(T,()=>{if(_){let z=_;_=null,z()}})}if(B){if(r(P))P.on("readable",function(){if(x){let T=x;x=null,T()}}),P.on("end",function(){A.push(null)}),A._read=function(){for(;;){let T=P.read();if(T===null){x=A._read;return}if(!A.push(T))return}};else if(a(P)){let T=(l(P)?P.readable:P).getReader();A._read=async function(){for(;;)try{let{value:z,done:U}=await T.read();if(!A.push(z))return;if(U){A.push(null);return}}catch{return}}}}return A._destroy=function(T,z){!T&&v!==null&&(T=new d),x=null,g=null,_=null,v===null?z(T):(v=z,r(P)&&o(P,T))},A}}),bl=ge((p,e)=>{ue(),ce(),he();var t=globalThis.AbortController||rr().AbortController,{codes:{ERR_INVALID_ARG_VALUE:i,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:n},AbortError:s}=Ge(),{validateAbortSignal:a,validateInteger:l,validateObject:u}=ir(),c=De().Symbol("kWeak"),d=De().Symbol("kResistStopPropagation"),{finished:y}=At(),f=Vo(),{addAbortSignalNoValidate:m}=zr(),{isWritable:b,isNodeStream:E}=mt(),{deprecate:g}=Ve(),{ArrayPrototypePush:_,Boolean:x,MathFloor:v,Number:A,NumberIsNaN:S,Promise:I,PromiseReject:P,PromiseResolve:C,PromisePrototypeThen:B,Symbol:T}=De(),z=T("kEmpty"),U=T("kEof");function D(q,K){if(K!=null&&u(K,"options"),K?.signal!=null&&a(K.signal,"options.signal"),E(q)&&!b(q))throw new i("stream",q,"must be writable");let Q=f(this,q);return K!=null&&K.signal&&m(K.signal,Q),Q}function le(q,K){if(typeof q!="function")throw new o("fn",["Function","AsyncFunction"],q);K!=null&&u(K,"options"),K?.signal!=null&&a(K.signal,"options.signal");let Q=1;K?.concurrency!=null&&(Q=v(K.concurrency));let ye=Q-1;return K?.highWaterMark!=null&&(ye=v(K.highWaterMark)),l(Q,"options.concurrency",1),l(ye,"options.highWaterMark",0),ye+=Q,(async function*(){let oe=Ve().AbortSignalAny([K?.signal].filter(x)),M=this,W=[],ee={signal:oe},de,pe,ve=!1,H=0;function me(){ve=!0,we()}function we(){H-=1,ae()}function ae(){pe&&!ve&&H<Q&&W.length<ye&&(pe(),pe=null)}async function Re(){try{for await(let h of M){if(ve)return;if(oe.aborted)throw new s;try{if(h=q(h,ee),h===z)continue;h=C(h)}catch(w){h=P(w)}H+=1,B(h,we,me),W.push(h),de&&(de(),de=null),!ve&&(W.length>=ye||H>=Q)&&await new I(w=>{pe=w})}W.push(U)}catch(h){let w=P(h);B(w,we,me),W.push(w)}finally{ve=!0,de&&(de(),de=null)}}Re();try{for(;;){for(;W.length>0;){let h=await W[0];if(h===U)return;if(oe.aborted)throw new s;h!==z&&(yield h),W.shift(),ae()}await new I(h=>{de=h})}}finally{ve=!0,pe&&(pe(),pe=null)}}).call(this)}function Y(q=void 0){return q!=null&&u(q,"options"),q?.signal!=null&&a(q.signal,"options.signal"),(async function*(){let K=0;for await(let ye of this){var Q;if(q!=null&&(Q=q.signal)!==null&&Q!==void 0&&Q.aborted)throw new s({cause:q.signal.reason});yield[K++,ye]}}).call(this)}async function G(q,K=void 0){for await(let Q of R.call(this,q,K))return!0;return!1}async function re(q,K=void 0){if(typeof q!="function")throw new o("fn",["Function","AsyncFunction"],q);return!await G.call(this,async(...Q)=>!await q(...Q),K)}async function F(q,K){for await(let Q of R.call(this,q,K))return Q}async function Z(q,K){if(typeof q!="function")throw new o("fn",["Function","AsyncFunction"],q);async function Q(ye,oe){return await q(ye,oe),z}for await(let ye of le.call(this,Q,K));}function R(q,K){if(typeof q!="function")throw new o("fn",["Function","AsyncFunction"],q);async function Q(ye,oe){return await q(ye,oe)?ye:z}return le.call(this,Q,K)}var X=class extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function be(q,K,Q){var ye;if(typeof q!="function")throw new o("reducer",["Function","AsyncFunction"],q);Q!=null&&u(Q,"options"),Q?.signal!=null&&a(Q.signal,"options.signal");let oe=arguments.length>1;if(Q!=null&&(ye=Q.signal)!==null&&ye!==void 0&&ye.aborted){let pe=new s(void 0,{cause:Q.signal.reason});throw this.once("error",()=>{}),await y(this.destroy(pe)),pe}let M=new t,W=M.signal;if(Q!=null&&Q.signal){let pe={once:!0,[c]:this,[d]:!0};Q.signal.addEventListener("abort",()=>M.abort(),pe)}let ee=!1;try{for await(let pe of this){var de;if(ee=!0,Q!=null&&(de=Q.signal)!==null&&de!==void 0&&de.aborted)throw new s;oe?K=await q(K,pe,{signal:W}):(K=pe,oe=!0)}if(!ee&&!oe)throw new X}finally{M.abort()}return K}async function te(q){q!=null&&u(q,"options"),q?.signal!=null&&a(q.signal,"options.signal");let K=[];for await(let ye of this){var Q;if(q!=null&&(Q=q.signal)!==null&&Q!==void 0&&Q.aborted)throw new s(void 0,{cause:q.signal.reason});_(K,ye)}return K}function _e(q,K){let Q=le.call(this,q,K);return(async function*(){for await(let ye of Q)yield*ye}).call(this)}function V(q){if(q=A(q),S(q))return 0;if(q<0)throw new n("number",">= 0",q);return q}function L(q,K=void 0){return K!=null&&u(K,"options"),K?.signal!=null&&a(K.signal,"options.signal"),q=V(q),(async function*(){var Q;if(K!=null&&(Q=K.signal)!==null&&Q!==void 0&&Q.aborted)throw new s;for await(let oe of this){var ye;if(K!=null&&(ye=K.signal)!==null&&ye!==void 0&&ye.aborted)throw new s;q--<=0&&(yield oe)}}).call(this)}function ie(q,K=void 0){return K!=null&&u(K,"options"),K?.signal!=null&&a(K.signal,"options.signal"),q=V(q),(async function*(){var Q;if(K!=null&&(Q=K.signal)!==null&&Q!==void 0&&Q.aborted)throw new s;for await(let oe of this){var ye;if(K!=null&&(ye=K.signal)!==null&&ye!==void 0&&ye.aborted)throw new s;if(q-- >0&&(yield oe),q<=0)return}}).call(this)}e.exports.streamReturningOperators={asIndexedPairs:g(Y,"readable.asIndexedPairs will be removed in a future version."),drop:L,filter:R,flatMap:_e,map:le,take:ie,compose:D},e.exports.promiseReturningOperators={every:re,forEach:Z,reduce:be,toArray:te,some:G,find:F}}),Ko=ge((p,e)=>{ue(),ce(),he();var{ArrayPrototypePop:t,Promise:i}=De(),{isIterable:o,isNodeStream:r,isWebStream:n}=mt(),{pipelineImpl:s}=rs(),{finished:a}=At();Yo();function l(...u){return new i((c,d)=>{let y,f,m=u[u.length-1];if(m&&typeof m=="object"&&!r(m)&&!o(m)&&!n(m)){let b=t(u);y=b.signal,f=b.end}s(u,(b,E)=>{b?d(b):c(E)},{signal:y,end:f})})}e.exports={finished:a,pipeline:l}}),Yo=ge((p,e)=>{ue(),ce(),he();var{Buffer:t}=(Ue(),Me(Be)),{ObjectDefineProperty:i,ObjectKeys:o,ReflectApply:r}=De(),{promisify:{custom:n}}=Ve(),{streamReturningOperators:s,promiseReturningOperators:a}=bl(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=Ge(),u=Vo(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:d}=Hr(),{pipeline:y}=rs(),{destroyer:f}=Wt(),m=At(),b=Ko(),E=mt(),g=e.exports=es().Stream;g.isDestroyed=E.isDestroyed,g.isDisturbed=E.isDisturbed,g.isErrored=E.isErrored,g.isReadable=E.isReadable,g.isWritable=E.isWritable,g.Readable=qr();for(let x of o(s)){let v=function(...S){if(new.target)throw l();return g.Readable.from(r(A,this,S))},A=s[x];i(v,"name",{__proto__:null,value:A.name}),i(v,"length",{__proto__:null,value:A.length}),i(g.Readable.prototype,x,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}for(let x of o(a)){let v=function(...S){if(new.target)throw l();return r(A,this,S)},A=a[x];i(v,"name",{__proto__:null,value:A.name}),i(v,"length",{__proto__:null,value:A.length}),i(g.Readable.prototype,x,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}g.Writable=ts(),g.Duplex=pt(),g.Transform=$o(),g.PassThrough=Go(),g.pipeline=y;var{addAbortSignal:_}=zr();g.addAbortSignal=_,g.finished=m,g.destroy=f,g.compose=u,g.setDefaultHighWaterMark=c,g.getDefaultHighWaterMark=d,i(g,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),i(y,n,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),i(m,n,{__proto__:null,enumerable:!0,get(){return b.finished}}),g.Stream=g,g._isUint8Array=function(x){return x instanceof Uint8Array},g._uint8ArrayToBuffer=function(x){return t.from(x.buffer,x.byteOffset,x.byteLength)}}),Nt=ge((p,e)=>{ue(),ce(),he();var t=Yo(),i=Ko(),o=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=o,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return i}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}),vl=ge((p,e)=>{ue(),ce(),he(),typeof Object.create=="function"?e.exports=function(t,i){i&&(t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,i){if(i){t.super_=i;var o=function(){};o.prototype=i.prototype,t.prototype=new o,t.prototype.constructor=t}}}),wl=ge((p,e)=>{ue(),ce(),he();var{Buffer:t}=(Ue(),Me(Be)),i=Symbol.for("BufferList");function o(r){if(!(this instanceof o))return new o(r);o._init.call(this,r)}o._init=function(r){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,r&&this.append(r)},o.prototype._new=function(r){return new o(r)},o.prototype._offset=function(r){if(r===0)return[0,0];let n=0;for(let s=0;s<this._bufs.length;s++){let a=n+this._bufs[s].length;if(r<a||s===this._bufs.length-1)return[s,r-n];n=a}},o.prototype._reverseOffset=function(r){let n=r[0],s=r[1];for(let a=0;a<n;a++)s+=this._bufs[a].length;return s},o.prototype.getBuffers=function(){return this._bufs},o.prototype.get=function(r){if(r>this.length||r<0)return;let n=this._offset(r);return this._bufs[n[0]][n[1]]},o.prototype.slice=function(r,n){return typeof r=="number"&&r<0&&(r+=this.length),typeof n=="number"&&n<0&&(n+=this.length),this.copy(null,0,r,n)},o.prototype.copy=function(r,n,s,a){if((typeof s!="number"||s<0)&&(s=0),(typeof a!="number"||a>this.length)&&(a=this.length),s>=this.length||a<=0)return r||t.alloc(0);let l=!!r,u=this._offset(s),c=a-s,d=c,y=l&&n||0,f=u[1];if(s===0&&a===this.length){if(!l)return this._bufs.length===1?this._bufs[0]:t.concat(this._bufs,this.length);for(let m=0;m<this._bufs.length;m++)this._bufs[m].copy(r,y),y+=this._bufs[m].length;return r}if(d<=this._bufs[u[0]].length-f)return l?this._bufs[u[0]].copy(r,n,f,f+d):this._bufs[u[0]].slice(f,f+d);l||(r=t.allocUnsafe(c));for(let m=u[0];m<this._bufs.length;m++){let b=this._bufs[m].length-f;if(d>b)this._bufs[m].copy(r,y,f),y+=b;else{this._bufs[m].copy(r,y,f,f+d),y+=b;break}d-=b,f&&(f=0)}return r.length>y?r.slice(0,y):r},o.prototype.shallowSlice=function(r,n){if(r=r||0,n=typeof n!="number"?this.length:n,r<0&&(r+=this.length),n<0&&(n+=this.length),r===n)return this._new();let s=this._offset(r),a=this._offset(n),l=this._bufs.slice(s[0],a[0]+1);return a[1]===0?l.pop():l[l.length-1]=l[l.length-1].slice(0,a[1]),s[1]!==0&&(l[0]=l[0].slice(s[1])),this._new(l)},o.prototype.toString=function(r,n,s){return this.slice(n,s).toString(r)},o.prototype.consume=function(r){if(r=Math.trunc(r),Number.isNaN(r)||r<=0)return this;for(;this._bufs.length;)if(r>=this._bufs[0].length)r-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(r),this.length-=r;break}return this},o.prototype.duplicate=function(){let r=this._new();for(let n=0;n<this._bufs.length;n++)r.append(this._bufs[n]);return r},o.prototype.append=function(r){return this._attach(r,o.prototype._appendBuffer)},o.prototype.prepend=function(r){return this._attach(r,o.prototype._prependBuffer,!0)},o.prototype._attach=function(r,n,s){if(r==null)return this;if(r.buffer)n.call(this,t.from(r.buffer,r.byteOffset,r.byteLength));else if(Array.isArray(r)){let[a,l]=s?[r.length-1,-1]:[0,1];for(let u=a;u>=0&&u<r.length;u+=l)this._attach(r[u],n,s)}else if(this._isBufferList(r)){let[a,l]=s?[r._bufs.length-1,-1]:[0,1];for(let u=a;u>=0&&u<r._bufs.length;u+=l)this._attach(r._bufs[u],n,s)}else typeof r=="number"&&(r=r.toString()),n.call(this,t.from(r));return this},o.prototype._appendBuffer=function(r){this._bufs.push(r),this.length+=r.length},o.prototype._prependBuffer=function(r){this._bufs.unshift(r),this.length+=r.length},o.prototype.indexOf=function(r,n,s){if(s===void 0&&typeof n=="string"&&(s=n,n=void 0),typeof r=="function"||Array.isArray(r))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof r=="number"?r=t.from([r]):typeof r=="string"?r=t.from(r,s):this._isBufferList(r)?r=r.slice():Array.isArray(r.buffer)?r=t.from(r.buffer,r.byteOffset,r.byteLength):t.isBuffer(r)||(r=t.from(r)),n=Number(n||0),isNaN(n)&&(n=0),n<0&&(n=this.length+n),n<0&&(n=0),r.length===0)return n>this.length?this.length:n;let a=this._offset(n),l=a[0],u=a[1];for(;l<this._bufs.length;l++){let c=this._bufs[l];for(;u<c.length;)if(c.length-u>=r.length){let d=c.indexOf(r,u);if(d!==-1)return this._reverseOffset([l,d]);u=c.length-r.length+1}else{let d=this._reverseOffset([l,u]);if(this._match(d,r))return d;u++}u=0}return-1},o.prototype._match=function(r,n){if(this.length-r<n.length)return!1;for(let s=0;s<n.length;s++)if(this.get(r+s)!==n[s])return!1;return!0},(function(){let r={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let n in r)(function(s){r[s]===null?o.prototype[s]=function(a,l){return this.slice(a,a+l)[s](0,l)}:o.prototype[s]=function(a=0){return this.slice(a,a+r[s])[s](0)}})(n)})(),o.prototype._isBufferList=function(r){return r instanceof o||o.isBufferList(r)},o.isBufferList=function(r){return r!=null&&r[i]},e.exports=o}),_l=ge((p,e)=>{ue(),ce(),he();var t=Nt().Duplex,i=vl(),o=wl();function r(n){if(!(this instanceof r))return new r(n);if(typeof n=="function"){this._callback=n;let s=(function(a){this._callback&&(this._callback(a),this._callback=null)}).bind(this);this.on("pipe",function(a){a.on("error",s)}),this.on("unpipe",function(a){a.removeListener("error",s)}),n=null}o._init.call(this,n),t.call(this)}i(r,t),Object.assign(r.prototype,o.prototype),r.prototype._new=function(n){return new r(n)},r.prototype._write=function(n,s,a){this._appendBuffer(n),typeof a=="function"&&a()},r.prototype._read=function(n){if(!this.length)return this.push(null);n=Math.min(n,this.length),this.push(this.slice(0,n)),this.consume(n)},r.prototype.end=function(n){t.prototype.end.call(this,n),this._callback&&(this._callback(null,this.slice()),this._callback=null)},r.prototype._destroy=function(n,s){this._bufs.length=0,this.length=0,s(n)},r.prototype._isBufferList=function(n){return n instanceof r||n instanceof o||r.isBufferList(n)},r.isBufferList=o.isBufferList,e.exports=r,e.exports.BufferListStream=r,e.exports.BufferList=o}),El=ge((p,e)=>{ue(),ce(),he();var t=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};e.exports=t}),Qo=ge((p,e)=>{ue(),ce(),he();var t=e.exports,{Buffer:i}=(Ue(),Me(Be));t.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},t.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},t.requiredHeaderFlagsErrors={};for(let r in t.requiredHeaderFlags){let n=t.requiredHeaderFlags[r];t.requiredHeaderFlagsErrors[r]="Invalid header flag bits, must be 0x"+n.toString(16)+" for "+t.types[r]+" packet"}t.codes={};for(let r in t.types){let n=t.types[r];t.codes[n]=r}t.CMD_SHIFT=4,t.CMD_MASK=240,t.DUP_MASK=8,t.QOS_MASK=3,t.QOS_SHIFT=1,t.RETAIN_MASK=1,t.VARBYTEINT_MASK=127,t.VARBYTEINT_FIN_MASK=128,t.VARBYTEINT_MAX=268435455,t.SESSIONPRESENT_MASK=1,t.SESSIONPRESENT_HEADER=i.from([t.SESSIONPRESENT_MASK]),t.CONNACK_HEADER=i.from([t.codes.connack<<t.CMD_SHIFT]),t.USERNAME_MASK=128,t.PASSWORD_MASK=64,t.WILL_RETAIN_MASK=32,t.WILL_QOS_MASK=24,t.WILL_QOS_SHIFT=3,t.WILL_FLAG_MASK=4,t.CLEAN_SESSION_MASK=2,t.CONNECT_HEADER=i.from([t.codes.connect<<t.CMD_SHIFT]),t.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},t.propertiesCodes={};for(let r in t.properties){let n=t.properties[r];t.propertiesCodes[n]=r}t.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function o(r){return[0,1,2].map(n=>[0,1].map(s=>[0,1].map(a=>{let l=i.alloc(1);return l.writeUInt8(t.codes[r]<<t.CMD_SHIFT|(s?t.DUP_MASK:0)|n<<t.QOS_SHIFT|a,0,!0),l})))}t.PUBLISH_HEADER=o("publish"),t.SUBSCRIBE_HEADER=o("subscribe"),t.SUBSCRIBE_OPTIONS_QOS_MASK=3,t.SUBSCRIBE_OPTIONS_NL_MASK=1,t.SUBSCRIBE_OPTIONS_NL_SHIFT=2,t.SUBSCRIBE_OPTIONS_RAP_MASK=1,t.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,t.SUBSCRIBE_OPTIONS_RH_MASK=3,t.SUBSCRIBE_OPTIONS_RH_SHIFT=4,t.SUBSCRIBE_OPTIONS_RH=[0,16,32],t.SUBSCRIBE_OPTIONS_NL=4,t.SUBSCRIBE_OPTIONS_RAP=8,t.SUBSCRIBE_OPTIONS_QOS=[0,1,2],t.UNSUBSCRIBE_HEADER=o("unsubscribe"),t.ACKS={unsuback:o("unsuback"),puback:o("puback"),pubcomp:o("pubcomp"),pubrel:o("pubrel"),pubrec:o("pubrec")},t.SUBACK_HEADER=i.from([t.codes.suback<<t.CMD_SHIFT]),t.VERSION3=i.from([3]),t.VERSION4=i.from([4]),t.VERSION5=i.from([5]),t.VERSION131=i.from([131]),t.VERSION132=i.from([132]),t.QOS=[0,1,2].map(r=>i.from([r])),t.EMPTY={pingreq:i.from([t.codes.pingreq<<4,0]),pingresp:i.from([t.codes.pingresp<<4,0]),disconnect:i.from([t.codes.disconnect<<4,0])},t.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},t.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},t.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},t.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),Sl=ge((p,e)=>{ue(),ce(),he();var t=1e3,i=t*60,o=i*60,r=o*24,n=r*7,s=r*365.25;e.exports=function(d,y){y=y||{};var f=typeof d;if(f==="string"&&d.length>0)return a(d);if(f==="number"&&isFinite(d))return y.long?u(d):l(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function a(d){if(d=String(d),!(d.length>100)){var y=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(y){var f=parseFloat(y[1]),m=(y[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return f*s;case"weeks":case"week":case"w":return f*n;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*o;case"minutes":case"minute":case"mins":case"min":case"m":return f*i;case"seconds":case"second":case"secs":case"sec":case"s":return f*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function l(d){var y=Math.abs(d);return y>=r?Math.round(d/r)+"d":y>=o?Math.round(d/o)+"h":y>=i?Math.round(d/i)+"m":y>=t?Math.round(d/t)+"s":d+"ms"}function u(d){var y=Math.abs(d);return y>=r?c(d,y,r,"day"):y>=o?c(d,y,o,"hour"):y>=i?c(d,y,i,"minute"):y>=t?c(d,y,t,"second"):d+" ms"}function c(d,y,f,m){var b=y>=f*1.5;return Math.round(d/f)+" "+m+(b?"s":"")}}),xl=ge((p,e)=>{ue(),ce(),he();function t(i){r.debug=r,r.default=r,r.coerce=c,r.disable=l,r.enable=s,r.enabled=u,r.humanize=Sl(),r.destroy=d,Object.keys(i).forEach(y=>{r[y]=i[y]}),r.names=[],r.skips=[],r.formatters={};function o(y){let f=0;for(let m=0;m<y.length;m++)f=(f<<5)-f+y.charCodeAt(m),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=o;function r(y){let f,m=null,b,E;function g(..._){if(!g.enabled)return;let x=g,v=Number(new Date),A=v-(f||v);x.diff=A,x.prev=f,x.curr=v,f=v,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let S=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(I,P)=>{if(I==="%%")return"%";S++;let C=r.formatters[P];if(typeof C=="function"){let B=_[S];I=C.call(x,B),_.splice(S,1),S--}return I}),r.formatArgs.call(x,_),(x.log||r.log).apply(x,_)}return g.namespace=y,g.useColors=r.useColors(),g.color=r.selectColor(y),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(b!==r.namespaces&&(b=r.namespaces,E=r.enabled(y)),E),set:_=>{m=_}}),typeof r.init=="function"&&r.init(g),g}function n(y,f){let m=r(this.namespace+(typeof f>"u"?":":f)+y);return m.log=this.log,m}function s(y){r.save(y),r.namespaces=y,r.names=[],r.skips=[];let f=(typeof y=="string"?y:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let m of f)m[0]==="-"?r.skips.push(m.slice(1)):r.names.push(m)}function a(y,f){let m=0,b=0,E=-1,g=0;for(;m<y.length;)if(b<f.length&&(f[b]===y[m]||f[b]==="*"))f[b]==="*"?(E=b,g=m,b++):(m++,b++);else if(E!==-1)b=E+1,g++,m=g;else return!1;for(;b<f.length&&f[b]==="*";)b++;return b===f.length}function l(){let y=[...r.names,...r.skips.map(f=>"-"+f)].join(",");return r.enable(""),y}function u(y){for(let f of r.skips)if(a(y,f))return!1;for(let f of r.names)if(a(y,f))return!0;return!1}function c(y){return y instanceof Error?y.stack||y.message:y}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}e.exports=t}),gt=ge((p,e)=>{ue(),ce(),he(),p.formatArgs=i,p.save=o,p.load=r,p.useColors=t,p.storage=n(),p.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),p.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let a;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(a=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(a[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let l="color: "+this.color;a.splice(1,0,l,"color: inherit");let u=0,c=0;a[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(u++,d==="%c"&&(c=u))}),a.splice(c,0,l)}p.log=console.debug||console.log||(()=>{});function o(a){try{a?p.storage.setItem("debug",a):p.storage.removeItem("debug")}catch{}}function r(){let a;try{a=p.storage.getItem("debug")||p.storage.getItem("DEBUG")}catch{}return!a&&typeof Ne<"u"&&"env"in Ne&&(a=Ne.env.DEBUG),a}function n(){try{return localStorage}catch{}}e.exports=xl()(p);var{formatters:s}=e.exports;s.j=function(a){try{return JSON.stringify(a)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}}),Al=ge((p,e)=>{ue(),ce(),he();var t=_l(),{EventEmitter:i}=(Pt(),Me(xt)),o=El(),r=Qo(),n=gt()("mqtt-packet:parser"),s=class on extends i{constructor(){super(),this.parser=this.constructor.parser}static parser(l){return this instanceof on?(this.settings=l||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new on().parser(l)}_resetState(){n("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new o,this.error=null,this._list=t(),this._stateCounter=0}parse(l){for(this.error&&this._resetState(),this._list.append(l),n("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,n("parse: state complete. _stateCounter is now: %d",this._stateCounter),n("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return n("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let l=this._list.readUInt8(0),u=l>>r.CMD_SHIFT;this.packet.cmd=r.types[u];let c=l&15,d=r.requiredHeaderFlags[u];return d!=null&&c!==d?this._emitError(new Error(r.requiredHeaderFlagsErrors[u])):(this.packet.retain=(l&r.RETAIN_MASK)!==0,this.packet.qos=l>>r.QOS_SHIFT&r.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(l&r.DUP_MASK)!==0,n("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let l=this._parseVarByteNum(!0);return l&&(this.packet.length=l.value,this._list.consume(l.bytes)),n("_parseLength %d",l.value),!!l}_parsePayload(){n("_parsePayload: payload %O",this._list);let l=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}l=!0}return n("_parsePayload complete result: %s",l),l}_parseConnect(){n("_parseConnect");let l,u,c,d,y={},f=this.packet,m=this._parseString();if(m===null)return this._emitError(new Error("Cannot parse protocolId"));if(m!=="MQTT"&&m!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(f.protocolId=m,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(f.protocolVersion=this._list.readUInt8(this._pos),f.protocolVersion>=128&&(f.bridgeMode=!0,f.protocolVersion=f.protocolVersion-128),f.protocolVersion!==3&&f.protocolVersion!==4&&f.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));y.username=this._list.readUInt8(this._pos)&r.USERNAME_MASK,y.password=this._list.readUInt8(this._pos)&r.PASSWORD_MASK,y.will=this._list.readUInt8(this._pos)&r.WILL_FLAG_MASK;let b=!!(this._list.readUInt8(this._pos)&r.WILL_RETAIN_MASK),E=(this._list.readUInt8(this._pos)&r.WILL_QOS_MASK)>>r.WILL_QOS_SHIFT;if(y.will)f.will={},f.will.retain=b,f.will.qos=E;else{if(b)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(E)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(f.clean=(this._list.readUInt8(this._pos)&r.CLEAN_SESSION_MASK)!==0,this._pos++,f.keepalive=this._parseNum(),f.keepalive===-1)return this._emitError(new Error("Packet too short"));if(f.protocolVersion===5){let _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(f.properties=_)}let g=this._parseString();if(g===null)return this._emitError(new Error("Packet too short"));if(f.clientId=g,n("_parseConnect: packet.clientId: %s",f.clientId),y.will){if(f.protocolVersion===5){let _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(f.will.properties=_)}if(l=this._parseString(),l===null)return this._emitError(new Error("Cannot parse will topic"));if(f.will.topic=l,n("_parseConnect: packet.will.topic: %s",f.will.topic),u=this._parseBuffer(),u===null)return this._emitError(new Error("Cannot parse will payload"));f.will.payload=u,n("_parseConnect: packet.will.paylaod: %s",f.will.payload)}if(y.username){if(d=this._parseString(),d===null)return this._emitError(new Error("Cannot parse username"));f.username=d,n("_parseConnect: packet.username: %s",f.username)}if(y.password){if(c=this._parseBuffer(),c===null)return this._emitError(new Error("Cannot parse password"));f.password=c}return this.settings=f,n("_parseConnect: complete"),f}_parseConnack(){n("_parseConnack");let l=this.packet;if(this._list.length<1)return null;let u=this._list.readUInt8(this._pos++);if(u>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(l.sessionPresent=!!(u&r.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?l.reasonCode=this._list.readUInt8(this._pos++):l.reasonCode=0;else{if(this._list.length<2)return null;l.returnCode=this._list.readUInt8(this._pos++)}if(l.returnCode===-1||l.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}n("_parseConnack: complete")}_parsePublish(){n("_parsePublish");let l=this.packet;if(l.topic=this._parseString(),l.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(l.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(l.properties=u)}l.payload=this._list.slice(this._pos,l.length),n("_parsePublish: payload from buffer list: %o",l.payload)}}_parseSubscribe(){n("_parseSubscribe");let l=this.packet,u,c,d,y,f,m,b;if(l.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(l.properties=E)}if(l.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<l.length;){if(u=this._parseString(),u===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=l.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(c=this._parseByte(),this.settings.protocolVersion===5){if(c&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(c&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(d=c&r.SUBSCRIBE_OPTIONS_QOS_MASK,d>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(m=(c>>r.SUBSCRIBE_OPTIONS_NL_SHIFT&r.SUBSCRIBE_OPTIONS_NL_MASK)!==0,f=(c>>r.SUBSCRIBE_OPTIONS_RAP_SHIFT&r.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,y=c>>r.SUBSCRIBE_OPTIONS_RH_SHIFT&r.SUBSCRIBE_OPTIONS_RH_MASK,y>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));b={topic:u,qos:d},this.settings.protocolVersion===5?(b.nl=m,b.rap=f,b.rh=y):this.settings.bridgeMode&&(b.rh=0,b.rap=!0,b.nl=!0),n("_parseSubscribe: push subscription `%s` to subscription",b),l.subscriptions.push(b)}}}_parseSuback(){n("_parseSuback");let l=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(l.properties=u)}if(l.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let u=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!r.MQTT5_SUBACK_CODES[u])return this._emitError(new Error("Invalid suback code"))}else if(u>2&&u!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(u)}}}_parseUnsubscribe(){n("_parseUnsubscribe");let l=this.packet;if(l.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(l.properties=u)}if(l.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<l.length;){let u=this._parseString();if(u===null)return this._emitError(new Error("Cannot parse topic"));n("_parseUnsubscribe: push topic `%s` to unsubscriptions",u),l.unsubscriptions.push(u)}}}_parseUnsuback(){n("_parseUnsuback");let l=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&l.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(l.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let u=this._parseProperties();for(Object.getOwnPropertyNames(u).length&&(l.properties=u),l.granted=[];this._pos<this.packet.length;){let c=this._list.readUInt8(this._pos++);if(!r.MQTT5_UNSUBACK_CODES[c])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(c)}}}_parseConfirmation(){n("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let l=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(l.length>2){switch(l.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!r.MQTT5_PUBACK_PUBREC_CODES[l.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!r.MQTT5_PUBREL_PUBCOMP_CODES[l.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}n("_parseConfirmation: packet.reasonCode `%d`",l.reasonCode)}else l.reasonCode=0;if(l.length>3){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(l.properties=u)}}return!0}_parseDisconnect(){let l=this.packet;if(n("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(l.reasonCode=this._parseByte(),r.MQTT5_DISCONNECT_CODES[l.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):l.reasonCode=0;let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(l.properties=u)}return n("_parseDisconnect result: true"),!0}_parseAuth(){n("_parseAuth");let l=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(l.reasonCode=this._parseByte(),!r.MQTT5_AUTH_CODES[l.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let u=this._parseProperties();return Object.getOwnPropertyNames(u).length&&(l.properties=u),n("_parseAuth: result: true"),!0}_parseMessageId(){let l=this.packet;return l.messageId=this._parseNum(),l.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(n("_parseMessageId: packet.messageId %d",l.messageId),!0)}_parseString(l){let u=this._parseNum(),c=u+this._pos;if(u===-1||c>this._list.length||c>this.packet.length)return null;let d=this._list.toString("utf8",this._pos,c);return this._pos+=u,n("_parseString: result: %s",d),d}_parseStringPair(){return n("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let l=this._parseNum(),u=l+this._pos;if(l===-1||u>this._list.length||u>this.packet.length)return null;let c=this._list.slice(this._pos,u);return this._pos+=l,n("_parseBuffer: result: %o",c),c}_parseNum(){if(this._list.length-this._pos<2)return-1;let l=this._list.readUInt16BE(this._pos);return this._pos+=2,n("_parseNum: result: %s",l),l}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let l=this._list.readUInt32BE(this._pos);return this._pos+=4,n("_parse4ByteNum: result: %s",l),l}_parseVarByteNum(l){n("_parseVarByteNum");let u=4,c=0,d=1,y=0,f=!1,m,b=this._pos?this._pos:0;for(;c<u&&b+c<this._list.length;){if(m=this._list.readUInt8(b+c++),y+=d*(m&r.VARBYTEINT_MASK),d*=128,(m&r.VARBYTEINT_FIN_MASK)===0){f=!0;break}if(this._list.length<=c)break}return!f&&c===u&&this._list.length>=c&&this._emitError(new Error("Invalid variable byte integer")),b&&(this._pos+=c),f?l?f={bytes:c,value:y}:f=y:f=!1,n("_parseVarByteNum: result: %o",f),f}_parseByte(){let l;return this._pos<this._list.length&&(l=this._list.readUInt8(this._pos),this._pos++),n("_parseByte: result: %o",l),l}_parseByType(l){switch(n("_parseByType: type: %s",l),l){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){n("_parseProperties");let l=this._parseVarByteNum(),u=this._pos+l,c={};for(;this._pos<u;){let d=this._parseByte();if(!d)return this._emitError(new Error("Cannot parse property code type")),!1;let y=r.propertiesCodes[d];if(!y)return this._emitError(new Error("Unknown property")),!1;if(y==="userProperties"){c[y]||(c[y]=Object.create(null));let f=this._parseByType(r.propertiesTypes[y]);if(c[y][f.name])if(Array.isArray(c[y][f.name]))c[y][f.name].push(f.value);else{let m=c[y][f.name];c[y][f.name]=[m],c[y][f.name].push(f.value)}else c[y][f.name]=f.value;continue}c[y]?Array.isArray(c[y])?c[y].push(this._parseByType(r.propertiesTypes[y])):(c[y]=[c[y]],c[y].push(this._parseByType(r.propertiesTypes[y]))):c[y]=this._parseByType(r.propertiesTypes[y])}return c}_newPacket(){return n("_newPacket"),this.packet&&(this._list.consume(this.packet.length),n("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),n("_newPacket: new packet"),this.packet=new o,this._pos=0,!0}_emitError(l){n("_emitError",l),this.error=l,this.emit("error",l)}};e.exports=s}),kl=ge((p,e)=>{ue(),ce(),he();var{Buffer:t}=(Ue(),Me(Be)),i=65536,o={},r=t.isBuffer(t.from([1,2]).subarray(0,1));function n(u){let c=t.allocUnsafe(2);return c.writeUInt8(u>>8,0),c.writeUInt8(u&255,1),c}function s(){for(let u=0;u<i;u++)o[u]=n(u)}function a(u){let c=0,d=0,y=t.allocUnsafe(4);do c=u%128|0,u=u/128|0,u>0&&(c=c|128),y.writeUInt8(c,d++);while(u>0&&d<4);return u>0&&(d=0),r?y.subarray(0,d):y.slice(0,d)}function l(u){let c=t.allocUnsafe(4);return c.writeUInt32BE(u,0),c}e.exports={cache:o,generateCache:s,generateNumber:n,genBufVariableByteInt:a,generate4ByteBuffer:l}}),Il=ge((p,e)=>{ue(),ce(),he(),typeof Ne>"u"||!Ne.version||Ne.version.indexOf("v0.")===0||Ne.version.indexOf("v1.")===0&&Ne.version.indexOf("v1.8.")!==0?e.exports={nextTick:t}:e.exports=Ne;function t(i,o,r,n){if(typeof i!="function")throw new TypeError('"callback" argument must be a function');var s=arguments.length,a,l;switch(s){case 0:case 1:return Ne.nextTick(i);case 2:return Ne.nextTick(function(){i.call(null,o)});case 3:return Ne.nextTick(function(){i.call(null,o,r)});case 4:return Ne.nextTick(function(){i.call(null,o,r,n)});default:for(a=new Array(s-1),l=0;l<a.length;)a[l++]=arguments[l];return Ne.nextTick(function(){i.apply(null,a)})}}}),Xo=ge((p,e)=>{ue(),ce(),he();var t=Qo(),{Buffer:i}=(Ue(),Me(Be)),o=i.allocUnsafe(0),r=i.from([0]),n=kl(),s=Il().nextTick,a=gt()("mqtt-packet:writeToStream"),l=n.cache,u=n.generateNumber,c=n.generateCache,d=n.genBufVariableByteInt,y=n.generate4ByteBuffer,f=Y,m=!0;function b(V,L,ie){switch(a("generate called"),L.cork&&(L.cork(),s(E,L)),m&&(m=!1,c()),a("generate: packet.cmd: %s",V.cmd),V.cmd){case"connect":return g(V,L);case"connack":return _(V,L,ie);case"publish":return x(V,L,ie);case"puback":case"pubrec":case"pubrel":case"pubcomp":return v(V,L,ie);case"subscribe":return A(V,L,ie);case"suback":return S(V,L,ie);case"unsubscribe":return I(V,L,ie);case"unsuback":return P(V,L,ie);case"pingreq":case"pingresp":return C(V,L);case"disconnect":return B(V,L,ie);case"auth":return T(V,L,ie);default:return L.destroy(new Error("Unknown command")),!1}}Object.defineProperty(b,"cacheNumbers",{get(){return f===Y},set(V){V?((!l||Object.keys(l).length===0)&&(m=!0),f=Y):(m=!1,f=G)}});function E(V){V.uncork()}function g(V,L,ie){let q=V||{},K=q.protocolId||"MQTT",Q=q.protocolVersion||4,ye=q.will,oe=q.clean,M=q.keepalive||0,W=q.clientId||"",ee=q.username,de=q.password,pe=q.properties;oe===void 0&&(oe=!0);let ve=0;if(typeof K!="string"&&!i.isBuffer(K))return L.destroy(new Error("Invalid protocolId")),!1;if(ve+=K.length+2,Q!==3&&Q!==4&&Q!==5)return L.destroy(new Error("Invalid protocol version")),!1;if(ve+=1,(typeof W=="string"||i.isBuffer(W))&&(W||Q>=4)&&(W||oe))ve+=i.byteLength(W)+2;else{if(Q<4)return L.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(oe*1===0)return L.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof M!="number"||M<0||M>65535||M%1!==0)return L.destroy(new Error("Invalid keepalive")),!1;ve+=2,ve+=1;let H,me;if(Q===5){if(H=Z(L,pe),!H)return!1;ve+=H.length}if(ye){if(typeof ye!="object")return L.destroy(new Error("Invalid will")),!1;if(!ye.topic||typeof ye.topic!="string")return L.destroy(new Error("Invalid will topic")),!1;if(ve+=i.byteLength(ye.topic)+2,ve+=2,ye.payload)if(ye.payload.length>=0)typeof ye.payload=="string"?ve+=i.byteLength(ye.payload):ve+=ye.payload.length;else return L.destroy(new Error("Invalid will payload")),!1;if(me={},Q===5){if(me=Z(L,ye.properties),!me)return!1;ve+=me.length}}let we=!1;if(ee!=null)if(_e(ee))we=!0,ve+=i.byteLength(ee)+2;else return L.destroy(new Error("Invalid username")),!1;if(de!=null){if(!we)return L.destroy(new Error("Username is required to use password")),!1;if(_e(de))ve+=te(de)+2;else return L.destroy(new Error("Invalid password")),!1}L.write(t.CONNECT_HEADER),U(L,ve),F(L,K),q.bridgeMode&&(Q+=128),L.write(Q===131?t.VERSION131:Q===132?t.VERSION132:Q===4?t.VERSION4:Q===5?t.VERSION5:t.VERSION3);let ae=0;return ae|=ee!=null?t.USERNAME_MASK:0,ae|=de!=null?t.PASSWORD_MASK:0,ae|=ye&&ye.retain?t.WILL_RETAIN_MASK:0,ae|=ye&&ye.qos?ye.qos<<t.WILL_QOS_SHIFT:0,ae|=ye?t.WILL_FLAG_MASK:0,ae|=oe?t.CLEAN_SESSION_MASK:0,L.write(i.from([ae])),f(L,M),Q===5&&H.write(),F(L,W),ye&&(Q===5&&me.write(),D(L,ye.topic),F(L,ye.payload)),ee!=null&&F(L,ee),de!=null&&F(L,de),!0}function _(V,L,ie){let q=ie?ie.protocolVersion:4,K=V||{},Q=q===5?K.reasonCode:K.returnCode,ye=K.properties,oe=2;if(typeof Q!="number")return L.destroy(new Error("Invalid return code")),!1;let M=null;if(q===5){if(M=Z(L,ye),!M)return!1;oe+=M.length}return L.write(t.CONNACK_HEADER),U(L,oe),L.write(K.sessionPresent?t.SESSIONPRESENT_HEADER:r),L.write(i.from([Q])),M?.write(),!0}function x(V,L,ie){a("publish: packet: %o",V);let q=ie?ie.protocolVersion:4,K=V||{},Q=K.qos||0,ye=K.retain?t.RETAIN_MASK:0,oe=K.topic,M=K.payload||o,W=K.messageId,ee=K.properties,de=0;if(typeof oe=="string")de+=i.byteLength(oe)+2;else if(i.isBuffer(oe))de+=oe.length+2;else return L.destroy(new Error("Invalid topic")),!1;if(i.isBuffer(M)?de+=M.length:de+=i.byteLength(M),Q&&typeof W!="number")return L.destroy(new Error("Invalid messageId")),!1;Q&&(de+=2);let pe=null;if(q===5){if(pe=Z(L,ee),!pe)return!1;de+=pe.length}return L.write(t.PUBLISH_HEADER[Q][K.dup?1:0][ye?1:0]),U(L,de),f(L,te(oe)),L.write(oe),Q>0&&f(L,W),pe?.write(),a("publish: payload: %o",M),L.write(M)}function v(V,L,ie){let q=ie?ie.protocolVersion:4,K=V||{},Q=K.cmd||"puback",ye=K.messageId,oe=K.dup&&Q==="pubrel"?t.DUP_MASK:0,M=0,W=K.reasonCode,ee=K.properties,de=q===5?3:2;if(Q==="pubrel"&&(M=1),typeof ye!="number")return L.destroy(new Error("Invalid messageId")),!1;let pe=null;if(q===5&&typeof ee=="object"){if(pe=R(L,ee,ie,de),!pe)return!1;de+=pe.length}return L.write(t.ACKS[Q][M][oe][0]),de===3&&(de+=W!==0?1:-1),U(L,de),f(L,ye),q===5&&de!==2&&L.write(i.from([W])),pe!==null?pe.write():de===4&&L.write(i.from([0])),!0}function A(V,L,ie){a("subscribe: packet: ");let q=ie?ie.protocolVersion:4,K=V||{},Q=K.dup?t.DUP_MASK:0,ye=K.messageId,oe=K.subscriptions,M=K.properties,W=0;if(typeof ye!="number")return L.destroy(new Error("Invalid messageId")),!1;W+=2;let ee=null;if(q===5){if(ee=Z(L,M),!ee)return!1;W+=ee.length}if(typeof oe=="object"&&oe.length)for(let pe=0;pe<oe.length;pe+=1){let ve=oe[pe].topic,H=oe[pe].qos;if(typeof ve!="string")return L.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof H!="number")return L.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(q===5){if(typeof(oe[pe].nl||!1)!="boolean")return L.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(oe[pe].rap||!1)!="boolean")return L.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let me=oe[pe].rh||0;if(typeof me!="number"||me>2)return L.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}W+=i.byteLength(ve)+2+1}else return L.destroy(new Error("Invalid subscriptions")),!1;a("subscribe: writing to stream: %o",t.SUBSCRIBE_HEADER),L.write(t.SUBSCRIBE_HEADER[1][Q?1:0][0]),U(L,W),f(L,ye),ee!==null&&ee.write();let de=!0;for(let pe of oe){let ve=pe.topic,H=pe.qos,me=+pe.nl,we=+pe.rap,ae=pe.rh,Re;D(L,ve),Re=t.SUBSCRIBE_OPTIONS_QOS[H],q===5&&(Re|=me?t.SUBSCRIBE_OPTIONS_NL:0,Re|=we?t.SUBSCRIBE_OPTIONS_RAP:0,Re|=ae?t.SUBSCRIBE_OPTIONS_RH[ae]:0),de=L.write(i.from([Re]))}return de}function S(V,L,ie){let q=ie?ie.protocolVersion:4,K=V||{},Q=K.messageId,ye=K.granted,oe=K.properties,M=0;if(typeof Q!="number")return L.destroy(new Error("Invalid messageId")),!1;if(M+=2,typeof ye=="object"&&ye.length)for(let ee=0;ee<ye.length;ee+=1){if(typeof ye[ee]!="number")return L.destroy(new Error("Invalid qos vector")),!1;M+=1}else return L.destroy(new Error("Invalid qos vector")),!1;let W=null;if(q===5){if(W=R(L,oe,ie,M),!W)return!1;M+=W.length}return L.write(t.SUBACK_HEADER),U(L,M),f(L,Q),W!==null&&W.write(),L.write(i.from(ye))}function I(V,L,ie){let q=ie?ie.protocolVersion:4,K=V||{},Q=K.messageId,ye=K.dup?t.DUP_MASK:0,oe=K.unsubscriptions,M=K.properties,W=0;if(typeof Q!="number")return L.destroy(new Error("Invalid messageId")),!1;if(W+=2,typeof oe=="object"&&oe.length)for(let pe=0;pe<oe.length;pe+=1){if(typeof oe[pe]!="string")return L.destroy(new Error("Invalid unsubscriptions")),!1;W+=i.byteLength(oe[pe])+2}else return L.destroy(new Error("Invalid unsubscriptions")),!1;let ee=null;if(q===5){if(ee=Z(L,M),!ee)return!1;W+=ee.length}L.write(t.UNSUBSCRIBE_HEADER[1][ye?1:0][0]),U(L,W),f(L,Q),ee!==null&&ee.write();let de=!0;for(let pe=0;pe<oe.length;pe++)de=D(L,oe[pe]);return de}function P(V,L,ie){let q=ie?ie.protocolVersion:4,K=V||{},Q=K.messageId,ye=K.dup?t.DUP_MASK:0,oe=K.granted,M=K.properties,W=K.cmd,ee=0,de=2;if(typeof Q!="number")return L.destroy(new Error("Invalid messageId")),!1;if(q===5)if(typeof oe=="object"&&oe.length)for(let ve=0;ve<oe.length;ve+=1){if(typeof oe[ve]!="number")return L.destroy(new Error("Invalid qos vector")),!1;de+=1}else return L.destroy(new Error("Invalid qos vector")),!1;let pe=null;if(q===5){if(pe=R(L,M,ie,de),!pe)return!1;de+=pe.length}return L.write(t.ACKS[W][ee][ye][0]),U(L,de),f(L,Q),pe!==null&&pe.write(),q===5&&L.write(i.from(oe)),!0}function C(V,L,ie){return L.write(t.EMPTY[V.cmd])}function B(V,L,ie){let q=ie?ie.protocolVersion:4,K=V||{},Q=K.reasonCode,ye=K.properties,oe=q===5?1:0,M=null;if(q===5){if(M=R(L,ye,ie,oe),!M)return!1;oe+=M.length}return L.write(i.from([t.codes.disconnect<<4])),U(L,oe),q===5&&L.write(i.from([Q])),M!==null&&M.write(),!0}function T(V,L,ie){let q=ie?ie.protocolVersion:4,K=V||{},Q=K.reasonCode,ye=K.properties,oe=q===5?1:0;q!==5&&L.destroy(new Error("Invalid mqtt version for auth packet"));let M=R(L,ye,ie,oe);return M?(oe+=M.length,L.write(i.from([t.codes.auth<<4])),U(L,oe),L.write(i.from([Q])),M!==null&&M.write(),!0):!1}var z={};function U(V,L){if(L>t.VARBYTEINT_MAX)return V.destroy(new Error(`Invalid variable byte integer: ${L}`)),!1;let ie=z[L];return ie||(ie=d(L),L<16384&&(z[L]=ie)),a("writeVarByteInt: writing to stream: %o",ie),V.write(ie)}function D(V,L){let ie=i.byteLength(L);return f(V,ie),a("writeString: %s",L),V.write(L,"utf8")}function le(V,L,ie){D(V,L),D(V,ie)}function Y(V,L){return a("writeNumberCached: number: %d",L),a("writeNumberCached: %o",l[L]),V.write(l[L])}function G(V,L){let ie=u(L);return a("writeNumberGenerated: %o",ie),V.write(ie)}function re(V,L){let ie=y(L);return a("write4ByteNumber: %o",ie),V.write(ie)}function F(V,L){typeof L=="string"?D(V,L):L?(f(V,L.length),V.write(L)):f(V,0)}function Z(V,L){if(typeof L!="object"||L.length!=null)return{length:1,write(){be(V,{},0)}};let ie=0;function q(K,Q){let ye=t.propertiesTypes[K],oe=0;switch(ye){case"byte":{if(typeof Q!="boolean")return V.destroy(new Error(`Invalid ${K}: ${Q}`)),!1;oe+=2;break}case"int8":{if(typeof Q!="number"||Q<0||Q>255)return V.destroy(new Error(`Invalid ${K}: ${Q}`)),!1;oe+=2;break}case"binary":{if(Q&&Q===null)return V.destroy(new Error(`Invalid ${K}: ${Q}`)),!1;oe+=1+i.byteLength(Q)+2;break}case"int16":{if(typeof Q!="number"||Q<0||Q>65535)return V.destroy(new Error(`Invalid ${K}: ${Q}`)),!1;oe+=3;break}case"int32":{if(typeof Q!="number"||Q<0||Q>4294967295)return V.destroy(new Error(`Invalid ${K}: ${Q}`)),!1;oe+=5;break}case"var":{if(typeof Q!="number"||Q<0||Q>268435455)return V.destroy(new Error(`Invalid ${K}: ${Q}`)),!1;oe+=1+i.byteLength(d(Q));break}case"string":{if(typeof Q!="string")return V.destroy(new Error(`Invalid ${K}: ${Q}`)),!1;oe+=3+i.byteLength(Q.toString());break}case"pair":{if(typeof Q!="object")return V.destroy(new Error(`Invalid ${K}: ${Q}`)),!1;oe+=Object.getOwnPropertyNames(Q).reduce((M,W)=>{let ee=Q[W];return Array.isArray(ee)?M+=ee.reduce((de,pe)=>(de+=3+i.byteLength(W.toString())+2+i.byteLength(pe.toString()),de),0):M+=3+i.byteLength(W.toString())+2+i.byteLength(Q[W].toString()),M},0);break}default:return V.destroy(new Error(`Invalid property ${K}: ${Q}`)),!1}return oe}if(L)for(let K in L){let Q=0,ye=0,oe=L[K];if(oe!==void 0){if(Array.isArray(oe))for(let M=0;M<oe.length;M++){if(ye=q(K,oe[M]),!ye)return!1;Q+=ye}else{if(ye=q(K,oe),!ye)return!1;Q=ye}if(!Q)return!1;ie+=Q}}return{length:i.byteLength(d(ie))+ie,write(){be(V,L,ie)}}}function R(V,L,ie,q){let K=["reasonString","userProperties"],Q=ie&&ie.properties&&ie.properties.maximumPacketSize?ie.properties.maximumPacketSize:0,ye=Z(V,L);if(Q)for(;q+ye.length>Q;){let oe=K.shift();if(oe&&L[oe])delete L[oe],ye=Z(V,L);else return!1}return ye}function X(V,L,ie){switch(t.propertiesTypes[L]){case"byte":{V.write(i.from([t.properties[L]])),V.write(i.from([+ie]));break}case"int8":{V.write(i.from([t.properties[L]])),V.write(i.from([ie]));break}case"binary":{V.write(i.from([t.properties[L]])),F(V,ie);break}case"int16":{V.write(i.from([t.properties[L]])),f(V,ie);break}case"int32":{V.write(i.from([t.properties[L]])),re(V,ie);break}case"var":{V.write(i.from([t.properties[L]])),U(V,ie);break}case"string":{V.write(i.from([t.properties[L]])),D(V,ie);break}case"pair":{Object.getOwnPropertyNames(ie).forEach(q=>{let K=ie[q];Array.isArray(K)?K.forEach(Q=>{V.write(i.from([t.properties[L]])),le(V,q.toString(),Q.toString())}):(V.write(i.from([t.properties[L]])),le(V,q.toString(),K.toString()))});break}default:return V.destroy(new Error(`Invalid property ${L} value: ${ie}`)),!1}}function be(V,L,ie){U(V,ie);for(let q in L)if(Object.prototype.hasOwnProperty.call(L,q)&&L[q]!=null){let K=L[q];if(Array.isArray(K))for(let Q=0;Q<K.length;Q++)X(V,q,K[Q]);else X(V,q,K)}}function te(V){return V?V instanceof i?V.length:i.byteLength(V):0}function _e(V){return typeof V=="string"||V instanceof i}e.exports=b}),Tl=ge((p,e)=>{ue(),ce(),he();var t=Xo(),{EventEmitter:i}=(Pt(),Me(xt)),{Buffer:o}=(Ue(),Me(Be));function r(s,a){let l=new n;return t(s,l,a),l.concat()}var n=class extends i{constructor(){super(),this._array=new Array(20),this._i=0}write(s){return this._array[this._i++]=s,!0}concat(){let s=0,a=new Array(this._array.length),l=this._array,u=0,c;for(c=0;c<l.length&&l[c]!==void 0;c++)typeof l[c]!="string"?a[c]=l[c].length:a[c]=o.byteLength(l[c]),s+=a[c];let d=o.allocUnsafe(s);for(c=0;c<l.length&&l[c]!==void 0;c++)typeof l[c]!="string"?(l[c].copy(d,u),u+=a[c]):(d.write(l[c],u),u+=a[c]);return d}destroy(s){s&&this.emit("error",s)}};e.exports=r}),Ol=ge(p=>{ue(),ce(),he(),p.parser=Al().parser,p.generate=Tl(),p.writeToStream=Xo()}),Cl=ge((p,e)=>{ue(),ce(),he(),e.exports=i;function t(r){return r instanceof Ur?Ur.from(r):new r.constructor(r.buffer.slice(),r.byteOffset,r.length)}function i(r){if(r=r||{},r.circles)return o(r);let n=new Map;if(n.set(Date,c=>new Date(c)),n.set(Map,(c,d)=>new Map(a(Array.from(c),d))),n.set(Set,(c,d)=>new Set(a(Array.from(c),d))),r.constructorHandlers)for(let c of r.constructorHandlers)n.set(c[0],c[1]);let s=null;return r.proto?u:l;function a(c,d){let y=Object.keys(c),f=new Array(y.length);for(let m=0;m<y.length;m++){let b=y[m],E=c[b];typeof E!="object"||E===null?f[b]=E:E.constructor!==Object&&(s=n.get(E.constructor))?f[b]=s(E,d):ArrayBuffer.isView(E)?f[b]=t(E):f[b]=d(E)}return f}function l(c){if(typeof c!="object"||c===null)return c;if(Array.isArray(c))return a(c,l);if(c.constructor!==Object&&(s=n.get(c.constructor)))return s(c,l);let d={};for(let y in c){if(Object.hasOwnProperty.call(c,y)===!1)continue;let f=c[y];typeof f!="object"||f===null?d[y]=f:f.constructor!==Object&&(s=n.get(f.constructor))?d[y]=s(f,l):ArrayBuffer.isView(f)?d[y]=t(f):d[y]=l(f)}return d}function u(c){if(typeof c!="object"||c===null)return c;if(Array.isArray(c))return a(c,u);if(c.constructor!==Object&&(s=n.get(c.constructor)))return s(c,u);let d={};for(let y in c){let f=c[y];typeof f!="object"||f===null?d[y]=f:f.constructor!==Object&&(s=n.get(f.constructor))?d[y]=s(f,u):ArrayBuffer.isView(f)?d[y]=t(f):d[y]=u(f)}return d}}function o(r){let n=[],s=[],a=new Map;if(a.set(Date,y=>new Date(y)),a.set(Map,(y,f)=>new Map(u(Array.from(y),f))),a.set(Set,(y,f)=>new Set(u(Array.from(y),f))),r.constructorHandlers)for(let y of r.constructorHandlers)a.set(y[0],y[1]);let l=null;return r.proto?d:c;function u(y,f){let m=Object.keys(y),b=new Array(m.length);for(let E=0;E<m.length;E++){let g=m[E],_=y[g];if(typeof _!="object"||_===null)b[g]=_;else if(_.constructor!==Object&&(l=a.get(_.constructor)))b[g]=l(_,f);else if(ArrayBuffer.isView(_))b[g]=t(_);else{let x=n.indexOf(_);x!==-1?b[g]=s[x]:b[g]=f(_)}}return b}function c(y){if(typeof y!="object"||y===null)return y;if(Array.isArray(y))return u(y,c);if(y.constructor!==Object&&(l=a.get(y.constructor)))return l(y,c);let f={};n.push(y),s.push(f);for(let m in y){if(Object.hasOwnProperty.call(y,m)===!1)continue;let b=y[m];if(typeof b!="object"||b===null)f[m]=b;else if(b.constructor!==Object&&(l=a.get(b.constructor)))f[m]=l(b,c);else if(ArrayBuffer.isView(b))f[m]=t(b);else{let E=n.indexOf(b);E!==-1?f[m]=s[E]:f[m]=c(b)}}return n.pop(),s.pop(),f}function d(y){if(typeof y!="object"||y===null)return y;if(Array.isArray(y))return u(y,d);if(y.constructor!==Object&&(l=a.get(y.constructor)))return l(y,d);let f={};n.push(y),s.push(f);for(let m in y){let b=y[m];if(typeof b!="object"||b===null)f[m]=b;else if(b.constructor!==Object&&(l=a.get(b.constructor)))f[m]=l(b,d);else if(ArrayBuffer.isView(b))f[m]=t(b);else{let E=n.indexOf(b);E!==-1?f[m]=s[E]:f[m]=d(b)}}return n.pop(),s.pop(),f}}}),Rl=ge((p,e)=>{ue(),ce(),he(),e.exports=Cl()()}),Pl=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"__esModule",{value:!0}),p.validateTopic=e,p.validateTopics=t;function e(i){let o=i.split("/");for(let r=0;r<o.length;r++)if(o[r]!=="+"){if(o[r]==="#")return r===o.length-1;if(o[r].indexOf("+")!==-1||o[r].indexOf("#")!==-1)return!1}return!0}function t(i){if(i.length===0)return"empty_topic_list";for(let o=0;o<i.length;o++)if(!e(i[o]))return i[o];return null}}),Jo=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"__esModule",{value:!0});var e=Nt(),t={objectMode:!0},i={clean:!0},o=class{options;_inflights;constructor(r){this.options=r||{},this.options={...i,...r},this._inflights=new Map}put(r,n){return this._inflights.set(r.messageId,r),n&&n(),this}createStream(){let r=new e.Readable(t),n=[],s=!1,a=0;return this._inflights.forEach((l,u)=>{n.push(l)}),r._read=()=>{!s&&a<n.length?r.push(n[a++]):r.push(null)},r.destroy=l=>{if(!s)return s=!0,setTimeout(()=>{r.emit("close")},0),r},r}del(r,n){let s=this._inflights.get(r.messageId);return s?(this._inflights.delete(r.messageId),n(null,s)):n&&n(new Error("missing packet")),this}get(r,n){let s=this._inflights.get(r.messageId);return s?n(null,s):n&&n(new Error("missing packet")),this}close(r){this.options.clean&&(this._inflights=null),r&&r()}};p.default=o}),Ml=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"__esModule",{value:!0});var e=[0,16,128,131,135,144,145,151,153],t=(i,o,r)=>{i.log("handlePublish: packet %o",o),r=typeof r<"u"?r:i.noop;let n=o.topic.toString(),s=o.payload,{qos:a}=o,{messageId:l}=o,{options:u}=i;if(i.options.protocolVersion===5){let c;if(o.properties&&(c=o.properties.topicAlias),typeof c<"u")if(n.length===0)if(c>0&&c<=65535){let d=i.topicAliasRecv.getTopicByAlias(c);if(d)n=d,i.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",n,c);else{i.log("handlePublish :: unregistered topic alias. alias: %d",c),i.emit("error",new Error("Received unregistered Topic Alias"));return}}else{i.log("handlePublish :: topic alias out of range. alias: %d",c),i.emit("error",new Error("Received Topic Alias is out of range"));return}else if(i.topicAliasRecv.put(n,c))i.log("handlePublish :: registered topic: %s - alias: %d",n,c);else{i.log("handlePublish :: topic alias out of range. alias: %d",c),i.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(i.log("handlePublish: qos %d",a),a){case 2:{u.customHandleAcks(n,s,o,(c,d)=>{if(typeof c=="number"&&(d=c,c=null),c)return i.emit("error",c);if(e.indexOf(d)===-1)return i.emit("error",new Error("Wrong reason code for pubrec"));d?i._sendPacket({cmd:"pubrec",messageId:l,reasonCode:d},r):i.incomingStore.put(o,()=>{i._sendPacket({cmd:"pubrec",messageId:l},r)})});break}case 1:{u.customHandleAcks(n,s,o,(c,d)=>{if(typeof c=="number"&&(d=c,c=null),c)return i.emit("error",c);if(e.indexOf(d)===-1)return i.emit("error",new Error("Wrong reason code for puback"));d||i.emit("message",n,s,o),i.handleMessage(o,y=>{if(y)return r&&r(y);i._sendPacket({cmd:"puback",messageId:l,reasonCode:d},r)})});break}case 0:i.emit("message",n,s,o),i.handleMessage(o,r);break;default:i.log("handlePublish: unknown QoS. Doing nothing.");break}};p.default=t}),Nl=ge((p,e)=>{e.exports={version:"5.14.1"}}),zt=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"__esModule",{value:!0}),p.MQTTJS_VERSION=p.nextTick=p.ErrorWithSubackPacket=p.ErrorWithReasonCode=void 0,p.applyMixin=i;var e=class Zo extends Error{code;constructor(r,n){super(r),this.code=n,Object.setPrototypeOf(this,Zo.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};p.ErrorWithReasonCode=e;var t=class ea extends Error{packet;constructor(r,n){super(r),this.packet=n,Object.setPrototypeOf(this,ea.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};p.ErrorWithSubackPacket=t;function i(o,r,n=!1){let s=[r];for(;;){let a=s[0],l=Object.getPrototypeOf(a);if(l?.prototype)s.unshift(l);else break}for(let a of s)for(let l of Object.getOwnPropertyNames(a.prototype))(n||l!=="constructor")&&Object.defineProperty(o.prototype,l,Object.getOwnPropertyDescriptor(a.prototype,l)??Object.create(null))}p.nextTick=typeof Ne?.nextTick=="function"?Ne.nextTick:o=>{setTimeout(o,0)},p.MQTTJS_VERSION=Nl().version}),$r=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"__esModule",{value:!0}),p.ReasonCodes=void 0;var e=zt();p.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var t=(i,o)=>{let{messageId:r}=o,n=o.cmd,s=null,a=i.outgoing[r]?i.outgoing[r].cb:null,l=null;if(!a){i.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(i.log("_handleAck :: packet type",n),n){case"pubcomp":case"puback":{let u=o.reasonCode;u&&u>0&&u!==16?(l=new e.ErrorWithReasonCode(`Publish error: ${p.ReasonCodes[u]}`,u),i._removeOutgoingAndStoreMessage(r,()=>{a(l,o)})):i._removeOutgoingAndStoreMessage(r,a);break}case"pubrec":{s={cmd:"pubrel",qos:2,messageId:r};let u=o.reasonCode;u&&u>0&&u!==16?(l=new e.ErrorWithReasonCode(`Publish error: ${p.ReasonCodes[u]}`,u),i._removeOutgoingAndStoreMessage(r,()=>{a(l,o)})):i._sendPacket(s);break}case"suback":{delete i.outgoing[r],i.messageIdProvider.deallocate(r);let u=o.granted;for(let c=0;c<u.length;c++){let d=u[c];if((d&128)!==0){l=new Error(`Subscribe error: ${p.ReasonCodes[d]}`),l.code=d;let y=i.messageIdToTopic[r];y&&y.forEach(f=>{delete i._resubscribeTopics[f]})}}delete i.messageIdToTopic[r],i._invokeStoreProcessingQueue(),a(l,o);break}case"unsuback":{delete i.outgoing[r],i.messageIdProvider.deallocate(r),i._invokeStoreProcessingQueue(),a(null,o);break}default:i.emit("error",new Error("unrecognized packet type"))}i.disconnecting&&Object.keys(i.outgoing).length===0&&i.emit("outgoingEmpty")};p.default=t}),Ll=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"__esModule",{value:!0});var e=zt(),t=$r(),i=(o,r)=>{let{options:n}=o,s=n.protocolVersion,a=s===5?r.reasonCode:r.returnCode;if(s!==5){let l=new e.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${s}`,a);o.emit("error",l);return}o.handleAuth(r,(l,u)=>{if(l){o.emit("error",l);return}if(a===24)o.reconnecting=!1,o._sendPacket(u);else{let c=new e.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[a]}`,a);o.emit("error",c)}})};p.default=i}),Dl=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"__esModule",{value:!0}),p.LRUCache=void 0;var e=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,t=new Set,i=typeof Ne=="object"&&Ne?Ne:{},o=(y,f,m,b)=>{typeof i.emitWarning=="function"?i.emitWarning(y,f,m,b):console.error(`[${m}] ${f}: ${y}`)},r=globalThis.AbortController,n=globalThis.AbortSignal;if(typeof r>"u"){n=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(m,b){this._onabort.push(b)}},r=class{constructor(){f()}signal=new n;abort(m){if(!this.signal.aborted){this.signal.reason=m,this.signal.aborted=!0;for(let b of this.signal._onabort)b(m);this.signal.onabort?.(m)}}};let y=i.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",f=()=>{y&&(y=!1,o("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",f))}}var s=y=>!t.has(y),a=y=>y&&y===Math.floor(y)&&y>0&&isFinite(y),l=y=>a(y)?y<=Math.pow(2,8)?Uint8Array:y<=Math.pow(2,16)?Uint16Array:y<=Math.pow(2,32)?Uint32Array:y<=Number.MAX_SAFE_INTEGER?u:null:null,u=class extends Array{constructor(y){super(y),this.fill(0)}},c=class Xt{heap;length;static#l=!1;static create(f){let m=l(f);if(!m)return[];Xt.#l=!0;let b=new Xt(f,m);return Xt.#l=!1,b}constructor(f,m){if(!Xt.#l)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new m(f),this.length=0}push(f){this.heap[this.length++]=f}pop(){return this.heap[--this.length]}},d=class ta{#l;#c;#g;#m;#C;#R;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#n;#y;#i;#r;#e;#u;#f;#a;#s;#b;#o;#v;#w;#d;#_;#k;#h;static unsafeExposeInternals(f){return{starts:f.#w,ttls:f.#d,sizes:f.#v,keyMap:f.#i,keyList:f.#r,valList:f.#e,next:f.#u,prev:f.#f,get head(){return f.#a},get tail(){return f.#s},free:f.#b,isBackgroundFetch:m=>f.#t(m),backgroundFetch:(m,b,E,g)=>f.#N(m,b,E,g),moveToTail:m=>f.#O(m),indexes:m=>f.#E(m),rindexes:m=>f.#S(m),isStale:m=>f.#p(m)}}get max(){return this.#l}get maxSize(){return this.#c}get calculatedSize(){return this.#y}get size(){return this.#n}get fetchMethod(){return this.#C}get memoMethod(){return this.#R}get dispose(){return this.#g}get disposeAfter(){return this.#m}constructor(f){let{max:m=0,ttl:b,ttlResolution:E=1,ttlAutopurge:g,updateAgeOnGet:_,updateAgeOnHas:x,allowStale:v,dispose:A,disposeAfter:S,noDisposeOnSet:I,noUpdateTTL:P,maxSize:C=0,maxEntrySize:B=0,sizeCalculation:T,fetchMethod:z,memoMethod:U,noDeleteOnFetchRejection:D,noDeleteOnStaleGet:le,allowStaleOnFetchRejection:Y,allowStaleOnFetchAbort:G,ignoreFetchAbort:re}=f;if(m!==0&&!a(m))throw new TypeError("max option must be a nonnegative integer");let F=m?l(m):Array;if(!F)throw new Error("invalid max value: "+m);if(this.#l=m,this.#c=C,this.maxEntrySize=B||this.#c,this.sizeCalculation=T,this.sizeCalculation){if(!this.#c&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(U!==void 0&&typeof U!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#R=U,z!==void 0&&typeof z!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#C=z,this.#k=!!z,this.#i=new Map,this.#r=new Array(m).fill(void 0),this.#e=new Array(m).fill(void 0),this.#u=new F(m),this.#f=new F(m),this.#a=0,this.#s=0,this.#b=c.create(m),this.#n=0,this.#y=0,typeof A=="function"&&(this.#g=A),typeof S=="function"?(this.#m=S,this.#o=[]):(this.#m=void 0,this.#o=void 0),this.#_=!!this.#g,this.#h=!!this.#m,this.noDisposeOnSet=!!I,this.noUpdateTTL=!!P,this.noDeleteOnFetchRejection=!!D,this.allowStaleOnFetchRejection=!!Y,this.allowStaleOnFetchAbort=!!G,this.ignoreFetchAbort=!!re,this.maxEntrySize!==0){if(this.#c!==0&&!a(this.#c))throw new TypeError("maxSize must be a positive integer if specified");if(!a(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#W()}if(this.allowStale=!!v,this.noDeleteOnStaleGet=!!le,this.updateAgeOnGet=!!_,this.updateAgeOnHas=!!x,this.ttlResolution=a(E)||E===0?E:1,this.ttlAutopurge=!!g,this.ttl=b||0,this.ttl){if(!a(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#L()}if(this.#l===0&&this.ttl===0&&this.#c===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#l&&!this.#c){let Z="LRU_CACHE_UNBOUNDED";s(Z)&&(t.add(Z),o("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Z,ta))}}getRemainingTTL(f){return this.#i.has(f)?1/0:0}#L(){let f=new u(this.#l),m=new u(this.#l);this.#d=f,this.#w=m,this.#D=(g,_,x=e.now())=>{if(m[g]=_!==0?x:0,f[g]=_,_!==0&&this.ttlAutopurge){let v=setTimeout(()=>{this.#p(g)&&this.#x(this.#r[g],"expire")},_+1);v.unref&&v.unref()}},this.#I=g=>{m[g]=f[g]!==0?e.now():0},this.#A=(g,_)=>{if(f[_]){let x=f[_],v=m[_];if(!x||!v)return;g.ttl=x,g.start=v,g.now=b||E();let A=g.now-v;g.remainingTTL=x-A}};let b=0,E=()=>{let g=e.now();if(this.ttlResolution>0){b=g;let _=setTimeout(()=>b=0,this.ttlResolution);_.unref&&_.unref()}return g};this.getRemainingTTL=g=>{let _=this.#i.get(g);if(_===void 0)return 0;let x=f[_],v=m[_];if(!x||!v)return 1/0;let A=(b||E())-v;return x-A},this.#p=g=>{let _=m[g],x=f[g];return!!x&&!!_&&(b||E())-_>x}}#I=()=>{};#A=()=>{};#D=()=>{};#p=()=>!1;#W(){let f=new u(this.#l);this.#y=0,this.#v=f,this.#T=m=>{this.#y-=f[m],f[m]=0},this.#j=(m,b,E,g)=>{if(this.#t(b))return 0;if(!a(E))if(g){if(typeof g!="function")throw new TypeError("sizeCalculation must be a function");if(E=g(b,m),!a(E))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return E},this.#P=(m,b,E)=>{if(f[m]=b,this.#c){let g=this.#c-f[m];for(;this.#y>g;)this.#M(!0)}this.#y+=f[m],E&&(E.entrySize=b,E.totalCalculatedSize=this.#y)}}#T=f=>{};#P=(f,m,b)=>{};#j=(f,m,b,E)=>{if(b||E)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:f=this.allowStale}={}){if(this.#n)for(let m=this.#s;!(!this.#B(m)||((f||!this.#p(m))&&(yield m),m===this.#a));)m=this.#f[m]}*#S({allowStale:f=this.allowStale}={}){if(this.#n)for(let m=this.#a;!(!this.#B(m)||((f||!this.#p(m))&&(yield m),m===this.#s));)m=this.#u[m]}#B(f){return f!==void 0&&this.#i.get(this.#r[f])===f}*entries(){for(let f of this.#E())this.#e[f]!==void 0&&this.#r[f]!==void 0&&!this.#t(this.#e[f])&&(yield[this.#r[f],this.#e[f]])}*rentries(){for(let f of this.#S())this.#e[f]!==void 0&&this.#r[f]!==void 0&&!this.#t(this.#e[f])&&(yield[this.#r[f],this.#e[f]])}*keys(){for(let f of this.#E()){let m=this.#r[f];m!==void 0&&!this.#t(this.#e[f])&&(yield m)}}*rkeys(){for(let f of this.#S()){let m=this.#r[f];m!==void 0&&!this.#t(this.#e[f])&&(yield m)}}*values(){for(let f of this.#E())this.#e[f]!==void 0&&!this.#t(this.#e[f])&&(yield this.#e[f])}*rvalues(){for(let f of this.#S())this.#e[f]!==void 0&&!this.#t(this.#e[f])&&(yield this.#e[f])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(f,m={}){for(let b of this.#E()){let E=this.#e[b],g=this.#t(E)?E.__staleWhileFetching:E;if(g!==void 0&&f(g,this.#r[b],this))return this.get(this.#r[b],m)}}forEach(f,m=this){for(let b of this.#E()){let E=this.#e[b],g=this.#t(E)?E.__staleWhileFetching:E;g!==void 0&&f.call(m,g,this.#r[b],this)}}rforEach(f,m=this){for(let b of this.#S()){let E=this.#e[b],g=this.#t(E)?E.__staleWhileFetching:E;g!==void 0&&f.call(m,g,this.#r[b],this)}}purgeStale(){let f=!1;for(let m of this.#S({allowStale:!0}))this.#p(m)&&(this.#x(this.#r[m],"expire"),f=!0);return f}info(f){let m=this.#i.get(f);if(m===void 0)return;let b=this.#e[m],E=this.#t(b)?b.__staleWhileFetching:b;if(E===void 0)return;let g={value:E};if(this.#d&&this.#w){let _=this.#d[m],x=this.#w[m];if(_&&x){let v=_-(e.now()-x);g.ttl=v,g.start=Date.now()}}return this.#v&&(g.size=this.#v[m]),g}dump(){let f=[];for(let m of this.#E({allowStale:!0})){let b=this.#r[m],E=this.#e[m],g=this.#t(E)?E.__staleWhileFetching:E;if(g===void 0||b===void 0)continue;let _={value:g};if(this.#d&&this.#w){_.ttl=this.#d[m];let x=e.now()-this.#w[m];_.start=Math.floor(Date.now()-x)}this.#v&&(_.size=this.#v[m]),f.unshift([b,_])}return f}load(f){this.clear();for(let[m,b]of f){if(b.start){let E=Date.now()-b.start;b.start=e.now()-E}this.set(m,b.value,b)}}set(f,m,b={}){if(m===void 0)return this.delete(f),this;let{ttl:E=this.ttl,start:g,noDisposeOnSet:_=this.noDisposeOnSet,sizeCalculation:x=this.sizeCalculation,status:v}=b,{noUpdateTTL:A=this.noUpdateTTL}=b,S=this.#j(f,m,b.size||0,x);if(this.maxEntrySize&&S>this.maxEntrySize)return v&&(v.set="miss",v.maxEntrySizeExceeded=!0),this.#x(f,"set"),this;let I=this.#n===0?void 0:this.#i.get(f);if(I===void 0)I=this.#n===0?this.#s:this.#b.length!==0?this.#b.pop():this.#n===this.#l?this.#M(!1):this.#n,this.#r[I]=f,this.#e[I]=m,this.#i.set(f,I),this.#u[this.#s]=I,this.#f[I]=this.#s,this.#s=I,this.#n++,this.#P(I,S,v),v&&(v.set="add"),A=!1;else{this.#O(I);let P=this.#e[I];if(m!==P){if(this.#k&&this.#t(P)){P.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:C}=P;C!==void 0&&!_&&(this.#_&&this.#g?.(C,f,"set"),this.#h&&this.#o?.push([C,f,"set"]))}else _||(this.#_&&this.#g?.(P,f,"set"),this.#h&&this.#o?.push([P,f,"set"]));if(this.#T(I),this.#P(I,S,v),this.#e[I]=m,v){v.set="replace";let C=P&&this.#t(P)?P.__staleWhileFetching:P;C!==void 0&&(v.oldValue=C)}}else v&&(v.set="update")}if(E!==0&&!this.#d&&this.#L(),this.#d&&(A||this.#D(I,E,g),v&&this.#A(v,I)),!_&&this.#h&&this.#o){let P=this.#o,C;for(;C=P?.shift();)this.#m?.(...C)}return this}pop(){try{for(;this.#n;){let f=this.#e[this.#a];if(this.#M(!0),this.#t(f)){if(f.__staleWhileFetching)return f.__staleWhileFetching}else if(f!==void 0)return f}}finally{if(this.#h&&this.#o){let f=this.#o,m;for(;m=f?.shift();)this.#m?.(...m)}}}#M(f){let m=this.#a,b=this.#r[m],E=this.#e[m];return this.#k&&this.#t(E)?E.__abortController.abort(new Error("evicted")):(this.#_||this.#h)&&(this.#_&&this.#g?.(E,b,"evict"),this.#h&&this.#o?.push([E,b,"evict"])),this.#T(m),f&&(this.#r[m]=void 0,this.#e[m]=void 0,this.#b.push(m)),this.#n===1?(this.#a=this.#s=0,this.#b.length=0):this.#a=this.#u[m],this.#i.delete(b),this.#n--,m}has(f,m={}){let{updateAgeOnHas:b=this.updateAgeOnHas,status:E}=m,g=this.#i.get(f);if(g!==void 0){let _=this.#e[g];if(this.#t(_)&&_.__staleWhileFetching===void 0)return!1;if(this.#p(g))E&&(E.has="stale",this.#A(E,g));else return b&&this.#I(g),E&&(E.has="hit",this.#A(E,g)),!0}else E&&(E.has="miss");return!1}peek(f,m={}){let{allowStale:b=this.allowStale}=m,E=this.#i.get(f);if(E===void 0||!b&&this.#p(E))return;let g=this.#e[E];return this.#t(g)?g.__staleWhileFetching:g}#N(f,m,b,E){let g=m===void 0?void 0:this.#e[m];if(this.#t(g))return g;let _=new r,{signal:x}=b;x?.addEventListener("abort",()=>_.abort(x.reason),{signal:_.signal});let v={signal:_.signal,options:b,context:E},A=(T,z=!1)=>{let{aborted:U}=_.signal,D=b.ignoreFetchAbort&&T!==void 0;if(b.status&&(U&&!z?(b.status.fetchAborted=!0,b.status.fetchError=_.signal.reason,D&&(b.status.fetchAbortIgnored=!0)):b.status.fetchResolved=!0),U&&!D&&!z)return I(_.signal.reason);let le=C;return this.#e[m]===C&&(T===void 0?le.__staleWhileFetching?this.#e[m]=le.__staleWhileFetching:this.#x(f,"fetch"):(b.status&&(b.status.fetchUpdated=!0),this.set(f,T,v.options))),T},S=T=>(b.status&&(b.status.fetchRejected=!0,b.status.fetchError=T),I(T)),I=T=>{let{aborted:z}=_.signal,U=z&&b.allowStaleOnFetchAbort,D=U||b.allowStaleOnFetchRejection,le=D||b.noDeleteOnFetchRejection,Y=C;if(this.#e[m]===C&&(!le||Y.__staleWhileFetching===void 0?this.#x(f,"fetch"):U||(this.#e[m]=Y.__staleWhileFetching)),D)return b.status&&Y.__staleWhileFetching!==void 0&&(b.status.returnedStale=!0),Y.__staleWhileFetching;if(Y.__returned===Y)throw T},P=(T,z)=>{let U=this.#C?.(f,g,v);U&&U instanceof Promise&&U.then(D=>T(D===void 0?void 0:D),z),_.signal.addEventListener("abort",()=>{(!b.ignoreFetchAbort||b.allowStaleOnFetchAbort)&&(T(void 0),b.allowStaleOnFetchAbort&&(T=D=>A(D,!0)))})};b.status&&(b.status.fetchDispatched=!0);let C=new Promise(P).then(A,S),B=Object.assign(C,{__abortController:_,__staleWhileFetching:g,__returned:void 0});return m===void 0?(this.set(f,B,{...v.options,status:void 0}),m=this.#i.get(f)):this.#e[m]=B,B}#t(f){if(!this.#k)return!1;let m=f;return!!m&&m instanceof Promise&&m.hasOwnProperty("__staleWhileFetching")&&m.__abortController instanceof r}async fetch(f,m={}){let{allowStale:b=this.allowStale,updateAgeOnGet:E=this.updateAgeOnGet,noDeleteOnStaleGet:g=this.noDeleteOnStaleGet,ttl:_=this.ttl,noDisposeOnSet:x=this.noDisposeOnSet,size:v=0,sizeCalculation:A=this.sizeCalculation,noUpdateTTL:S=this.noUpdateTTL,noDeleteOnFetchRejection:I=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:P=this.allowStaleOnFetchRejection,ignoreFetchAbort:C=this.ignoreFetchAbort,allowStaleOnFetchAbort:B=this.allowStaleOnFetchAbort,context:T,forceRefresh:z=!1,status:U,signal:D}=m;if(!this.#k)return U&&(U.fetch="get"),this.get(f,{allowStale:b,updateAgeOnGet:E,noDeleteOnStaleGet:g,status:U});let le={allowStale:b,updateAgeOnGet:E,noDeleteOnStaleGet:g,ttl:_,noDisposeOnSet:x,size:v,sizeCalculation:A,noUpdateTTL:S,noDeleteOnFetchRejection:I,allowStaleOnFetchRejection:P,allowStaleOnFetchAbort:B,ignoreFetchAbort:C,status:U,signal:D},Y=this.#i.get(f);if(Y===void 0){U&&(U.fetch="miss");let G=this.#N(f,Y,le,T);return G.__returned=G}else{let G=this.#e[Y];if(this.#t(G)){let R=b&&G.__staleWhileFetching!==void 0;return U&&(U.fetch="inflight",R&&(U.returnedStale=!0)),R?G.__staleWhileFetching:G.__returned=G}let re=this.#p(Y);if(!z&&!re)return U&&(U.fetch="hit"),this.#O(Y),E&&this.#I(Y),U&&this.#A(U,Y),G;let F=this.#N(f,Y,le,T),Z=F.__staleWhileFetching!==void 0&&b;return U&&(U.fetch=re?"stale":"refresh",Z&&re&&(U.returnedStale=!0)),Z?F.__staleWhileFetching:F.__returned=F}}async forceFetch(f,m={}){let b=await this.fetch(f,m);if(b===void 0)throw new Error("fetch() returned undefined");return b}memo(f,m={}){let b=this.#R;if(!b)throw new Error("no memoMethod provided to constructor");let{context:E,forceRefresh:g,..._}=m,x=this.get(f,_);if(!g&&x!==void 0)return x;let v=b(f,x,{options:_,context:E});return this.set(f,v,_),v}get(f,m={}){let{allowStale:b=this.allowStale,updateAgeOnGet:E=this.updateAgeOnGet,noDeleteOnStaleGet:g=this.noDeleteOnStaleGet,status:_}=m,x=this.#i.get(f);if(x!==void 0){let v=this.#e[x],A=this.#t(v);return _&&this.#A(_,x),this.#p(x)?(_&&(_.get="stale"),A?(_&&b&&v.__staleWhileFetching!==void 0&&(_.returnedStale=!0),b?v.__staleWhileFetching:void 0):(g||this.#x(f,"expire"),_&&b&&(_.returnedStale=!0),b?v:void 0)):(_&&(_.get="hit"),A?v.__staleWhileFetching:(this.#O(x),E&&this.#I(x),v))}else _&&(_.get="miss")}#U(f,m){this.#f[m]=f,this.#u[f]=m}#O(f){f!==this.#s&&(f===this.#a?this.#a=this.#u[f]:this.#U(this.#f[f],this.#u[f]),this.#U(this.#s,f),this.#s=f)}delete(f){return this.#x(f,"delete")}#x(f,m){let b=!1;if(this.#n!==0){let E=this.#i.get(f);if(E!==void 0)if(b=!0,this.#n===1)this.#F(m);else{this.#T(E);let g=this.#e[E];if(this.#t(g)?g.__abortController.abort(new Error("deleted")):(this.#_||this.#h)&&(this.#_&&this.#g?.(g,f,m),this.#h&&this.#o?.push([g,f,m])),this.#i.delete(f),this.#r[E]=void 0,this.#e[E]=void 0,E===this.#s)this.#s=this.#f[E];else if(E===this.#a)this.#a=this.#u[E];else{let _=this.#f[E];this.#u[_]=this.#u[E];let x=this.#u[E];this.#f[x]=this.#f[E]}this.#n--,this.#b.push(E)}}if(this.#h&&this.#o?.length){let E=this.#o,g;for(;g=E?.shift();)this.#m?.(...g)}return b}clear(){return this.#F("delete")}#F(f){for(let m of this.#S({allowStale:!0})){let b=this.#e[m];if(this.#t(b))b.__abortController.abort(new Error("deleted"));else{let E=this.#r[m];this.#_&&this.#g?.(b,E,f),this.#h&&this.#o?.push([b,E,f])}}if(this.#i.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#d&&this.#w&&(this.#d.fill(0),this.#w.fill(0)),this.#v&&this.#v.fill(0),this.#a=0,this.#s=0,this.#b.length=0,this.#y=0,this.#n=0,this.#h&&this.#o){let m=this.#o,b;for(;b=m?.shift();)this.#m?.(...b)}}};p.LRUCache=d}),yt=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.ContainerIterator=p.Container=p.Base=void 0;var e=class{constructor(o=0){this.iteratorType=o}equals(o){return this.o===o.o}};p.ContainerIterator=e;var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};p.Base=t;var i=class extends t{};p.Container=i}),jl=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.default=void 0;var e=yt(),t=class extends e.Base{constructor(o=[]){super(),this.S=[];let r=this;o.forEach(function(n){r.push(n)})}clear(){this.i=0,this.S=[]}push(o){return this.S.push(o),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},i=t;p.default=i}),Bl=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.default=void 0;var e=yt(),t=class extends e.Base{constructor(o=[]){super(),this.j=0,this.q=[];let r=this;o.forEach(function(n){r.push(n)})}clear(){this.q=[],this.i=this.j=0}push(o){let r=this.q.length;if(this.j/r>.5&&this.j+this.i>=r&&r>4096){let n=this.i;for(let s=0;s<n;++s)this.q[s]=this.q[this.j+s];this.j=0,this.q[this.i]=o}else this.q[this.j+this.i]=o;return++this.i}pop(){if(this.i===0)return;let o=this.q[this.j++];return this.i-=1,o}front(){if(this.i!==0)return this.q[this.j]}},i=t;p.default=i}),Ul=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.default=void 0;var e=yt(),t=class extends e.Base{constructor(o=[],r=function(s,a){return s>a?-1:s<a?1:0},n=!0){if(super(),this.v=r,Array.isArray(o))this.C=n?[...o]:o;else{this.C=[];let a=this;o.forEach(function(l){a.C.push(l)})}this.i=this.C.length;let s=this.i>>1;for(let a=this.i-1>>1;a>=0;--a)this.k(a,s)}m(o){let r=this.C[o];for(;o>0;){let n=o-1>>1,s=this.C[n];if(this.v(s,r)<=0)break;this.C[o]=s,o=n}this.C[o]=r}k(o,r){let n=this.C[o];for(;o<r;){let s=o<<1|1,a=s+1,l=this.C[s];if(a<this.i&&this.v(l,this.C[a])>0&&(s=a,l=this.C[a]),this.v(l,n)>=0)break;this.C[o]=l,o=s}this.C[o]=n}clear(){this.i=0,this.C.length=0}push(o){this.C.push(o),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let o=this.C[0],r=this.C.pop();return this.i-=1,this.i&&(this.C[0]=r,this.k(0,this.i>>1)),o}top(){return this.C[0]}find(o){return this.C.indexOf(o)>=0}remove(o){let r=this.C.indexOf(o);return r<0?!1:(r===0?this.pop():r===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(r,1,this.C.pop()),this.i-=1,this.m(r),this.k(r,this.i>>1)),!0)}updateItem(o){let r=this.C.indexOf(o);return r<0?!1:(this.m(r),this.k(r,this.i>>1),!0)}toArray(){return[...this.C]}},i=t;p.default=i}),is=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.default=void 0;var e=yt(),t=class extends e.Container{},i=t;p.default=i}),bt=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.throwIteratorAccessError=e;function e(){throw new RangeError("Iterator access denied!")}}),ra=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.RandomIterator=void 0;var e=yt(),t=bt(),i=class extends e.ContainerIterator{constructor(o,r){super(r),this.o=o,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,t.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,t.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,t.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,t.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(o){this.container.setElementByPos(this.o,o)}};p.RandomIterator=i}),Fl=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.default=void 0;var e=i(is()),t=ra();function i(s){return s&&s.t?s:{default:s}}var o=class ia extends t.RandomIterator{constructor(a,l,u){super(a,u),this.container=l}copy(){return new ia(this.o,this.container,this.iteratorType)}},r=class extends e.default{constructor(s=[],a=!0){if(super(),Array.isArray(s))this.J=a?[...s]:s,this.i=s.length;else{this.J=[];let l=this;s.forEach(function(u){l.pushBack(u)})}}clear(){this.i=0,this.J.length=0}begin(){return new o(0,this)}end(){return new o(this.i,this)}rBegin(){return new o(this.i-1,this,1)}rEnd(){return new o(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;return this.J[s]}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;return this.J.splice(s,1),this.i-=1,this.i}eraseElementByValue(s){let a=0;for(let l=0;l<this.i;++l)this.J[l]!==s&&(this.J[a++]=this.J[l]);return this.i=this.J.length=a,this.i}eraseElementByIterator(s){let a=s.o;return s=s.next(),this.eraseElementByPos(a),s}pushBack(s){return this.J.push(s),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(s,a){if(s<0||s>this.i-1)throw new RangeError;this.J[s]=a}insert(s,a,l=1){if(s<0||s>this.i)throw new RangeError;return this.J.splice(s,0,...new Array(l).fill(a)),this.i+=l,this.i}find(s){for(let a=0;a<this.i;++a)if(this.J[a]===s)return new o(a,this);return this.end()}reverse(){this.J.reverse()}unique(){let s=1;for(let a=1;a<this.i;++a)this.J[a]!==this.J[a-1]&&(this.J[s++]=this.J[a]);return this.i=this.J.length=s,this.i}sort(s){this.J.sort(s)}forEach(s){for(let a=0;a<this.i;++a)s(this.J[a],a,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},n=r;p.default=n}),Wl=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.default=void 0;var e=o(is()),t=yt(),i=bt();function o(a){return a&&a.t?a:{default:a}}var r=class na extends t.ContainerIterator{constructor(l,u,c,d){super(d),this.o=l,this.h=u,this.container=c,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o.l}set pointer(l){this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o.l=l}copy(){return new na(this.o,this.h,this.container,this.iteratorType)}},n=class extends e.default{constructor(a=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let l=this;a.forEach(function(u){l.pushBack(u)})}V(a){let{L:l,B:u}=a;l.B=u,u.L=l,a===this.p&&(this.p=u),a===this._&&(this._=l),this.i-=1}G(a,l){let u=l.B,c={l:a,L:l,B:u};l.B=c,u.L=c,l===this.h&&(this.p=c),u===this.h&&(this._=c),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new r(this.p,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this._,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let l=this.p;for(;a--;)l=l.B;return l.l}eraseElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let l=this.p;for(;a--;)l=l.B;return this.V(l),this.i}eraseElementByValue(a){let l=this.p;for(;l!==this.h;)l.l===a&&this.V(l),l=l.B;return this.i}eraseElementByIterator(a){let l=a.o;return l===this.h&&(0,i.throwIteratorAccessError)(),a=a.next(),this.V(l),a}pushBack(a){return this.G(a,this._),this.i}popBack(){if(this.i===0)return;let a=this._.l;return this.V(this._),a}pushFront(a){return this.G(a,this.h),this.i}popFront(){if(this.i===0)return;let a=this.p.l;return this.V(this.p),a}setElementByPos(a,l){if(a<0||a>this.i-1)throw new RangeError;let u=this.p;for(;a--;)u=u.B;u.l=l}insert(a,l,u=1){if(a<0||a>this.i)throw new RangeError;if(u<=0)return this.i;if(a===0)for(;u--;)this.pushFront(l);else if(a===this.i)for(;u--;)this.pushBack(l);else{let c=this.p;for(let y=1;y<a;++y)c=c.B;let d=c.B;for(this.i+=u;u--;)c.B={l,L:c},c.B.L=c,c=c.B;c.B=d,d.L=c}return this.i}find(a){let l=this.p;for(;l!==this.h;){if(l.l===a)return new r(l,this.h,this);l=l.B}return this.end()}reverse(){if(this.i<=1)return;let a=this.p,l=this._,u=0;for(;u<<1<this.i;){let c=a.l;a.l=l.l,l.l=c,a=a.B,l=l.L,u+=1}}unique(){if(this.i<=1)return this.i;let a=this.p;for(;a!==this.h;){let l=a;for(;l.B!==this.h&&l.l===l.B.l;)l=l.B,this.i-=1;a.B=l.B,a.B.L=a,a=a.B}return this.i}sort(a){if(this.i<=1)return;let l=[];this.forEach(function(c){l.push(c)}),l.sort(a);let u=this.p;l.forEach(function(c){u.l=c,u=u.B})}merge(a){let l=this;if(this.i===0)a.forEach(function(u){l.pushBack(u)});else{let u=this.p;a.forEach(function(c){for(;u!==l.h&&u.l<=c;)u=u.B;l.G(c,u.L)})}return this.i}forEach(a){let l=this.p,u=0;for(;l!==this.h;)a(l.l,u++,this),l=l.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let a=this.p;for(;a!==this.h;)yield a.l,a=a.B}).bind(this)()}},s=n;p.default=s}),zl=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.default=void 0;var e=i(is()),t=ra();function i(s){return s&&s.t?s:{default:s}}var o=class sa extends t.RandomIterator{constructor(a,l,u){super(a,u),this.container=l}copy(){return new sa(this.o,this.container,this.iteratorType)}},r=class extends e.default{constructor(s=[],a=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let l=(()=>{if(typeof s.length=="number")return s.length;if(typeof s.size=="number")return s.size;if(typeof s.size=="function")return s.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=a,this.P=Math.max(Math.ceil(l/this.F),1);for(let d=0;d<this.P;++d)this.A.push(new Array(this.F));let u=Math.ceil(l/this.F);this.j=this.R=(this.P>>1)-(u>>1),this.D=this.N=this.F-l%this.F>>1;let c=this;s.forEach(function(d){c.pushBack(d)})}T(){let s=[],a=Math.max(this.P>>1,1);for(let l=0;l<a;++l)s[l]=new Array(this.F);for(let l=this.j;l<this.P;++l)s[s.length]=this.A[l];for(let l=0;l<this.R;++l)s[s.length]=this.A[l];s[s.length]=[...this.A[this.R]],this.j=a,this.R=s.length-1;for(let l=0;l<a;++l)s[s.length]=new Array(this.F);this.A=s,this.P=s.length}O(s){let a=this.D+s+1,l=a%this.F,u=l-1,c=this.j+(a-l)/this.F;return l===0&&(c-=1),c%=this.P,u<0&&(u+=this.F),{curNodeBucketIndex:c,curNodePointerIndex:u}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new o(0,this)}end(){return new o(this.i,this)}rBegin(){return new o(this.i-1,this,1)}rEnd(){return new o(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(s){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=s,this.i}popBack(){if(this.i===0)return;let s=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,s}pushFront(s){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=s,this.i}popFront(){if(this.i===0)return;let s=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,s}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let{curNodeBucketIndex:a,curNodePointerIndex:l}=this.O(s);return this.A[a][l]}setElementByPos(s,a){if(s<0||s>this.i-1)throw new RangeError;let{curNodeBucketIndex:l,curNodePointerIndex:u}=this.O(s);this.A[l][u]=a}insert(s,a,l=1){if(s<0||s>this.i)throw new RangeError;if(s===0)for(;l--;)this.pushFront(a);else if(s===this.i)for(;l--;)this.pushBack(a);else{let u=[];for(let c=s;c<this.i;++c)u.push(this.getElementByPos(c));this.cut(s-1);for(let c=0;c<l;++c)this.pushBack(a);for(let c=0;c<u.length;++c)this.pushBack(u[c])}return this.i}cut(s){if(s<0)return this.clear(),0;let{curNodeBucketIndex:a,curNodePointerIndex:l}=this.O(s);return this.R=a,this.N=l,this.i=s+1,this.i}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;if(s===0)this.popFront();else if(s===this.i-1)this.popBack();else{let a=[];for(let u=s+1;u<this.i;++u)a.push(this.getElementByPos(u));this.cut(s),this.popBack();let l=this;a.forEach(function(u){l.pushBack(u)})}return this.i}eraseElementByValue(s){if(this.i===0)return 0;let a=[];for(let u=0;u<this.i;++u){let c=this.getElementByPos(u);c!==s&&a.push(c)}let l=a.length;for(let u=0;u<l;++u)this.setElementByPos(u,a[u]);return this.cut(l-1)}eraseElementByIterator(s){let a=s.o;return this.eraseElementByPos(a),s=s.next(),s}find(s){for(let a=0;a<this.i;++a)if(this.getElementByPos(a)===s)return new o(a,this);return this.end()}reverse(){let s=0,a=this.i-1;for(;s<a;){let l=this.getElementByPos(s);this.setElementByPos(s,this.getElementByPos(a)),this.setElementByPos(a,l),s+=1,a-=1}}unique(){if(this.i<=1)return this.i;let s=1,a=this.getElementByPos(0);for(let l=1;l<this.i;++l){let u=this.getElementByPos(l);u!==a&&(a=u,this.setElementByPos(s++,u))}for(;this.i>s;)this.popBack();return this.i}sort(s){let a=[];for(let l=0;l<this.i;++l)a.push(this.getElementByPos(l));a.sort(s);for(let l=0;l<this.i;++l)this.setElementByPos(l,a[l])}shrinkToFit(){if(this.i===0)return;let s=[];this.forEach(function(a){s.push(a)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let a=0;a<this.P;++a)this.A.push(new Array(this.F));for(let a=0;a<s.length;++a)this.pushBack(s[a])}forEach(s){for(let a=0;a<this.i;++a)s(this.getElementByPos(a),a,this)}[Symbol.iterator](){return(function*(){for(let s=0;s<this.i;++s)yield this.getElementByPos(s)}).bind(this)()}},n=r;p.default=n}),Hl=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.TreeNodeEnableIndex=p.TreeNode=void 0;var e=class{constructor(i,o){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=i,this.l=o}L(){let i=this;if(i.ee===1&&i.tt.tt===i)i=i.W;else if(i.U)for(i=i.U;i.W;)i=i.W;else{let o=i.tt;for(;o.U===i;)i=o,o=i.tt;i=o}return i}B(){let i=this;if(i.W){for(i=i.W;i.U;)i=i.U;return i}else{let o=i.tt;for(;o.W===i;)i=o,o=i.tt;return i.W!==o?o:i}}te(){let i=this.tt,o=this.W,r=o.U;return i.tt===this?i.tt=o:i.U===this?i.U=o:i.W=o,o.tt=i,o.U=this,this.tt=o,this.W=r,r&&(r.tt=this),o}se(){let i=this.tt,o=this.U,r=o.W;return i.tt===this?i.tt=o:i.U===this?i.U=o:i.W=o,o.tt=i,o.W=this,this.tt=o,this.U=r,r&&(r.tt=this),o}};p.TreeNode=e;var t=class extends e{constructor(){super(...arguments),this.rt=1}te(){let i=super.te();return this.ie(),i.ie(),i}se(){let i=super.se();return this.ie(),i.ie(),i}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};p.TreeNodeEnableIndex=t}),oa=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.default=void 0;var e=Hl(),t=yt(),i=bt(),o=class extends t.Container{constructor(n=function(a,l){return a<l?-1:a>l?1:0},s=!1){super(),this.Y=void 0,this.v=n,s?(this.re=e.TreeNodeEnableIndex,this.M=function(a,l,u){let c=this.ne(a,l,u);if(c){let d=c.tt;for(;d!==this.h;)d.rt+=1,d=d.tt;let y=this.he(c);if(y){let{parentNode:f,grandParent:m,curNode:b}=y;f.ie(),m.ie(),b.ie()}}return this.i},this.V=function(a){let l=this.fe(a);for(;l!==this.h;)l.rt-=1,l=l.tt}):(this.re=e.TreeNode,this.M=function(a,l,u){let c=this.ne(a,l,u);return c&&this.he(c),this.i},this.V=this.fe),this.h=new this.re}X(n,s){let a=this.h;for(;n;){let l=this.v(n.u,s);if(l<0)n=n.W;else if(l>0)a=n,n=n.U;else return n}return a}Z(n,s){let a=this.h;for(;n;)this.v(n.u,s)<=0?n=n.W:(a=n,n=n.U);return a}$(n,s){let a=this.h;for(;n;){let l=this.v(n.u,s);if(l<0)a=n,n=n.W;else if(l>0)n=n.U;else return n}return a}rr(n,s){let a=this.h;for(;n;)this.v(n.u,s)<0?(a=n,n=n.W):n=n.U;return a}ue(n){for(;;){let s=n.tt;if(s===this.h)return;if(n.ee===1){n.ee=0;return}if(n===s.U){let a=s.W;if(a.ee===1)a.ee=0,s.ee=1,s===this.Y?this.Y=s.te():s.te();else if(a.W&&a.W.ee===1){a.ee=s.ee,s.ee=0,a.W.ee=0,s===this.Y?this.Y=s.te():s.te();return}else a.U&&a.U.ee===1?(a.ee=1,a.U.ee=0,a.se()):(a.ee=1,n=s)}else{let a=s.U;if(a.ee===1)a.ee=0,s.ee=1,s===this.Y?this.Y=s.se():s.se();else if(a.U&&a.U.ee===1){a.ee=s.ee,s.ee=0,a.U.ee=0,s===this.Y?this.Y=s.se():s.se();return}else a.W&&a.W.ee===1?(a.ee=1,a.W.ee=0,a.te()):(a.ee=1,n=s)}}}fe(n){if(this.i===1)return this.clear(),this.h;let s=n;for(;s.U||s.W;){if(s.W)for(s=s.W;s.U;)s=s.U;else s=s.U;[n.u,s.u]=[s.u,n.u],[n.l,s.l]=[s.l,n.l],n=s}this.h.U===s?this.h.U=s.tt:this.h.W===s&&(this.h.W=s.tt),this.ue(s);let a=s.tt;return s===a.U?a.U=void 0:a.W=void 0,this.i-=1,this.Y.ee=0,a}oe(n,s){return n===void 0?!1:this.oe(n.U,s)||s(n)?!0:this.oe(n.W,s)}he(n){for(;;){let s=n.tt;if(s.ee===0)return;let a=s.tt;if(s===a.U){let l=a.W;if(l&&l.ee===1){if(l.ee=s.ee=0,a===this.Y)return;a.ee=1,n=a;continue}else if(n===s.W){if(n.ee=0,n.U&&(n.U.tt=s),n.W&&(n.W.tt=a),s.W=n.U,a.U=n.W,n.U=s,n.W=a,a===this.Y)this.Y=n,this.h.tt=n;else{let u=a.tt;u.U===a?u.U=n:u.W=n}return n.tt=a.tt,s.tt=n,a.tt=n,a.ee=1,{parentNode:s,grandParent:a,curNode:n}}else s.ee=0,a===this.Y?this.Y=a.se():a.se(),a.ee=1}else{let l=a.U;if(l&&l.ee===1){if(l.ee=s.ee=0,a===this.Y)return;a.ee=1,n=a;continue}else if(n===s.U){if(n.ee=0,n.U&&(n.U.tt=a),n.W&&(n.W.tt=s),a.W=n.U,s.U=n.W,n.U=a,n.W=s,a===this.Y)this.Y=n,this.h.tt=n;else{let u=a.tt;u.U===a?u.U=n:u.W=n}return n.tt=a.tt,s.tt=n,a.tt=n,a.ee=1,{parentNode:s,grandParent:a,curNode:n}}else s.ee=0,a===this.Y?this.Y=a.te():a.te(),a.ee=1}return}}ne(n,s,a){if(this.Y===void 0){this.i+=1,this.Y=new this.re(n,s),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let l,u=this.h.U,c=this.v(u.u,n);if(c===0){u.l=s;return}else if(c>0)u.U=new this.re(n,s),u.U.tt=u,l=u.U,this.h.U=l;else{let d=this.h.W,y=this.v(d.u,n);if(y===0){d.l=s;return}else if(y<0)d.W=new this.re(n,s),d.W.tt=d,l=d.W,this.h.W=l;else{if(a!==void 0){let f=a.o;if(f!==this.h){let m=this.v(f.u,n);if(m===0){f.l=s;return}else if(m>0){let b=f.L(),E=this.v(b.u,n);if(E===0){b.l=s;return}else E<0&&(l=new this.re(n,s),b.W===void 0?(b.W=l,l.tt=b):(f.U=l,l.tt=f))}}}if(l===void 0)for(l=this.Y;;){let f=this.v(l.u,n);if(f>0){if(l.U===void 0){l.U=new this.re(n,s),l.U.tt=l,l=l.U;break}l=l.U}else if(f<0){if(l.W===void 0){l.W=new this.re(n,s),l.W.tt=l,l=l.W;break}l=l.W}else{l.l=s;return}}}}return this.i+=1,l}I(n,s){for(;n;){let a=this.v(n.u,s);if(a<0)n=n.W;else if(a>0)n=n.U;else return n}return n||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(n,s){let a=n.o;if(a===this.h&&(0,i.throwIteratorAccessError)(),this.i===1)return a.u=s,!0;if(a===this.h.U)return this.v(a.B().u,s)>0?(a.u=s,!0):!1;if(a===this.h.W)return this.v(a.L().u,s)<0?(a.u=s,!0):!1;let l=a.L().u;if(this.v(l,s)>=0)return!1;let u=a.B().u;return this.v(u,s)<=0?!1:(a.u=s,!0)}eraseElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let s=0,a=this;return this.oe(this.Y,function(l){return n===s?(a.V(l),!0):(s+=1,!1)}),this.i}eraseElementByKey(n){if(this.i===0)return!1;let s=this.I(this.Y,n);return s===this.h?!1:(this.V(s),!0)}eraseElementByIterator(n){let s=n.o;s===this.h&&(0,i.throwIteratorAccessError)();let a=s.W===void 0;return n.iteratorType===0?a&&n.next():(!a||s.U===void 0)&&n.next(),this.V(s),n}forEach(n){let s=0;for(let a of this)n(a,s++,this)}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let s,a=0;for(let l of this){if(a===n){s=l;break}a+=1}return s}getHeight(){if(this.i===0)return 0;let n=function(s){return s?Math.max(n(s.U),n(s.W))+1:0};return n(this.Y)}},r=o;p.default=r}),aa=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.default=void 0;var e=yt(),t=bt(),i=class extends e.ContainerIterator{constructor(r,n,s){super(s),this.o=r,this.h=n,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let r=this.o,n=this.h.tt;if(r===this.h)return n?n.rt-1:0;let s=0;for(r.U&&(s+=r.U.rt);r!==n;){let a=r.tt;r===a.W&&(s+=1,a.U&&(s+=a.U.rt)),r=a}return s}},o=i;p.default=o}),ql=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.default=void 0;var e=o(oa()),t=o(aa()),i=bt();function o(a){return a&&a.t?a:{default:a}}var r=class la extends t.default{constructor(l,u,c,d){super(l,u,d),this.container=c}get pointer(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o.u}copy(){return new la(this.o,this.h,this.container,this.iteratorType)}},n=class extends e.default{constructor(a=[],l,u){super(l,u);let c=this;a.forEach(function(d){c.insert(d)})}*K(a){a!==void 0&&(yield*this.K(a.U),yield a.u,yield*this.K(a.W))}begin(){return new r(this.h.U||this.h,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this.h.W||this.h,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(a,l){return this.M(a,void 0,l)}find(a){let l=this.I(this.Y,a);return new r(l,this.h,this)}lowerBound(a){let l=this.X(this.Y,a);return new r(l,this.h,this)}upperBound(a){let l=this.Z(this.Y,a);return new r(l,this.h,this)}reverseLowerBound(a){let l=this.$(this.Y,a);return new r(l,this.h,this)}reverseUpperBound(a){let l=this.rr(this.Y,a);return new r(l,this.h,this)}union(a){let l=this;return a.forEach(function(u){l.insert(u)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},s=n;p.default=s}),$l=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.default=void 0;var e=o(oa()),t=o(aa()),i=bt();function o(a){return a&&a.t?a:{default:a}}var r=class ua extends t.default{constructor(l,u,c,d){super(l,u,d),this.container=c}get pointer(){this.o===this.h&&(0,i.throwIteratorAccessError)();let l=this;return new Proxy([],{get(u,c){if(c==="0")return l.o.u;if(c==="1")return l.o.l},set(u,c,d){if(c!=="1")throw new TypeError("props must be 1");return l.o.l=d,!0}})}copy(){return new ua(this.o,this.h,this.container,this.iteratorType)}},n=class extends e.default{constructor(a=[],l,u){super(l,u);let c=this;a.forEach(function(d){c.setElement(d[0],d[1])})}*K(a){a!==void 0&&(yield*this.K(a.U),yield[a.u,a.l],yield*this.K(a.W))}begin(){return new r(this.h.U||this.h,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this.h.W||this.h,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){if(this.i===0)return;let a=this.h.U;return[a.u,a.l]}back(){if(this.i===0)return;let a=this.h.W;return[a.u,a.l]}lowerBound(a){let l=this.X(this.Y,a);return new r(l,this.h,this)}upperBound(a){let l=this.Z(this.Y,a);return new r(l,this.h,this)}reverseLowerBound(a){let l=this.$(this.Y,a);return new r(l,this.h,this)}reverseUpperBound(a){let l=this.rr(this.Y,a);return new r(l,this.h,this)}setElement(a,l,u){return this.M(a,l,u)}find(a){let l=this.I(this.Y,a);return new r(l,this.h,this)}getElementByKey(a){return this.I(this.Y,a).l}union(a){let l=this;return a.forEach(function(u){l.setElement(u[0],u[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},s=n;p.default=s}),ha=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.default=e;function e(t){let i=typeof t;return i==="object"&&t!==null||i==="function"}}),ca=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.HashContainerIterator=p.HashContainer=void 0;var e=yt(),t=o(ha()),i=bt();function o(s){return s&&s.t?s:{default:s}}var r=class extends e.ContainerIterator{constructor(s,a,l){super(l),this.o=s,this.h=a,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o=this.o.L,this})}};p.HashContainerIterator=r;var n=class extends e.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(s){let{L:a,B:l}=s;a.B=l,l.L=a,s===this.p&&(this.p=l),s===this._&&(this._=a),this.i-=1}M(s,a,l){l===void 0&&(l=(0,t.default)(s));let u;if(l){let c=s[this.HASH_TAG];if(c!==void 0)return this.H[c].l=a,this.i;Object.defineProperty(s,this.HASH_TAG,{value:this.H.length,configurable:!0}),u={u:s,l:a,L:this._,B:this.h},this.H.push(u)}else{let c=this.g[s];if(c)return c.l=a,this.i;u={u:s,l:a,L:this._,B:this.h},this.g[s]=u}return this.i===0?(this.p=u,this.h.B=u):this._.B=u,this._=u,this.h.L=u,++this.i}I(s,a){if(a===void 0&&(a=(0,t.default)(s)),a){let l=s[this.HASH_TAG];return l===void 0?this.h:this.H[l]}else return this.g[s]||this.h}clear(){let s=this.HASH_TAG;this.H.forEach(function(a){delete a.u[s]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(s,a){let l;if(a===void 0&&(a=(0,t.default)(s)),a){let u=s[this.HASH_TAG];if(u===void 0)return!1;delete s[this.HASH_TAG],l=this.H[u],delete this.H[u]}else{if(l=this.g[s],l===void 0)return!1;delete this.g[s]}return this.V(l),!0}eraseElementByIterator(s){let a=s.o;return a===this.h&&(0,i.throwIteratorAccessError)(),this.V(a),s.next()}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let a=this.p;for(;s--;)a=a.B;return this.V(a),this.i}};p.HashContainer=n}),Gl=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.default=void 0;var e=ca(),t=bt(),i=class fa extends e.HashContainerIterator{constructor(s,a,l,u){super(s,a,u),this.container=l}get pointer(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o.u}copy(){return new fa(this.o,this.h,this.container,this.iteratorType)}},o=class extends e.HashContainer{constructor(n=[]){super();let s=this;n.forEach(function(a){s.insert(a)})}begin(){return new i(this.p,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this._,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(n,s){return this.M(n,void 0,s)}getElementByPos(n){if(n<0||n>this.i-1)throw new RangeError;let s=this.p;for(;n--;)s=s.B;return s.u}find(n,s){let a=this.I(n,s);return new i(a,this.h,this)}forEach(n){let s=0,a=this.p;for(;a!==this.h;)n(a.u,s++,this),a=a.B}[Symbol.iterator](){return(function*(){let n=this.p;for(;n!==this.h;)yield n.u,n=n.B}).bind(this)()}},r=o;p.default=r}),Vl=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),p.default=void 0;var e=ca(),t=o(ha()),i=bt();function o(a){return a&&a.t?a:{default:a}}var r=class da extends e.HashContainerIterator{constructor(l,u,c,d){super(l,u,d),this.container=c}get pointer(){this.o===this.h&&(0,i.throwIteratorAccessError)();let l=this;return new Proxy([],{get(u,c){if(c==="0")return l.o.u;if(c==="1")return l.o.l},set(u,c,d){if(c!=="1")throw new TypeError("props must be 1");return l.o.l=d,!0}})}copy(){return new da(this.o,this.h,this.container,this.iteratorType)}},n=class extends e.HashContainer{constructor(a=[]){super();let l=this;a.forEach(function(u){l.setElement(u[0],u[1])})}begin(){return new r(this.p,this.h,this)}end(){return new r(this.h,this.h,this)}rBegin(){return new r(this._,this.h,this,1)}rEnd(){return new r(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(a,l,u){return this.M(a,l,u)}getElementByKey(a,l){if(l===void 0&&(l=(0,t.default)(a)),l){let c=a[this.HASH_TAG];return c!==void 0?this.H[c].l:void 0}let u=this.g[a];return u?u.l:void 0}getElementByPos(a){if(a<0||a>this.i-1)throw new RangeError;let l=this.p;for(;a--;)l=l.B;return[l.u,l.l]}find(a,l){let u=this.I(a,l);return new r(u,this.h,this)}forEach(a){let l=0,u=this.p;for(;u!==this.h;)a([u.u,u.l],l++,this),u=u.B}[Symbol.iterator](){return(function*(){let a=this.p;for(;a!==this.h;)yield[a.u,a.l],a=a.B}).bind(this)()}},s=n;p.default=s}),Kl=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"t",{value:!0}),Object.defineProperty(p,"Deque",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(p,"HashMap",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(p,"HashSet",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(p,"LinkList",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(p,"OrderedMap",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(p,"OrderedSet",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(p,"PriorityQueue",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(p,"Queue",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(p,"Stack",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(p,"Vector",{enumerable:!0,get:function(){return o.default}});var e=c(jl()),t=c(Bl()),i=c(Ul()),o=c(Fl()),r=c(Wl()),n=c(zl()),s=c(ql()),a=c($l()),l=c(Gl()),u=c(Vl());function c(d){return d&&d.t?d:{default:d}}}),Yl=ge((p,e)=>{ue(),ce(),he();var t=Kl().OrderedSet,i=gt()("number-allocator:trace"),o=gt()("number-allocator:error");function r(s,a){this.low=s,this.high=a}r.prototype.equals=function(s){return this.low===s.low&&this.high===s.high},r.prototype.compare=function(s){return this.low<s.low&&this.high<s.low?-1:s.low<this.low&&s.high<this.low?1:0};function n(s,a){if(!(this instanceof n))return new n(s,a);this.min=s,this.max=a,this.ss=new t([],(l,u)=>l.compare(u)),i("Create"),this.clear()}n.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},n.prototype.alloc=function(){if(this.ss.size()===0)return i("alloc():empty"),null;let s=this.ss.begin(),a=s.pointer.low,l=s.pointer.high,u=a;return u+1<=l?this.ss.updateKeyByIterator(s,new r(a+1,l)):this.ss.eraseElementByPos(0),i("alloc():"+u),u},n.prototype.use=function(s){let a=new r(s,s),l=this.ss.lowerBound(a);if(!l.equals(this.ss.end())){let u=l.pointer.low,c=l.pointer.high;return l.pointer.equals(a)?(this.ss.eraseElementByIterator(l),i("use():"+s),!0):u>s?!1:u===s?(this.ss.updateKeyByIterator(l,new r(u+1,c)),i("use():"+s),!0):c===s?(this.ss.updateKeyByIterator(l,new r(u,c-1)),i("use():"+s),!0):(this.ss.updateKeyByIterator(l,new r(s+1,c)),this.ss.insert(new r(u,s-1)),i("use():"+s),!0)}return i("use():failed"),!1},n.prototype.free=function(s){if(s<this.min||s>this.max){o("free():"+s+" is out of range");return}let a=new r(s,s),l=this.ss.upperBound(a);if(l.equals(this.ss.end())){if(l.equals(this.ss.begin())){this.ss.insert(a);return}l.pre();let u=l.pointer.high;l.pointer.high+1===s?this.ss.updateKeyByIterator(l,new r(u,s)):this.ss.insert(a)}else if(l.equals(this.ss.begin()))if(s+1===l.pointer.low){let u=l.pointer.high;this.ss.updateKeyByIterator(l,new r(s,u))}else this.ss.insert(a);else{let u=l.pointer.low,c=l.pointer.high;l.pre();let d=l.pointer.low;l.pointer.high+1===s?s+1===u?(this.ss.eraseElementByIterator(l),this.ss.updateKeyByIterator(l,new r(d,c))):this.ss.updateKeyByIterator(l,new r(d,s)):s+1===u?(this.ss.eraseElementByIterator(l.next()),this.ss.insert(new r(s,c))):this.ss.insert(a)}i("free():"+s)},n.prototype.clear=function(){i("clear()"),this.ss.clear(),this.ss.insert(new r(this.min,this.max))},n.prototype.intervalCount=function(){return this.ss.size()},n.prototype.dump=function(){console.log("length:"+this.ss.size());for(let s of this.ss)console.log(s)},e.exports=n}),pa=ge((p,e)=>{ue(),ce(),he();var t=Yl();e.exports.NumberAllocator=t}),Ql=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"__esModule",{value:!0});var e=Dl(),t=pa(),i=class{aliasToTopic;topicToAlias;max;numberAllocator;length;constructor(o){o>0&&(this.aliasToTopic=new e.LRUCache({max:o}),this.topicToAlias={},this.numberAllocator=new t.NumberAllocator(1,o),this.max=o,this.length=0)}put(o,r){if(r===0||r>this.max)return!1;let n=this.aliasToTopic.get(r);return n&&delete this.topicToAlias[n],this.aliasToTopic.set(r,o),this.topicToAlias[o]=r,this.numberAllocator.use(r),this.length=this.aliasToTopic.size,!0}getTopicByAlias(o){return this.aliasToTopic.get(o)}getAliasByTopic(o){let r=this.topicToAlias[o];return typeof r<"u"&&this.aliasToTopic.get(r),r}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};p.default=i}),Xl=ge(p=>{ue(),ce(),he();var e=p&&p.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(p,"__esModule",{value:!0});var t=$r(),i=e(Ql()),o=zt(),r=(n,s)=>{n.log("_handleConnack");let{options:a}=n,l=a.protocolVersion===5?s.reasonCode:s.returnCode;if(clearTimeout(n.connackTimer),delete n.topicAliasSend,s.properties){if(s.properties.topicAliasMaximum){if(s.properties.topicAliasMaximum>65535){n.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}s.properties.topicAliasMaximum>0&&(n.topicAliasSend=new i.default(s.properties.topicAliasMaximum))}s.properties.serverKeepAlive&&a.keepalive&&(a.keepalive=s.properties.serverKeepAlive),s.properties.maximumPacketSize&&(a.properties||(a.properties={}),a.properties.maximumPacketSize=s.properties.maximumPacketSize)}if(l===0)n.reconnecting=!1,n._onConnect(s);else if(l>0){let u=new o.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[l]}`,l);n.emit("error",u),n.options.reconnectOnConnackError&&n._cleanUp(!0)}};p.default=r}),Jl=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"__esModule",{value:!0});var e=(t,i,o)=>{t.log("handling pubrel packet");let r=typeof o<"u"?o:t.noop,{messageId:n}=i,s={cmd:"pubcomp",messageId:n};t.incomingStore.get(i,(a,l)=>{a?t._sendPacket(s,r):(t.emit("message",l.topic,l.payload,l),t.handleMessage(l,u=>{if(u)return r(u);t.incomingStore.del(l,t.noop),t._sendPacket(s,r)}))})};p.default=e}),Zl=ge(p=>{ue(),ce(),he();var e=p&&p.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(p,"__esModule",{value:!0});var t=e(Ml()),i=e(Ll()),o=e(Xl()),r=e($r()),n=e(Jl()),s=(a,l,u)=>{let{options:c}=a;if(c.protocolVersion===5&&c.properties&&c.properties.maximumPacketSize&&c.properties.maximumPacketSize<l.length)return a.emit("error",new Error(`exceeding packets size ${l.cmd}`)),a.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),a;switch(a.log("_handlePacket :: emitting packetreceive"),a.emit("packetreceive",l),l.cmd){case"publish":(0,t.default)(a,l,u);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":a.reschedulePing(),(0,r.default)(a,l),u();break;case"pubrel":a.reschedulePing(),(0,n.default)(a,l,u);break;case"connack":(0,o.default)(a,l),u();break;case"auth":a.reschedulePing(),(0,i.default)(a,l),u();break;case"pingresp":a.log("_handlePacket :: received pingresp"),a.reschedulePing(!0),u();break;case"disconnect":a.emit("disconnect",l),u();break;default:a.log("_handlePacket :: unknown command"),u();break}};p.default=s}),ga=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"__esModule",{value:!0});var e=class{nextId;constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let t=this.nextId++;return this.nextId===65536&&(this.nextId=1),t}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(t){return!0}deallocate(t){}clear(){}};p.default=e}),eu=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"__esModule",{value:!0});var e=class{aliasToTopic;max;length;constructor(t){this.aliasToTopic={},this.max=t}put(t,i){return i===0||i>this.max?!1:(this.aliasToTopic[i]=t,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(t){return this.aliasToTopic[t]}clear(){this.aliasToTopic={}}};p.default=e}),tu=ge(p=>{ue(),ce(),he();var e=p&&p.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(p,"__esModule",{value:!0}),p.TypedEventEmitter=void 0;var t=e((Pt(),Me(xt))),i=zt(),o=class{};p.TypedEventEmitter=o,(0,i.applyMixin)(o,t.default)}),Gr=ge((p,e)=>{ue(),ce(),he();function t(i){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),ru=ge((p,e)=>{ue(),ce(),he();var t=Gr().default;function i(o,r){if(t(o)!="object"||!o)return o;var n=o[Symbol.toPrimitive];if(n!==void 0){var s=n.call(o,r||"default");if(t(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(o)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),iu=ge((p,e)=>{ue(),ce(),he();var t=Gr().default,i=ru();function o(r){var n=i(r,"string");return t(n)=="symbol"?n:n+""}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}),nu=ge((p,e)=>{ue(),ce(),he();var t=iu();function i(o,r,n){return(r=t(r))in o?Object.defineProperty(o,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[r]=n,o}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),su=ge((p,e)=>{ue(),ce(),he();function t(i){if(Array.isArray(i))return i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),ou=ge((p,e)=>{ue(),ce(),he();function t(i,o){var r=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(r!=null){var n,s,a,l,u=[],c=!0,d=!1;try{if(a=(r=r.call(i)).next,o===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(u.push(n.value),u.length!==o);c=!0);}catch(y){d=!0,s=y}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw s}}return u}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),au=ge((p,e)=>{ue(),ce(),he();function t(i,o){(o==null||o>i.length)&&(o=i.length);for(var r=0,n=Array(o);r<o;r++)n[r]=i[r];return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),lu=ge((p,e)=>{ue(),ce(),he();var t=au();function i(o,r){if(o){if(typeof o=="string")return t(o,r);var n={}.toString.call(o).slice(8,-1);return n==="Object"&&o.constructor&&(n=o.constructor.name),n==="Map"||n==="Set"?Array.from(o):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(o,r):void 0}}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),uu=ge((p,e)=>{ue(),ce(),he();function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),hu=ge((p,e)=>{ue(),ce(),he();var t=su(),i=ou(),o=lu(),r=uu();function n(s,a){return t(s)||i(s,a)||o(s,a)||r()}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),ma=ge((p,e)=>{ue(),ce(),he(),(function(t,i){typeof p=="object"&&typeof e<"u"?i(p):typeof define=="function"&&define.amd?define(["exports"],i):(t=typeof globalThis<"u"?globalThis:t||self,i(t.fastUniqueNumbers={}))})(p,function(t){var i=function(y){return function(f){var m=y(f);return f.add(m),m}},o=function(y){return function(f,m){return y.set(f,m),m}},r=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,n=536870912,s=n*2,a=function(y,f){return function(m){var b=f.get(m),E=b===void 0?m.size:b<s?b+1:0;if(!m.has(E))return y(m,E);if(m.size<n){for(;m.has(E);)E=Math.floor(Math.random()*s);return y(m,E)}if(m.size>r)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;m.has(E);)E=Math.floor(Math.random()*r);return y(m,E)}},l=new WeakMap,u=o(l),c=a(u,l),d=i(c);t.addUniqueNumber=d,t.generateUniqueNumber=c})}),cu=ge((p,e)=>{ue(),ce(),he();function t(o,r,n,s,a,l,u){try{var c=o[l](u),d=c.value}catch(y){return void n(y)}c.done?r(d):Promise.resolve(d).then(s,a)}function i(o){return function(){var r=this,n=arguments;return new Promise(function(s,a){var l=o.apply(r,n);function u(d){t(l,s,a,u,c,"next",d)}function c(d){t(l,s,a,u,c,"throw",d)}u(void 0)})}}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),ya=ge((p,e)=>{ue(),ce(),he();function t(i,o){this.v=i,this.k=o}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),ba=ge((p,e)=>{ue(),ce(),he();function t(i,o,r,n){var s=Object.defineProperty;try{s({},"",{})}catch{s=0}e.exports=t=function(a,l,u,c){function d(y,f){t(a,y,function(m){return this._invoke(y,f,m)})}l?s?s(a,l,{value:u,enumerable:!c,configurable:!c,writable:!c}):a[l]=u:(d("next",0),d("throw",1),d("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(i,o,r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),va=ge((p,e)=>{ue(),ce(),he();var t=ba();function i(){var o,r,n=typeof Symbol=="function"?Symbol:{},s=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function l(E,g,_,x){var v=g&&g.prototype instanceof c?g:c,A=Object.create(v.prototype);return t(A,"_invoke",(function(S,I,P){var C,B,T,z=0,U=P||[],D=!1,le={p:0,n:0,v:o,a:Y,f:Y.bind(o,4),d:function(G,re){return C=G,B=0,T=o,le.n=re,u}};function Y(G,re){for(B=G,T=re,r=0;!D&&z&&!F&&r<U.length;r++){var F,Z=U[r],R=le.p,X=Z[2];G>3?(F=X===re)&&(T=Z[(B=Z[4])?5:(B=3,3)],Z[4]=Z[5]=o):Z[0]<=R&&((F=G<2&&R<Z[1])?(B=0,le.v=re,le.n=Z[1]):R<X&&(F=G<3||Z[0]>re||re>X)&&(Z[4]=G,Z[5]=re,le.n=X,B=0))}if(F||G>1)return u;throw D=!0,re}return function(G,re,F){if(z>1)throw TypeError("Generator is already running");for(D&&re===1&&Y(re,F),B=re,T=F;(r=B<2?o:T)||!D;){C||(B?B<3?(B>1&&(le.n=-1),Y(B,T)):le.n=T:le.v=T);try{if(z=2,C){if(B||(G="next"),r=C[G]){if(!(r=r.call(C,T)))throw TypeError("iterator result is not an object");if(!r.done)return r;T=r.value,B<2&&(B=0)}else B===1&&(r=C.return)&&r.call(C),B<2&&(T=TypeError("The iterator does not provide a '"+G+"' method"),B=1);C=o}else if((r=(D=le.n<0)?T:S.call(I,le))!==u)break}catch(Z){C=o,B=1,T=Z}finally{z=1}}return{value:r,done:D}}})(E,_,x),!0),A}var u={};function c(){}function d(){}function y(){}r=Object.getPrototypeOf;var f=[][s]?r(r([][s]())):(t(r={},s,function(){return this}),r),m=y.prototype=c.prototype=Object.create(f);function b(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,y):(E.__proto__=y,t(E,a,"GeneratorFunction")),E.prototype=Object.create(m),E}return d.prototype=y,t(m,"constructor",y),t(y,"constructor",d),d.displayName="GeneratorFunction",t(y,a,"GeneratorFunction"),t(m),t(m,a,"Generator"),t(m,s,function(){return this}),t(m,"toString",function(){return"[object Generator]"}),(e.exports=i=function(){return{w:l,m:b}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),wa=ge((p,e)=>{ue(),ce(),he();var t=ya(),i=ba();function o(r,n){function s(l,u,c,d){try{var y=r[l](u),f=y.value;return f instanceof t?n.resolve(f.v).then(function(m){s("next",m,c,d)},function(m){s("throw",m,c,d)}):n.resolve(f).then(function(m){y.value=m,c(y)},function(m){return s("throw",m,c,d)})}catch(m){d(m)}}var a;this.next||(i(o.prototype),i(o.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),i(this,"_invoke",function(l,u,c){function d(){return new n(function(y,f){s(l,c,y,f)})}return a=a?a.then(d,d):d()},!0)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}),_a=ge((p,e)=>{ue(),ce(),he();var t=va(),i=wa();function o(r,n,s,a,l){return new i(t().w(r,n,s,a),l||Promise)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}),fu=ge((p,e)=>{ue(),ce(),he();var t=_a();function i(o,r,n,s,a){var l=t(o,r,n,s,a);return l.next().then(function(u){return u.done?u.value:l.next()})}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),du=ge((p,e)=>{ue(),ce(),he();function t(i){var o=Object(i),r=[];for(var n in o)r.unshift(n);return function s(){for(;r.length;)if((n=r.pop())in o)return s.value=n,s.done=!1,s;return s.done=!0,s}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),pu=ge((p,e)=>{ue(),ce(),he();var t=Gr().default;function i(o){if(o!=null){var r=o[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],n=0;if(r)return r.call(o);if(typeof o.next=="function")return o;if(!isNaN(o.length))return{next:function(){return o&&n>=o.length&&(o=void 0),{value:o&&o[n++],done:!o}}}}throw new TypeError(t(o)+" is not iterable")}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),gu=ge((p,e)=>{ue(),ce(),he();var t=ya(),i=va(),o=fu(),r=_a(),n=wa(),s=du(),a=pu();function l(){var u=i(),c=u.m(l),d=(Object.getPrototypeOf?Object.getPrototypeOf(c):c.__proto__).constructor;function y(b){var E=typeof b=="function"&&b.constructor;return!!E&&(E===d||(E.displayName||E.name)==="GeneratorFunction")}var f={throw:1,return:2,break:3,continue:3};function m(b){var E,g;return function(_){E||(E={stop:function(){return g(_.a,2)},catch:function(){return _.v},abrupt:function(x,v){return g(_.a,f[x],v)},delegateYield:function(x,v,A){return E.resultName=v,g(_.d,a(x),A)},finish:function(x){return g(_.f,x)}},g=function(x,v,A){_.p=E.prev,_.n=E.next;try{return x(v,A)}finally{E.next=_.n}}),E.resultName&&(E[E.resultName]=_.v,E.resultName=void 0),E.sent=_.v,E.next=_.n;try{return b.call(this,E)}finally{_.p=E.prev,_.n=E.next}}}return(e.exports=l=function(){return{wrap:function(b,E,g,_){return u.w(m(b),E,g,_&&_.reverse())},isGeneratorFunction:y,mark:u.m,awrap:function(b,E){return new t(b,E)},AsyncIterator:n,async:function(b,E,g,_,x){return(y(E)?r:o)(m(b),E,g,_,x)},keys:s,values:a}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=l,e.exports.__esModule=!0,e.exports.default=e.exports}),mu=ge((p,e)=>{ue(),ce(),he();var t=gu()();e.exports=t;try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}),yu=ge((p,e)=>{ue(),ce(),he(),(function(t,i){typeof p=="object"&&typeof e<"u"?i(p,nu(),hu(),ma(),cu(),mu()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/defineProperty","@babel/runtime/helpers/slicedToArray","fast-unique-numbers","@babel/runtime/helpers/asyncToGenerator","@babel/runtime/regenerator"],i):(t=typeof globalThis<"u"?globalThis:t||self,i(t.brokerFactory={},t._defineProperty,t._slicedToArray,t.fastUniqueNumbers,t._asyncToGenerator,t._regeneratorRuntime))})(p,function(t,i,o,r,n,s){var a=function(g){return typeof g.start=="function"},l=new WeakMap;function u(g,_){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);_&&(v=v.filter(function(A){return Object.getOwnPropertyDescriptor(g,A).enumerable})),x.push.apply(x,v)}return x}function c(g){for(var _=1;_<arguments.length;_++){var x=arguments[_]!=null?arguments[_]:{};_%2?u(Object(x),!0).forEach(function(v){i(g,v,x[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(x)):u(Object(x)).forEach(function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(x,v))})}return g}var d=function(g){return c(c({},g),{},{connect:function(_){var x=_.call;return n(s.mark(function v(){var A,S,I,P;return s.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return A=new MessageChannel,S=A.port1,I=A.port2,C.next=1,x("connect",{port:S},[S]);case 1:return P=C.sent,l.set(I,P),C.abrupt("return",I);case 2:case"end":return C.stop()}},v)}))},disconnect:function(_){var x=_.call;return(function(){var v=n(s.mark(function A(S){var I;return s.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(I=l.get(S),I!==void 0){P.next=1;break}throw new Error("The given port is not connected.");case 1:return P.next=2,x("disconnect",{portId:I});case 2:case"end":return P.stop()}},A)}));return function(A){return v.apply(this,arguments)}})()},isSupported:function(_){var x=_.call;return function(){return x("isSupported")}}})};function y(g,_){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);_&&(v=v.filter(function(A){return Object.getOwnPropertyDescriptor(g,A).enumerable})),x.push.apply(x,v)}return x}function f(g){for(var _=1;_<arguments.length;_++){var x=arguments[_]!=null?arguments[_]:{};_%2?y(Object(x),!0).forEach(function(v){i(g,v,x[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(x)):y(Object(x)).forEach(function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(x,v))})}return g}var m=new WeakMap,b=function(g){if(m.has(g))return m.get(g);var _=new Map;return m.set(g,_),_},E=function(g){var _=d(g);return function(x){var v=b(x);x.addEventListener("message",function(U){var D=U.data,le=D.id;if(le!==null&&v.has(le)){var Y=v.get(le),G=Y.reject,re=Y.resolve;v.delete(le),D.error===void 0?re(D.result):G(new Error(D.error.message))}}),a(x)&&x.start();for(var A=function(U){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise(function(Y,G){var re=r.generateUniqueNumber(v);v.set(re,{reject:G,resolve:Y}),D===null?x.postMessage({id:re,method:U},le):x.postMessage({id:re,method:U,params:D},le)})},S=function(U,D){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];x.postMessage({id:null,method:U,params:D},le)},I={},P=0,C=Object.entries(_);P<C.length;P++){var B=o(C[P],2),T=B[0],z=B[1];I=f(f({},I),{},i({},T,z({call:A,notify:S})))}return f({},I)}};t.createBroker=E})}),bu=ge((p,e)=>{ue(),ce(),he(),(function(t,i){typeof p=="object"&&typeof e<"u"?i(p,Gr(),yu(),ma()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/typeof","broker-factory","fast-unique-numbers"],i):(t=typeof globalThis<"u"?globalThis:t||self,i(t.workerTimersBroker={},t._typeof,t.brokerFactory,t.fastUniqueNumbers))})(p,function(t,i,o,r){var n=new Map([[0,null]]),s=new Map([[0,null]]),a=o.createBroker({clearInterval:function(u){var c=u.call;return function(d){i(n.get(d))==="symbol"&&(n.set(d,null),c("clear",{timerId:d,timerType:"interval"}).then(function(){n.delete(d)}))}},clearTimeout:function(u){var c=u.call;return function(d){i(s.get(d))==="symbol"&&(s.set(d,null),c("clear",{timerId:d,timerType:"timeout"}).then(function(){s.delete(d)}))}},setInterval:function(u){var c=u.call;return function(d){for(var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,f=arguments.length,m=new Array(f>2?f-2:0),b=2;b<f;b++)m[b-2]=arguments[b];var E=Symbol(),g=r.generateUniqueNumber(n);n.set(g,E);var _=function(){return c("set",{delay:y,now:performance.timeOrigin+performance.now(),timerId:g,timerType:"interval"}).then(function(){var x=n.get(g);if(x===void 0)throw new Error("The timer is in an undefined state.");x===E&&(d.apply(void 0,m),n.get(g)===E&&_())})};return _(),g}},setTimeout:function(u){var c=u.call;return function(d){for(var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,f=arguments.length,m=new Array(f>2?f-2:0),b=2;b<f;b++)m[b-2]=arguments[b];var E=Symbol(),g=r.generateUniqueNumber(s);return s.set(g,E),c("set",{delay:y,now:performance.timeOrigin+performance.now(),timerId:g,timerType:"timeout"}).then(function(){var _=s.get(g);if(_===void 0)throw new Error("The timer is in an undefined state.");_===E&&(s.delete(g),d.apply(void 0,m))}),g}}}),l=function(u){var c=new Worker(u);return a(c)};t.load=l,t.wrap=a})}),vu=ge((p,e)=>{ue(),ce(),he(),(function(t,i){typeof p=="object"&&typeof e<"u"?i(p,bu()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],i):(t=typeof globalThis<"u"?globalThis:t||self,i(t.workerTimers={},t.workerTimersBroker))})(p,function(t,i){var o=function(c,d){var y=null;return function(){if(y!==null)return y;var f=new Blob([d],{type:"application/javascript; charset=utf-8"}),m=URL.createObjectURL(f);return y=c(m),setTimeout(function(){return URL.revokeObjectURL(m)}),y}},r=`(()=>{var e={45:(e,t,r)=>{var n=r(738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,r)=>{var n=r(79);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u,a,i=[],s=!0,c=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=u.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},293:e=>{function t(e,t,r,n,o,u,a){try{var i=e[u](a),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,u){var a=e.apply(r,n);function i(e){t(a,o,u,i,s,"next",e)}function s(e){t(a,o,u,i,s,"throw",e)}i(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},373:e=>{e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},389:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,u=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<u?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*u);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,s=r(i),c=a(s,i),f=t(c);e.addUniqueNumber=f,e.generateUniqueNumber=c}(t)},472:function(e,t,r){!function(e,t,r,n){"use strict";var o=function(e,t){return function(r){var o=t.get(r);if(void 0===o)return Promise.resolve(!1);var u=n(o,2),a=u[0],i=u[1];return e(a),t.delete(r),i(!1),Promise.resolve(!0)}},u=function(e,t){var r=function(n,o,u,a){var i=n-e.now();i>0?o.set(a,[t(r,i,n,o,u,a),u]):(o.delete(a),u(!0))};return r},a=function(e,t,r,n){return function(o,u,a){var i=o+u-t.timeOrigin,s=i-t.now();return new Promise((function(t){e.set(a,[r(n,s,i,e,t,a),t])}))}},i=new Map,s=o(globalThis.clearTimeout,i),c=new Map,f=o(globalThis.clearTimeout,c),l=u(performance,globalThis.setTimeout),p=a(i,performance,globalThis.setTimeout,l),d=a(c,performance,globalThis.setTimeout,l);r.createWorker(self,{clear:function(){var r=e(t.mark((function e(r){var n,o,u;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.timerId,o=r.timerType,e.next=1,"interval"===o?s(n):f(n);case 1:return u=e.sent,e.abrupt("return",{result:u});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}(),set:function(){var r=e(t.mark((function e(r){var n,o,u,a,i;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.delay,o=r.now,u=r.timerId,a=r.timerType,e.next=1,("interval"===a?p:d)(n,o,u);case 1:return i=e.sent,e.abrupt("return",{result:i});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}()})}(r(293),r(756),r(623),r(715))},546:e=>{function t(r,n,o,u){var a=Object.defineProperty;try{a({},"",{})}catch(r){a=0}e.exports=t=function(e,r,n,o){if(r)a?a(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n;else{var u=function(r,n){t(e,r,(function(e){return this._invoke(r,n,e)}))};u("next",0),u("throw",1),u("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,u)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},579:(e,t,r)=>{var n=r(738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},623:function(e,t,r){!function(e,t,r,n,o){"use strict";var u={INTERNAL_ERROR:-32603,INVALID_PARAMS:-32602,METHOD_NOT_FOUND:-32601},a=function(e,t){return Object.assign(new Error(e),{status:t})},i=function(e){return a('The requested method called "'.concat(e,'" is not supported.'),u.METHOD_NOT_FOUND)},s=function(e){return a('The handler of the method called "'.concat(e,'" returned no required result.'),u.INTERNAL_ERROR)},c=function(e){return a('The handler of the method called "'.concat(e,'" returned an unexpected result.'),u.INTERNAL_ERROR)},f=function(e){return a('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),u.INVALID_PARAMS)},l=function(e,n){return function(){var o=t(r.mark((function t(o){var u,a,f,l,p,d,v,x,y,b,h,m,_,g,w;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=o.data,a=u.id,f=u.method,l=u.params,p=n[f],t.prev=1,void 0!==p){t.next=2;break}throw i(f);case 2:if(void 0!==(d=void 0===l?p():p(l))){t.next=3;break}throw s(f);case 3:if(!(d instanceof Promise)){t.next=5;break}return t.next=4,d;case 4:g=t.sent,t.next=6;break;case 5:g=d;case 6:if(v=g,null!==a){t.next=8;break}if(void 0===v.result){t.next=7;break}throw c(f);case 7:t.next=10;break;case 8:if(void 0!==v.result){t.next=9;break}throw c(f);case 9:x=v.result,y=v.transferables,b=void 0===y?[]:y,e.postMessage({id:a,result:x},b);case 10:t.next=12;break;case 11:t.prev=11,w=t.catch(1),h=w.message,m=w.status,_=void 0===m?-32603:m,e.postMessage({error:{code:_,message:h},id:a});case 12:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return o.apply(this,arguments)}}()},p=function(){return new Promise((function(e){var t=new ArrayBuffer(0),r=new MessageChannel,n=r.port1,o=r.port2;n.onmessage=function(t){var r=t.data;return e(null!==r)},o.postMessage(t,[t])}))};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=new Map,y=function(e,n,u){return v(v({},n),{},{connect:function(t){var r=t.port;r.start();var u=e(r,n),a=o.generateUniqueNumber(x);return x.set(a,(function(){u(),r.close(),x.delete(a)})),{result:a}},disconnect:function(e){var t=e.portId,r=x.get(t);if(void 0===r)throw f(t);return r(),{result:null}},isSupported:function(){var e=t(r.mark((function e(){var t,n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,p();case 1:if(!e.sent){e.next=5;break}if(!((t=u())instanceof Promise)){e.next=3;break}return e.next=2,t;case 2:o=e.sent,e.next=4;break;case 3:o=t;case 4:return n=o,e.abrupt("return",{result:n});case 5:return e.abrupt("return",{result:!1});case 6:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()})},b=function(e,t){var r=y(b,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0}),n=l(e,r);return e.addEventListener("message",n),function(){return e.removeEventListener("message",n)}};e.createWorker=b,e.isSupported=p}(t,r(293),r(756),r(693),r(389))},633:(e,t,r)=>{var n=r(172),o=r(993),u=r(869),a=r(887),i=r(791),s=r(373),c=r(579);function f(){"use strict";var t=o(),r=t.m(f),l=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))}var d={throw:1,return:2,break:3,continue:3};function v(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,d[e],t)},delegateYield:function(e,o,u){return t.resultName=o,r(n.d,c(e),u)},finish:function(e){return r(n.f,e)}},r=function(e,r,o){n.p=t.prev,n.n=t.next;try{return e(r,o)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=f=function(){return{wrap:function(e,r,n,o){return t.w(v(e),r,n,o&&o.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:i,async:function(e,t,r,n,o){return(p(t)?a:u)(v(e),t,r,n,o)},keys:s,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports},693:(e,t,r)=>{var n=r(736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},715:(e,t,r)=>{var n=r(987),o=r(156),u=r(122),a=r(752);e.exports=function(e,t){return n(e)||o(e,t)||u(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,r)=>{var n=r(738).default,o=r(45);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var n=r(633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},791:(e,t,r)=>{var n=r(172),o=r(546);e.exports=function e(t,r){function u(e,o,a,i){try{var s=t[e](o),c=s.value;return c instanceof n?r.resolve(c.v).then((function(e){u("next",e,a,i)}),(function(e){u("throw",e,a,i)})):r.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return u("throw",e,a,i)}))}catch(e){i(e)}}var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(e,t,n){function o(){return new r((function(t,r){u(e,n,t,r)}))}return a=a?a.then(o,o):o()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},869:(e,t,r)=>{var n=r(887);e.exports=function(e,t,r,o,u){var a=n(e,t,r,o,u);return a.next().then((function(e){return e.done?e.value:a.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},887:(e,t,r)=>{var n=r(993),o=r(791);e.exports=function(e,t,r,u,a){return new o(n().w(e,t,r,u),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},993:(e,t,r)=>{var n=r(546);function o(){var t,r,u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",i=u.toStringTag||"@@toStringTag";function s(e,o,u,a){var i=o&&o.prototype instanceof f?o:f,s=Object.create(i.prototype);return n(s,"_invoke",function(e,n,o){var u,a,i,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return u=e,a=0,i=t,p.n=r,c}};function d(e,n){for(a=e,i=n,r=0;!l&&s&&!o&&r<f.length;r++){var o,u=f[r],d=p.p,v=u[2];e>3?(o=v===n)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=d&&((o=e<2&&d<u[1])?(a=0,p.v=n,p.n=u[1]):d<v&&(o=e<3||u[0]>n||n>v)&&(u[4]=e,u[5]=n,p.n=v,a=0))}if(o||e>1)return c;throw l=!0,n}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),a=f,i=v;(r=a<2?t:i)||!l;){u||(a?a<3?(a>1&&(p.n=-1),d(a,i)):p.n=i:p.v=i);try{if(s=2,u){if(a||(o="next"),r=u[o]){if(!(r=r.call(u,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,a<2&&(a=0)}else 1===a&&(r=u.return)&&r.call(u),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((r=(l=p.n<0)?i:e.call(n,p))!==c)break}catch(e){u=t,a=1,i=e}finally{s=1}}return{value:r,done:l}}}(e,u,a),!0),s}var c={};function f(){}function l(){}function p(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(n(r={},a,(function(){return this})),r),v=p.prototype=f.prototype=Object.create(d);function x(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return l.prototype=p,n(v,"constructor",p),n(p,"constructor",l),l.displayName="GeneratorFunction",n(p,i,"GeneratorFunction"),n(v),n(v,i,"Generator"),n(v,a,(function(){return this})),n(v,"toString",(function(){return"[object Generator]"})),(e.exports=o=function(){return{w:s,m:x}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var u=t[n]={exports:{}};return e[n].call(u.exports,u,u.exports,r),u.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,n=o(i.load,r),s=function(c){return n().clearInterval(c)},a=function(c){return n().clearTimeout(c)},l=function(){var c;return(c=n()).setInterval.apply(c,arguments)},u=function(){var c;return(c=n()).setTimeout.apply(c,arguments)};t.clearInterval=s,t.clearTimeout=a,t.setInterval=l,t.setTimeout=u})}),Vr=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"__esModule",{value:!0}),p.isReactNativeBrowser=p.isWebWorker=void 0;var e=()=>typeof window<"u"?typeof navigator<"u"&&navigator.userAgent?.toLowerCase().indexOf(" electron/")>-1&&Ne?.versions?!Object.prototype.hasOwnProperty.call(Ne.versions,"electron"):typeof window.document<"u":!1,t=()=>!!(typeof self=="object"&&self?.constructor?.name?.includes("WorkerGlobalScope")&&typeof Deno>"u"),i=()=>typeof navigator<"u"&&navigator.product==="ReactNative",o=e()||t()||i();p.isWebWorker=t(),p.isReactNativeBrowser=i(),p.default=o}),wu=ge(p=>{ue(),ce(),he();var e=p&&p.__createBinding||(Object.create?function(l,u,c,d){d===void 0&&(d=c);var y=Object.getOwnPropertyDescriptor(u,c);(!y||("get"in y?!u.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return u[c]}}),Object.defineProperty(l,d,y)}:function(l,u,c,d){d===void 0&&(d=c),l[d]=u[c]}),t=p&&p.__setModuleDefault||(Object.create?function(l,u){Object.defineProperty(l,"default",{enumerable:!0,value:u})}:function(l,u){l.default=u}),i=p&&p.__importStar||(function(){var l=function(u){return l=Object.getOwnPropertyNames||function(c){var d=[];for(var y in c)Object.prototype.hasOwnProperty.call(c,y)&&(d[d.length]=y);return d},l(u)};return function(u){if(u&&u.__esModule)return u;var c={};if(u!=null)for(var d=l(u),y=0;y<d.length;y++)d[y]!=="default"&&e(c,u,d[y]);return t(c,u),c}})();Object.defineProperty(p,"__esModule",{value:!0});var o=vu(),r=i(Vr()),n={set:o.setInterval,clear:o.clearInterval},s={set:(l,u)=>setInterval(l,u),clear:l=>clearInterval(l)},a=l=>{switch(l){case"native":return s;case"worker":return n;default:return r.default&&!r.isWebWorker&&!r.isReactNativeBrowser?n:s}};p.default=a}),Ea=ge(p=>{ue(),ce(),he();var e=p&&p.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(p,"__esModule",{value:!0});var t=e(wu()),i=class{_keepalive;timerId;timer;destroyed=!1;counter;client;_keepaliveTimeoutTimestamp;_intervalEvery;get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(o,r){this.client=o,this.timer=typeof r=="object"&&"set"in r&&"clear"in r?r:(0,t.default)(r),this.setKeepalive(o.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(o){if(o*=1e3,isNaN(o)||o<=0||o>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${o}`);this._keepalive=o,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${o}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let o=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+o,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};p.default=i}),an=ge(p=>{ue(),ce(),he();var e=p&&p.__createBinding||(Object.create?function(v,A,S,I){I===void 0&&(I=S);var P=Object.getOwnPropertyDescriptor(A,S);(!P||("get"in P?!A.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return A[S]}}),Object.defineProperty(v,I,P)}:function(v,A,S,I){I===void 0&&(I=S),v[I]=A[S]}),t=p&&p.__setModuleDefault||(Object.create?function(v,A){Object.defineProperty(v,"default",{enumerable:!0,value:A})}:function(v,A){v.default=A}),i=p&&p.__importStar||(function(){var v=function(A){return v=Object.getOwnPropertyNames||function(S){var I=[];for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(I[I.length]=P);return I},v(A)};return function(A){if(A&&A.__esModule)return A;var S={};if(A!=null)for(var I=v(A),P=0;P<I.length;P++)I[P]!=="default"&&e(S,A,I[P]);return t(S,A),S}})(),o=p&&p.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(p,"__esModule",{value:!0});var r=o(Ol()),n=Nt(),s=o(Rl()),a=o(gt()),l=i(Pl()),u=o(Jo()),c=o(Zl()),d=o(ga()),y=o(eu()),f=zt(),m=tu(),b=o(Ea()),E=i(Vr()),g=globalThis.setImmediate||((...v)=>{let A=v.shift();(0,f.nextTick)(()=>{A(...v)})}),_={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},x=class ln extends m.TypedEventEmitter{static VERSION=f.MQTTJS_VERSION;connected;disconnecting;disconnected;reconnecting;incomingStore;outgoingStore;options;queueQoSZero;_reconnectCount;log;messageIdProvider;outgoing;messageIdToTopic;noop;keepaliveManager;stream;queue;streamBuilder;_resubscribeTopics;connackTimer;reconnectTimer;_storeProcessing;_packetIdsDuringStoreProcessing;_storeProcessingQueue;_firstConnection;topicAliasRecv;topicAliasSend;_deferredReconnect;connackPacket;static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(A,S){super(),this.options=S||{};for(let I in _)typeof this.options[I]>"u"?this.options[I]=_[I]:this.options[I]=S[I];this.log=this.options.log||(0,a.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",ln.VERSION),E.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",E.default?"browser":"node"),this.log("MqttClient :: options.protocol",S.protocol),this.log("MqttClient :: options.protocolVersion",S.protocolVersion),this.log("MqttClient :: options.username",S.username),this.log("MqttClient :: options.keepalive",S.keepalive),this.log("MqttClient :: options.reconnectPeriod",S.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",S.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",S.properties?S.properties.topicAliasMaximum:void 0),this.options.clientId=typeof S.clientId=="string"?S.clientId:ln.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=S.protocolVersion===5&&S.customHandleAcks?S.customHandleAcks:(...I)=>{I[3](null,0)},this.options.writeCache||(r.default.writeToStream.cacheNumbers=!1),this.streamBuilder=A,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new d.default:this.options.messageIdProvider,this.outgoingStore=S.outgoingStore||new u.default,this.incomingStore=S.incomingStore||new u.default,this.queueQoSZero=S.queueQoSZero===void 0?!0:S.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,S.properties&&S.properties.topicAliasMaximum>0&&(S.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new y.default(S.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:I}=this,P=()=>{let C=I.shift();this.log("deliver :: entry %o",C);let B=null;if(!C){this._resubscribe();return}B=C.packet,this.log("deliver :: call _sendPacket for %o",B);let T=!0;B.messageId&&B.messageId!==0&&(this.messageIdProvider.register(B.messageId)||(T=!1)),T?this._sendPacket(B,z=>{C.cb&&C.cb(z),P()}):(this.log("messageId: %d has already used. The message is skipped and removed.",B.messageId),P())};this.log("connect :: sending queued packets"),P()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(A,S){S()}handleMessage(A,S){S()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){let A=new n.Writable,S=r.default.parser(this.options),I=null,P=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new u.default,this.outgoingStore=this.options.outgoingStore||new u.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),S.on("packet",U=>{this.log("parser :: on packet push to packets array."),P.push(U)});let C=()=>{this.log("work :: getting next packet in queue");let U=P.shift();if(U)this.log("work :: packet pulled from queue"),(0,c.default)(this,U,B);else{this.log("work :: no packets in queue");let D=I;I=null,this.log("work :: done flag is %s",!!D),D&&D()}},B=()=>{if(P.length)(0,f.nextTick)(C);else{let U=I;I=null,U()}};A._write=(U,D,le)=>{I=le,this.log("writable stream :: parsing buffer"),S.parse(U),C()};let T=U=>{this.log("streamErrorHandler :: error",U.message),U.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",U)):this.noop(U)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(A),this.stream.on("error",T),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let z={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(z.will={...this.options.will,payload:this.options.will?.payload}),this.topicAliasRecv&&(z.properties||(z.properties={}),this.topicAliasRecv&&(z.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(z),S.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let U={cmd:"auth",reasonCode:0,...this.options.authPacket};this._writePacket(U)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(A,S,I,P){this.log("publish :: message `%s` to topic `%s`",S,A);let{options:C}=this;typeof I=="function"&&(P=I,I=null),I=I||{},I={qos:0,retain:!1,dup:!1,...I};let{qos:B,retain:T,dup:z,properties:U,cbStorePut:D}=I;if(this._checkDisconnecting(P))return this;let le=()=>{let Y=0;if((B===1||B===2)&&(Y=this._nextId(),Y===null))return this.log("No messageId left"),!1;let G={cmd:"publish",topic:A,payload:S,qos:B,retain:T,messageId:Y,dup:z};switch(C.protocolVersion===5&&(G.properties=U),this.log("publish :: qos",B),B){case 1:case 2:this.outgoing[G.messageId]={volatile:!1,cb:P||this.noop},this.log("MqttClient:publish: packet cmd: %s",G.cmd),this._sendPacket(G,void 0,D);break;default:this.log("MqttClient:publish: packet cmd: %s",G.cmd),this._sendPacket(G,P,D);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!le())&&this._storeProcessingQueue.push({invoke:le,cbStorePut:I.cbStorePut,callback:P}),this}publishAsync(A,S,I){return new Promise((P,C)=>{this.publish(A,S,I,(B,T)=>{B?C(B):P(T)})})}subscribe(A,S,I){let P=this.options.protocolVersion;typeof S=="function"&&(I=S),I=I||this.noop;let C=!1,B=[];typeof A=="string"?(A=[A],B=A):Array.isArray(A)?B=A:typeof A=="object"&&(C=A.resubscribe,delete A.resubscribe,B=Object.keys(A));let T=l.validateTopics(B);if(T!==null)return g(I,new Error(`Invalid topic ${T}`)),this;if(this._checkDisconnecting(I))return this.log("subscribe: discconecting true"),this;let z={qos:0};P===5&&(z.nl=!1,z.rap=!1,z.rh=0),S={...z,...S};let{properties:U}=S,D=[],le=(re,F)=>{if(F=F||S,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,re)||this._resubscribeTopics[re].qos<F.qos||C){let Z={topic:re,qos:F.qos};P===5&&(Z.nl=F.nl,Z.rap=F.rap,Z.rh=F.rh,Z.properties=U),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",Z.topic,Z.qos),D.push(Z)}};if(Array.isArray(A)?A.forEach(re=>{this.log("subscribe: array topic %s",re),le(re)}):Object.keys(A).forEach(re=>{this.log("subscribe: object topic %s, %o",re,A[re]),le(re,A[re])}),!D.length)return I(null,[]),this;let Y=(re,F)=>{let Z={cmd:"subscribe",subscriptions:re,messageId:F};if(U&&(Z.properties=U),this.options.resubscribe){this.log("subscribe :: resubscribe true");let X=[];re.forEach(be=>{if(this.options.reconnectPeriod>0){let te={qos:be.qos};P===5&&(te.nl=be.nl||!1,te.rap=be.rap||!1,te.rh=be.rh||0,te.properties=be.properties),this._resubscribeTopics[be.topic]=te,X.push(be.topic)}}),this.messageIdToTopic[Z.messageId]=X}let R=new Promise((X,be)=>{this.outgoing[Z.messageId]={volatile:!0,cb(te,_e){if(!te){let{granted:V}=_e;for(let L=0;L<V.length;L+=1)re[L].qos=V[L]}te?be(new f.ErrorWithSubackPacket(te.message,_e)):X(_e)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(Z),R},G=()=>{let re=this.options.subscribeBatchSize??D.length,F=[];for(let Z=0;Z<D.length;Z+=re){let R=D.slice(Z,Z+re),X=this._nextId();if(X===null)return this.log("No messageId left"),!1;F.push(Y(R,X))}return Promise.all(F).then(Z=>{I(null,D,Z.at(-1))}).catch(Z=>{I(Z,D,Z.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!G())&&this._storeProcessingQueue.push({invoke:G,callback:I}),this}subscribeAsync(A,S){return new Promise((I,P)=>{this.subscribe(A,S,(C,B)=>{C?P(C):I(B)})})}unsubscribe(A,S,I){typeof A=="string"&&(A=[A]),typeof S=="function"&&(I=S),I=I||this.noop;let P=l.validateTopics(A);if(P!==null)return g(I,new Error(`Invalid topic ${P}`)),this;if(this._checkDisconnecting(I))return this;let C=()=>{let B=this._nextId();if(B===null)return this.log("No messageId left"),!1;let T={cmd:"unsubscribe",messageId:B,unsubscriptions:[]};return typeof A=="string"?T.unsubscriptions=[A]:Array.isArray(A)&&(T.unsubscriptions=A),this.options.resubscribe&&T.unsubscriptions.forEach(z=>{delete this._resubscribeTopics[z]}),typeof S=="object"&&S.properties&&(T.properties=S.properties),this.outgoing[T.messageId]={volatile:!0,cb:I},this.log("unsubscribe: call _sendPacket"),this._sendPacket(T),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!C())&&this._storeProcessingQueue.push({invoke:C,callback:I}),this}unsubscribeAsync(A,S){return new Promise((I,P)=>{this.unsubscribe(A,S,(C,B)=>{C?P(C):I(B)})})}end(A,S,I){this.log("end :: (%s)",this.options.clientId),(A==null||typeof A!="boolean")&&(I=I||S,S=A,A=!1),typeof S!="object"&&(I=I||S,S=null),this.log("end :: cb? %s",!!I),(!I||typeof I!="function")&&(I=this.noop);let P=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(B=>{this.outgoingStore.close(T=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),I){let z=B||T;this.log("end :: closeStores: invoking callback with args"),I(z)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},C=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,A),this._cleanUp(A,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,f.nextTick)(P)},S)};return this.disconnecting?(I(),this):(this._clearReconnect(),this.disconnecting=!0,!A&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,C,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),C()),this)}endAsync(A,S){return new Promise((I,P)=>{this.end(A,S,C=>{C?P(C):I()})})}removeOutgoingMessage(A){if(this.outgoing[A]){let{cb:S}=this.outgoing[A];this._removeOutgoingAndStoreMessage(A,()=>{S(new Error("Message removed"))})}return this}reconnect(A){this.log("client reconnect");let S=()=>{A?(this.options.incomingStore=A.incomingStore,this.options.outgoingStore=A.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new u.default,this.outgoingStore=this.options.outgoingStore||new u.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=S:S(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(A=>{this.outgoing[A].volatile&&typeof this.outgoing[A].cb=="function"&&(this.outgoing[A].cb(new Error("Connection closed")),delete this.outgoing[A])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(A=>{typeof this.outgoing[A].cb=="function"&&(this.outgoing[A].cb(new Error("Connection closed")),delete this.outgoing[A])}))}_removeTopicAliasAndRecoverTopicName(A){let S;A.properties&&(S=A.properties.topicAlias);let I=A.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",S,I),I.length===0){if(typeof S>"u")return new Error("Unregistered Topic Alias");if(I=this.topicAliasSend.getTopicByAlias(S),typeof I>"u")return new Error("Unregistered Topic Alias");A.topic=I}S&&delete A.properties.topicAlias}_checkDisconnecting(A){return this.disconnecting&&(A&&A!==this.noop?A(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(A,S,I={}){if(S&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",S)),this.log("_cleanUp :: forced? %s",A),A)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let P={cmd:"disconnect",...I};this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(P,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),g(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),S&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",S),S())}_storeAndSend(A,S,I){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",A.cmd);let P=A,C;if(P.cmd==="publish"&&(P=(0,s.default)(A),C=this._removeTopicAliasAndRecoverTopicName(P),C))return S&&S(C);this.outgoingStore.put(P,B=>{if(B)return S&&S(B);I(),this._writePacket(A,S)})}_applyTopicAlias(A){if(this.options.protocolVersion===5&&A.cmd==="publish"){let S;A.properties&&(S=A.properties.topicAlias);let I=A.topic.toString();if(this.topicAliasSend)if(S){if(I.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",I,S),!this.topicAliasSend.put(I,S)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",I,S),new Error("Sending Topic Alias out of range")}else I.length!==0&&(this.options.autoAssignTopicAlias?(S=this.topicAliasSend.getAliasByTopic(I),S?(A.topic="",A.properties={...A.properties,topicAlias:S},this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",I,S)):(S=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(I,S),A.properties={...A.properties,topicAlias:S},this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",I,S))):this.options.autoUseTopicAlias&&(S=this.topicAliasSend.getAliasByTopic(I),S&&(A.topic="",A.properties={...A.properties,topicAlias:S},this.log("applyTopicAlias :: auto use topic: %s - alias: %d",I,S))));else if(S)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",I,S),new Error("Sending Topic Alias out of range")}}_noop(A){this.log("noop ::",A)}_writePacket(A,S){this.log("_writePacket :: packet: %O",A),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",A),this.log("_writePacket :: writing to stream");let I=r.default.writeToStream(A,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",I),!I&&S&&S!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",S)):S&&(this.log("_writePacket :: invoking cb"),S())}_sendPacket(A,S,I,P){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),I=I||this.noop,S=S||this.noop;let C=this._applyTopicAlias(A);if(C){S(C);return}if(!this.connected){if(A.cmd==="auth"){this._writePacket(A,S);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(A,S,I);return}if(P){this._writePacket(A,S);return}switch(A.cmd){case"publish":break;case"pubrel":this._storeAndSend(A,S,I);return;default:this._writePacket(A,S);return}switch(A.qos){case 2:case 1:this._storeAndSend(A,S,I);break;default:this._writePacket(A,S);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(A,S,I){this.log("_storePacket :: packet: %o",A),this.log("_storePacket :: cb? %s",!!S),I=I||this.noop;let P=A;if(P.cmd==="publish"){P=(0,s.default)(A);let B=this._removeTopicAliasAndRecoverTopicName(P);if(B)return S&&S(B)}let C=P.qos||0;C===0&&this.queueQoSZero||P.cmd!=="publish"?this.queue.push({packet:P,cb:S}):C>0?(S=this.outgoing[P.messageId]?this.outgoing[P.messageId].cb:null,this.outgoingStore.put(P,B=>{if(B)return S&&S(B);I()})):S&&S(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new b.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(A=!1){this.keepaliveManager&&this.options.keepalive&&(A||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let A=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&A.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let S=0;S<A.length;S++){let I={};I[A[S]]=this._resubscribeTopics[A[S]],I.resubscribe=!0,this.subscribe(I,{properties:I[A[S]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(A){if(this.disconnected){this.emit("connect",A);return}this.connackPacket=A,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let S=()=>{let I=this.outgoingStore.createStream(),P=()=>{I.destroy(),I=null,this._flushStoreProcessingQueue(),C()},C=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",P),I.on("error",T=>{C(),this._flushStoreProcessingQueue(),this.removeListener("close",P),this.emit("error",T)});let B=()=>{if(!I)return;let T=I.read(1),z;if(!T){I.once("readable",B);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[T.messageId]){B();return}!this.disconnecting&&!this.reconnectTimer?(z=this.outgoing[T.messageId]?this.outgoing[T.messageId].cb:null,this.outgoing[T.messageId]={volatile:!1,cb(U,D){z&&z(U,D),B()}},this._packetIdsDuringStoreProcessing[T.messageId]=!0,this.messageIdProvider.register(T.messageId)?this._sendPacket(T,void 0,void 0,!0):this.log("messageId: %d has already used.",T.messageId)):I.destroy&&I.destroy()};I.on("end",()=>{let T=!0;for(let z in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[z]){T=!1;break}this.removeListener("close",P),T?(C(),this._invokeAllStoreProcessingQueue(),this.emit("connect",A)):S()}),B()};S()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let A=this._storeProcessingQueue[0];if(A&&A.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let A of this._storeProcessingQueue)A.cbStorePut&&A.cbStorePut(new Error("Connection closed")),A.callback&&A.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(A,S){delete this.outgoing[A],this.outgoingStore.del({messageId:A},(I,P)=>{S(I,P),this.messageIdProvider.deallocate(A),this._invokeStoreProcessingQueue()})}};p.default=x}),_u=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"__esModule",{value:!0});var e=pa(),t=class{numberAllocator;lastId;constructor(){this.numberAllocator=new e.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(i){return this.numberAllocator.use(i)}deallocate(i){this.numberAllocator.free(i)}clear(){this.numberAllocator.clear()}};p.default=t});function Eu(){if(un)return cr;un=!0;let p=2147483647,e=36,t=1,i=26,o=38,r=700,n=72,s=128,a="-",l=/^xn--/,u=/[^\0-\x7F]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},y=e-t,f=Math.floor,m=String.fromCharCode;function b(C){throw new RangeError(d[C])}function E(C,B){let T=[],z=C.length;for(;z--;)T[z]=B(C[z]);return T}function g(C,B){let T=C.split("@"),z="";T.length>1&&(z=T[0]+"@",C=T[1]),C=C.replace(c,".");let U=C.split("."),D=E(U,B).join(".");return z+D}function _(C){let B=[],T=0,z=C.length;for(;T<z;){let U=C.charCodeAt(T++);if(U>=55296&&U<=56319&&T<z){let D=C.charCodeAt(T++);(D&64512)==56320?B.push(((U&1023)<<10)+(D&1023)+65536):(B.push(U),T--)}else B.push(U)}return B}let x=C=>String.fromCodePoint(...C),v=function(C){return C>=48&&C<58?26+(C-48):C>=65&&C<91?C-65:C>=97&&C<123?C-97:e},A=function(C,B){return C+22+75*(C<26)-((B!=0)<<5)},S=function(C,B,T){let z=0;for(C=T?f(C/r):C>>1,C+=f(C/B);C>y*i>>1;z+=e)C=f(C/y);return f(z+(y+1)*C/(C+o))},I=function(C){let B=[],T=C.length,z=0,U=s,D=n,le=C.lastIndexOf(a);le<0&&(le=0);for(let Y=0;Y<le;++Y)C.charCodeAt(Y)>=128&&b("not-basic"),B.push(C.charCodeAt(Y));for(let Y=le>0?le+1:0;Y<T;){let G=z;for(let F=1,Z=e;;Z+=e){Y>=T&&b("invalid-input");let R=v(C.charCodeAt(Y++));R>=e&&b("invalid-input"),R>f((p-z)/F)&&b("overflow"),z+=R*F;let X=Z<=D?t:Z>=D+i?i:Z-D;if(R<X)break;let be=e-X;F>f(p/be)&&b("overflow"),F*=be}let re=B.length+1;D=S(z-G,re,G==0),f(z/re)>p-U&&b("overflow"),U+=f(z/re),z%=re,B.splice(z++,0,U)}return String.fromCodePoint(...B)},P=function(C){let B=[];C=_(C);let T=C.length,z=s,U=0,D=n;for(let G of C)G<128&&B.push(m(G));let le=B.length,Y=le;for(le&&B.push(a);Y<T;){let G=p;for(let F of C)F>=z&&F<G&&(G=F);let re=Y+1;G-z>f((p-U)/re)&&b("overflow"),U+=(G-z)*re,z=G;for(let F of C)if(F<z&&++U>p&&b("overflow"),F===z){let Z=U;for(let R=e;;R+=e){let X=R<=D?t:R>=D+i?i:R-D;if(Z<X)break;let be=Z-X,te=e-X;B.push(m(A(X+be%te,0))),Z=f(be/te)}B.push(m(A(Z,0))),D=S(U,re,Y===le),U=0,++Y}++U,++z}return B.join("")};return cr={version:"2.3.1",ucs2:{decode:_,encode:x},decode:I,encode:P,toASCII:function(C){return g(C,function(B){return u.test(B)?"xn--"+P(B):B})},toUnicode:function(C){return g(C,function(B){return l.test(B)?I(B.slice(4).toLowerCase()):B})}},cr}var cr,un,Et,Su=Ke(()=>{ue(),ce(),he(),cr={},un=!1,Et=Eu(),Et.decode,Et.encode,Et.toASCII,Et.toUnicode,Et.ucs2,Et.version});function xu(){return cn||(cn=!0,hn=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var p={},e=Symbol("test"),t=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(t)!=="[object Symbol]")return!1;var i=42;p[e]=i;for(e in p)return!1;if(typeof Object.keys=="function"&&Object.keys(p).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(p).length!==0)return!1;var o=Object.getOwnPropertySymbols(p);if(o.length!==1||o[0]!==e||!Object.prototype.propertyIsEnumerable.call(p,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var r=Object.getOwnPropertyDescriptor(p,e);if(r.value!==i||r.enumerable!==!0)return!1}return!0}),hn}function Au(){return dn||(dn=!0,fn=Error),fn}function ku(){return gn||(gn=!0,pn=EvalError),pn}function Iu(){return yn||(yn=!0,mn=RangeError),mn}function Tu(){return vn||(vn=!0,bn=ReferenceError),bn}function Sa(){return _n||(_n=!0,wn=SyntaxError),wn}function nr(){return Sn||(Sn=!0,En=TypeError),En}function Ou(){return An||(An=!0,xn=URIError),xn}function Cu(){if(kn)return fr;kn=!0;var p=typeof Symbol<"u"&&Symbol,e=xu();return fr=function(){return typeof p!="function"||typeof Symbol!="function"||typeof p("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},fr}function Ru(){if(In)return dr;In=!0;var p={__proto__:null,foo:{}},e=Object;return dr=function(){return{__proto__:p}.foo===p.foo&&!(p instanceof e)},dr}function Pu(){if(Tn)return pr;Tn=!0;var p="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,i="[object Function]",o=function(s,a){for(var l=[],u=0;u<s.length;u+=1)l[u]=s[u];for(var c=0;c<a.length;c+=1)l[c+s.length]=a[c];return l},r=function(s,a){for(var l=[],u=a,c=0;u<s.length;u+=1,c+=1)l[c]=s[u];return l},n=function(s,a){for(var l="",u=0;u<s.length;u+=1)l+=s[u],u+1<s.length&&(l+=a);return l};return pr=function(s){var a=this;if(typeof a!="function"||e.apply(a)!==i)throw new TypeError(p+a);for(var l=r(arguments,1),u,c=function(){if(this instanceof u){var b=a.apply(this,o(l,arguments));return Object(b)===b?b:this}return a.apply(s,o(l,arguments))},d=t(0,a.length-l.length),y=[],f=0;f<d;f++)y[f]="$"+f;if(u=Function("binder","return function ("+n(y,",")+"){ return binder.apply(this,arguments); }")(c),a.prototype){var m=function(){};m.prototype=a.prototype,u.prototype=new m,m.prototype=null}return u},pr}function ns(){if(On)return gr;On=!0;var p=Pu();return gr=Function.prototype.bind||p,gr}function Mu(){if(Cn)return mr;Cn=!0;var p=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=ns();return mr=t.call(p,e),mr}function Ht(){if(Rn)return yr;Rn=!0;var p,e=Au(),t=ku(),i=Iu(),o=Tu(),r=Sa(),n=nr(),s=Ou(),a=Function,l=function(Y){try{return a('"use strict"; return ('+Y+").constructor;")()}catch{}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch{u=null}var c=function(){throw new n},d=u?(function(){try{return arguments.callee,c}catch{try{return u(arguments,"callee").get}catch{return c}}})():c,y=Cu()(),f=Ru()(),m=Object.getPrototypeOf||(f?function(Y){return Y.__proto__}:null),b={},E=typeof Uint8Array>"u"||!m?p:m(Uint8Array),g={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?p:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?p:ArrayBuffer,"%ArrayIteratorPrototype%":y&&m?m([][Symbol.iterator]()):p,"%AsyncFromSyncIteratorPrototype%":p,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":typeof Atomics>"u"?p:Atomics,"%BigInt%":typeof BigInt>"u"?p:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?p:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?p:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?p:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":t,"%Float32Array%":typeof Float32Array>"u"?p:Float32Array,"%Float64Array%":typeof Float64Array>"u"?p:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?p:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":b,"%Int8Array%":typeof Int8Array>"u"?p:Int8Array,"%Int16Array%":typeof Int16Array>"u"?p:Int16Array,"%Int32Array%":typeof Int32Array>"u"?p:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":y&&m?m(m([][Symbol.iterator]())):p,"%JSON%":typeof JSON=="object"?JSON:p,"%Map%":typeof Map>"u"?p:Map,"%MapIteratorPrototype%":typeof Map>"u"||!y||!m?p:m(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?p:Promise,"%Proxy%":typeof Proxy>"u"?p:Proxy,"%RangeError%":i,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?p:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?p:Set,"%SetIteratorPrototype%":typeof Set>"u"||!y||!m?p:m(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?p:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":y&&m?m(""[Symbol.iterator]()):p,"%Symbol%":y?Symbol:p,"%SyntaxError%":r,"%ThrowTypeError%":d,"%TypedArray%":E,"%TypeError%":n,"%Uint8Array%":typeof Uint8Array>"u"?p:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?p:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?p:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?p:Uint32Array,"%URIError%":s,"%WeakMap%":typeof WeakMap>"u"?p:WeakMap,"%WeakRef%":typeof WeakRef>"u"?p:WeakRef,"%WeakSet%":typeof WeakSet>"u"?p:WeakSet};if(m)try{null.error}catch(Y){var _=m(m(Y));g["%Error.prototype%"]=_}var x=function Y(G){var re;if(G==="%AsyncFunction%")re=l("async function () {}");else if(G==="%GeneratorFunction%")re=l("function* () {}");else if(G==="%AsyncGeneratorFunction%")re=l("async function* () {}");else if(G==="%AsyncGenerator%"){var F=Y("%AsyncGeneratorFunction%");F&&(re=F.prototype)}else if(G==="%AsyncIteratorPrototype%"){var Z=Y("%AsyncGenerator%");Z&&m&&(re=m(Z.prototype))}return g[G]=re,re},v={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},A=ns(),S=Mu(),I=A.call(Function.call,Array.prototype.concat),P=A.call(Function.apply,Array.prototype.splice),C=A.call(Function.call,String.prototype.replace),B=A.call(Function.call,String.prototype.slice),T=A.call(Function.call,RegExp.prototype.exec),z=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,U=/\\(\\)?/g,D=function(Y){var G=B(Y,0,1),re=B(Y,-1);if(G==="%"&&re!=="%")throw new r("invalid intrinsic syntax, expected closing `%`");if(re==="%"&&G!=="%")throw new r("invalid intrinsic syntax, expected opening `%`");var F=[];return C(Y,z,function(Z,R,X,be){F[F.length]=X?C(be,U,"$1"):R||Z}),F},le=function(Y,G){var re=Y,F;if(S(v,re)&&(F=v[re],re="%"+F[0]+"%"),S(g,re)){var Z=g[re];if(Z===b&&(Z=x(re)),typeof Z>"u"&&!G)throw new n("intrinsic "+Y+" exists, but is not available. Please file an issue!");return{alias:F,name:re,value:Z}}throw new r("intrinsic "+Y+" does not exist!")};return yr=function(Y,G){if(typeof Y!="string"||Y.length===0)throw new n("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof G!="boolean")throw new n('"allowMissing" argument must be a boolean');if(T(/^%?[^%]*%?$/,Y)===null)throw new r("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var re=D(Y),F=re.length>0?re[0]:"",Z=le("%"+F+"%",G),R=Z.name,X=Z.value,be=!1,te=Z.alias;te&&(F=te[0],P(re,I([0,1],te)));for(var _e=1,V=!0;_e<re.length;_e+=1){var L=re[_e],ie=B(L,0,1),q=B(L,-1);if((ie==='"'||ie==="'"||ie==="`"||q==='"'||q==="'"||q==="`")&&ie!==q)throw new r("property names with quotes must have matching quotes");if((L==="constructor"||!V)&&(be=!0),F+="."+L,R="%"+F+"%",S(g,R))X=g[R];else if(X!=null){if(!(L in X)){if(!G)throw new n("base intrinsic for "+Y+" exists, but the property is not available.");return}if(u&&_e+1>=re.length){var K=u(X,L);V=!!K,V&&"get"in K&&!("originalValue"in K.get)?X=K.get:X=X[L]}else V=S(X,L),X=X[L];V&&!be&&(g[R]=X)}}return X},yr}function ss(){if(Pn)return br;Pn=!0;var p=Ht(),e=p("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return br=e,br}function xa(){if(Mn)return vr;Mn=!0;var p=Ht(),e=p("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return vr=e,vr}function Nu(){if(Nn)return wr;Nn=!0;var p=ss(),e=Sa(),t=nr(),i=xa();return wr=function(o,r,n){if(!o||typeof o!="object"&&typeof o!="function")throw new t("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,l=arguments.length>5?arguments[5]:null,u=arguments.length>6?arguments[6]:!1,c=!!i&&i(o,r);if(p)p(o,r,{configurable:l===null&&c?c.configurable:!l,enumerable:s===null&&c?c.enumerable:!s,value:n,writable:a===null&&c?c.writable:!a});else if(u||!s&&!a&&!l)o[r]=n;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},wr}function Lu(){if(Ln)return _r;Ln=!0;var p=ss(),e=function(){return!!p};return e.hasArrayLengthDefineBug=function(){if(!p)return null;try{return p([],"length",{value:1}).length!==1}catch{return!0}},_r=e,_r}function Du(){if(Dn)return Er;Dn=!0;var p=Ht(),e=Nu(),t=Lu()(),i=xa(),o=nr(),r=p("%Math.floor%");return Er=function(n,s){if(typeof n!="function")throw new o("`fn` is not a function");if(typeof s!="number"||s<0||s>4294967295||r(s)!==s)throw new o("`length` must be a positive 32-bit integer");var a=arguments.length>2&&!!arguments[2],l=!0,u=!0;if("length"in n&&i){var c=i(n,"length");c&&!c.configurable&&(l=!1),c&&!c.writable&&(u=!1)}return(l||u||!a)&&(t?e(n,"length",s,!0,!0):e(n,"length",s)),n},Er}function ju(){if(jn)return Ut;jn=!0;var p=ns(),e=Ht(),t=Du(),i=nr(),o=e("%Function.prototype.apply%"),r=e("%Function.prototype.call%"),n=e("%Reflect.apply%",!0)||p.call(r,o),s=ss(),a=e("%Math.max%");Ut=function(u){if(typeof u!="function")throw new i("a function is required");var c=n(p,r,arguments);return t(c,1+a(0,u.length-(arguments.length-1)),!0)};var l=function(){return n(p,o,arguments)};return s?s(Ut,"apply",{value:l}):Ut.apply=l,Ut}function Bu(){if(Bn)return Sr;Bn=!0;var p=Ht(),e=ju(),t=e(p("String.prototype.indexOf"));return Sr=function(i,o){var r=p(i,!!o);return typeof r=="function"&&t(i,".prototype.")>-1?e(r):r},Sr}var hn,cn,fn,dn,pn,gn,mn,yn,bn,vn,wn,_n,En,Sn,xn,An,fr,kn,dr,In,pr,Tn,gr,On,mr,Cn,yr,Rn,br,Pn,vr,Mn,wr,Nn,_r,Ln,Er,Dn,Ut,jn,Sr,Bn,Uu=Ke(()=>{ue(),ce(),he(),hn={},cn=!1,fn={},dn=!1,pn={},gn=!1,mn={},yn=!1,bn={},vn=!1,wn={},_n=!1,En={},Sn=!1,xn={},An=!1,fr={},kn=!1,dr={},In=!1,pr={},Tn=!1,gr={},On=!1,mr={},Cn=!1,yr={},Rn=!1,br={},Pn=!1,vr={},Mn=!1,wr={},Nn=!1,_r={},Ln=!1,Er={},Dn=!1,Ut={},jn=!1,Sr={},Bn=!1});function os(p){throw new Error("Node.js process "+p+" is not supported by JSPM core outside of Node.js")}function Fu(){!Rt||!Ot||(Rt=!1,Ot.length?at=Ot.concat(at):Zt=-1,at.length&&Aa())}function Aa(){if(!Rt){var p=setTimeout(Fu,0);Rt=!0;for(var e=at.length;e;){for(Ot=at,at=[];++Zt<e;)Ot&&Ot[Zt].run();Zt=-1,e=at.length}Ot=null,Rt=!1,clearTimeout(p)}}function Wu(p){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];at.push(new ka(p,e)),at.length===1&&!Rt&&setTimeout(Aa,0)}function ka(p,e){this.fun=p,this.array=e}function ze(){}function zu(p){os("_linkedBinding")}function Hu(p){os("dlopen")}function qu(){return[]}function $u(){return[]}function Gu(p,e){if(!p)throw new Error(e||"assertion error")}function Vu(){return!1}function Ku(){return ft.now()/1e3}function Yr(p){var e=Math.floor((Date.now()-ft.now())*.001),t=ft.now()*.001,i=Math.floor(t)+e,o=Math.floor(t%1*1e9);return p&&(i=i-p[0],o=o-p[1],o<0&&(i--,o+=xr)),[i,o]}function wt(){return as}function Yu(p){return[]}var at,Rt,Ot,Zt,ds,ps,gs,ms,ys,bs,vs,ws,_s,Es,Ss,xs,As,ks,Is,Ts,Os,Cs,Rs,Ps,Ms,ar,Ns,Ls,Ds,js,Bs,Us,Fs,Ws,zs,Hs,qs,$s,Gs,Vs,Ks,Ys,Qs,Xs,Js,Zs,eo,to,ro,io,no,ft,Qr,xr,so,oo,ao,lo,uo,ho,co,fo,po,go,mo,as,Ia=Ke(()=>{ue(),ce(),he(),at=[],Rt=!1,Zt=-1,ka.prototype.run=function(){this.fun.apply(null,this.array)},ds="browser",ps="x64",gs="browser",ms={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},ys=["/usr/bin/node"],bs=[],vs="v16.8.0",ws={},_s=function(p,e){console.warn((e?e+": ":"")+p)},Es=function(p){os("binding")},Ss=function(p){return 0},xs=function(){return"/"},As=function(p){},ks={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Is=ze,Ts=[],Os={},Cs=!1,Rs={},Ps=ze,Ms=ze,ar=function(){return{}},Ns=ar,Ls=ar,Ds=ze,js=ze,Bs=ze,Us={},Fs={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Ws=ze,zs=ze,Hs=ze,qs=ze,$s=ze,Gs=ze,Vs=ze,Ks=void 0,Ys=void 0,Qs=void 0,Xs=ze,Js=2,Zs=1,eo="/bin/usr/node",to=9229,ro="node",io=[],no=ze,ft={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},ft.now===void 0&&(Qr=Date.now(),ft.timing&&ft.timing.navigationStart&&(Qr=ft.timing.navigationStart),ft.now=()=>Date.now()-Qr),xr=1e9,Yr.bigint=function(p){var e=Yr(p);return typeof BigInt>"u"?e[0]*xr+e[1]:BigInt(e[0]*xr)+BigInt(e[1])},so=10,oo={},ao=0,lo=wt,uo=wt,ho=wt,co=wt,fo=wt,po=ze,go=wt,mo=wt,as={version:vs,versions:ws,arch:ps,platform:gs,release:ks,_rawDebug:Is,moduleLoadList:Ts,binding:Es,_linkedBinding:zu,_events:oo,_eventsCount:ao,_maxListeners:so,on:wt,addListener:lo,once:uo,off:ho,removeListener:co,removeAllListeners:fo,emit:po,prependListener:go,prependOnceListener:mo,listeners:Yu,domain:Os,_exiting:Cs,config:Rs,dlopen:Hu,uptime:Ku,_getActiveRequests:qu,_getActiveHandles:$u,reallyExit:Ps,_kill:Ms,cpuUsage:ar,resourceUsage:Ns,memoryUsage:Ls,kill:Ds,exit:js,openStdin:Bs,allowedNodeEnvironmentFlags:Us,assert:Gu,features:Fs,_fatalExceptions:Ws,setUncaughtExceptionCaptureCallback:zs,hasUncaughtExceptionCaptureCallback:Vu,emitWarning:_s,nextTick:Wu,_tickCallback:Hs,_debugProcess:qs,_debugEnd:$s,_startProfilerIdleNotifier:Gs,_stopProfilerIdleNotifier:Vs,stdout:Ks,stdin:Qs,stderr:Ys,abort:Xs,umask:Ss,chdir:As,cwd:xs,env:ms,title:ds,argv:ys,execArgv:bs,pid:Js,ppid:Zs,execPath:eo,debugPort:to,hrtime:Yr,argv0:ro,_preload_modules:io,setSourceMapsEnabled:no}});function Qu(){if(Un)return Ar;Un=!0;var p=as;function e(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function t(r,n){for(var s="",a=0,l=-1,u=0,c,d=0;d<=r.length;++d){if(d<r.length)c=r.charCodeAt(d);else{if(c===47)break;c=47}if(c===47){if(!(l===d-1||u===1))if(l!==d-1&&u===2){if(s.length<2||a!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var y=s.lastIndexOf("/");if(y!==s.length-1){y===-1?(s="",a=0):(s=s.slice(0,y),a=s.length-1-s.lastIndexOf("/")),l=d,u=0;continue}}else if(s.length===2||s.length===1){s="",a=0,l=d,u=0;continue}}n&&(s.length>0?s+="/..":s="..",a=2)}else s.length>0?s+="/"+r.slice(l+1,d):s=r.slice(l+1,d),a=d-l-1;l=d,u=0}else c===46&&u!==-1?++u:u=-1}return s}function i(r,n){var s=n.dir||n.root,a=n.base||(n.name||"")+(n.ext||"");return s?s===n.root?s+a:s+r+a:a}var o={resolve:function(){for(var r="",n=!1,s,a=arguments.length-1;a>=-1&&!n;a--){var l;a>=0?l=arguments[a]:(s===void 0&&(s=p.cwd()),l=s),e(l),l.length!==0&&(r=l+"/"+r,n=l.charCodeAt(0)===47)}return r=t(r,!n),n?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(r){if(e(r),r.length===0)return".";var n=r.charCodeAt(0)===47,s=r.charCodeAt(r.length-1)===47;return r=t(r,!n),r.length===0&&!n&&(r="."),r.length>0&&s&&(r+="/"),n?"/"+r:r},isAbsolute:function(r){return e(r),r.length>0&&r.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var r,n=0;n<arguments.length;++n){var s=arguments[n];e(s),s.length>0&&(r===void 0?r=s:r+="/"+s)}return r===void 0?".":o.normalize(r)},relative:function(r,n){if(e(r),e(n),r===n||(r=o.resolve(r),n=o.resolve(n),r===n))return"";for(var s=1;s<r.length&&r.charCodeAt(s)===47;++s);for(var a=r.length,l=a-s,u=1;u<n.length&&n.charCodeAt(u)===47;++u);for(var c=n.length,d=c-u,y=l<d?l:d,f=-1,m=0;m<=y;++m){if(m===y){if(d>y){if(n.charCodeAt(u+m)===47)return n.slice(u+m+1);if(m===0)return n.slice(u+m)}else l>y&&(r.charCodeAt(s+m)===47?f=m:m===0&&(f=0));break}var b=r.charCodeAt(s+m),E=n.charCodeAt(u+m);if(b!==E)break;b===47&&(f=m)}var g="";for(m=s+f+1;m<=a;++m)(m===a||r.charCodeAt(m)===47)&&(g.length===0?g+="..":g+="/..");return g.length>0?g+n.slice(u+f):(u+=f,n.charCodeAt(u)===47&&++u,n.slice(u))},_makeLong:function(r){return r},dirname:function(r){if(e(r),r.length===0)return".";for(var n=r.charCodeAt(0),s=n===47,a=-1,l=!0,u=r.length-1;u>=1;--u)if(n=r.charCodeAt(u),n===47){if(!l){a=u;break}}else l=!1;return a===-1?s?"/":".":s&&a===1?"//":r.slice(0,a)},basename:function(r,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');e(r);var s=0,a=-1,l=!0,u;if(n!==void 0&&n.length>0&&n.length<=r.length){if(n.length===r.length&&n===r)return"";var c=n.length-1,d=-1;for(u=r.length-1;u>=0;--u){var y=r.charCodeAt(u);if(y===47){if(!l){s=u+1;break}}else d===-1&&(l=!1,d=u+1),c>=0&&(y===n.charCodeAt(c)?--c===-1&&(a=u):(c=-1,a=d))}return s===a?a=d:a===-1&&(a=r.length),r.slice(s,a)}else{for(u=r.length-1;u>=0;--u)if(r.charCodeAt(u)===47){if(!l){s=u+1;break}}else a===-1&&(l=!1,a=u+1);return a===-1?"":r.slice(s,a)}},extname:function(r){e(r);for(var n=-1,s=0,a=-1,l=!0,u=0,c=r.length-1;c>=0;--c){var d=r.charCodeAt(c);if(d===47){if(!l){s=c+1;break}continue}a===-1&&(l=!1,a=c+1),d===46?n===-1?n=c:u!==1&&(u=1):n!==-1&&(u=-1)}return n===-1||a===-1||u===0||u===1&&n===a-1&&n===s+1?"":r.slice(n,a)},format:function(r){if(r===null||typeof r!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof r);return i("/",r)},parse:function(r){e(r);var n={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return n;var s=r.charCodeAt(0),a=s===47,l;a?(n.root="/",l=1):l=0;for(var u=-1,c=0,d=-1,y=!0,f=r.length-1,m=0;f>=l;--f){if(s=r.charCodeAt(f),s===47){if(!y){c=f+1;break}continue}d===-1&&(y=!1,d=f+1),s===46?u===-1?u=f:m!==1&&(m=1):u!==-1&&(m=-1)}return u===-1||d===-1||m===0||m===1&&u===d-1&&u===c+1?d!==-1&&(c===0&&a?n.base=n.name=r.slice(1,d):n.base=n.name=r.slice(c,d)):(c===0&&a?(n.name=r.slice(1,u),n.base=r.slice(1,d)):(n.name=r.slice(c,u),n.base=r.slice(c,d)),n.ext=r.slice(u,d)),c>0?n.dir=r.slice(0,c-1):a&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};return o.posix=o,Ar=o,Ar}var Ar,Un,Fn,Xu=Ke(()=>{ue(),ce(),he(),Ia(),Ar={},Un=!1,Fn=Qu()}),Ta={};Ft(Ta,{URL:()=>Ba,Url:()=>Ma,default:()=>He,fileURLToPath:()=>Ca,format:()=>Na,parse:()=>ja,pathToFileURL:()=>Ra,resolve:()=>La,resolveObject:()=>Da});function Ju(){if(Wn)return kr;Wn=!0;var p=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&p?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=p&&e&&typeof e.get=="function"?e.get:null,i=p&&Map.prototype.forEach,o=typeof Set=="function"&&Set.prototype,r=Object.getOwnPropertyDescriptor&&o?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,n=o&&r&&typeof r.get=="function"?r.get:null,s=o&&Set.prototype.forEach,a=typeof WeakMap=="function"&&WeakMap.prototype,l=a?WeakMap.prototype.has:null,u=typeof WeakSet=="function"&&WeakSet.prototype,c=u?WeakSet.prototype.has:null,d=typeof WeakRef=="function"&&WeakRef.prototype,y=d?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,m=Object.prototype.toString,b=Function.prototype.toString,E=String.prototype.match,g=String.prototype.slice,_=String.prototype.replace,x=String.prototype.toUpperCase,v=String.prototype.toLowerCase,A=RegExp.prototype.test,S=Array.prototype.concat,I=Array.prototype.join,P=Array.prototype.slice,C=Math.floor,B=typeof BigInt=="function"?BigInt.prototype.valueOf:null,T=Object.getOwnPropertySymbols,z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,U=typeof Symbol=="function"&&typeof Symbol.iterator=="object",D=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===U||!0)?Symbol.toStringTag:null,le=Object.prototype.propertyIsEnumerable,Y=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function($){return $.__proto__}:null);function G($,ne){if($===1/0||$===-1/0||$!==$||$&&$>-1e3&&$<1e3||A.call(/e/,ne))return ne;var ke=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof $=="number"){var Ie=$<0?-C(-$):C($);if(Ie!==$){var Ce=String(Ie),Pe=g.call(ne,Ce.length+1);return _.call(Ce,ke,"$&_")+"."+_.call(_.call(Pe,/([0-9]{3})/g,"$&_"),/_$/,"")}}return _.call(ne,ke,"$&_")}var re=Pa,F=re.custom,Z=K(F)?F:null;kr=function $(ne,ke,Ie,Ce){var Pe=ke||{};if(oe(Pe,"quoteStyle")&&Pe.quoteStyle!=="single"&&Pe.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(oe(Pe,"maxStringLength")&&(typeof Pe.maxStringLength=="number"?Pe.maxStringLength<0&&Pe.maxStringLength!==1/0:Pe.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var et=oe(Pe,"customInspect")?Pe.customInspect:!0;if(typeof et!="boolean"&&et!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(oe(Pe,"indent")&&Pe.indent!==null&&Pe.indent!=="	"&&!(parseInt(Pe.indent,10)===Pe.indent&&Pe.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(oe(Pe,"numericSeparator")&&typeof Pe.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var tt=Pe.numericSeparator;if(typeof ne>"u")return"undefined";if(ne===null)return"null";if(typeof ne=="boolean")return ne?"true":"false";if(typeof ne=="string")return ae(ne,Pe);if(typeof ne=="number"){if(ne===0)return 1/0/ne>0?"0":"-0";var Fe=String(ne);return tt?G(ne,Fe):Fe}if(typeof ne=="bigint"){var rt=String(ne)+"n";return tt?G(ne,rt):rt}var Lt=typeof Pe.depth>"u"?5:Pe.depth;if(typeof Ie>"u"&&(Ie=0),Ie>=Lt&&Lt>0&&typeof ne=="object")return be(ne)?"[Array]":"[Object]";var it=J(Pe,Ie);if(typeof Ce>"u")Ce=[];else if(ee(Ce,ne)>=0)return"[Circular]";function Ye(nt,vt,It){if(vt&&(Ce=P.call(Ce),Ce.push(vt)),It){var st={depth:Pe.depth};return oe(Pe,"quoteStyle")&&(st.quoteStyle=Pe.quoteStyle),$(nt,st,Ie+1,Ce)}return $(nt,Pe,Ie+1,Ce)}if(typeof ne=="function"&&!_e(ne)){var sr=W(ne),Dt=Se(ne,Ye);return"[Function"+(sr?": "+sr:" (anonymous)")+"]"+(Dt.length>0?" { "+I.call(Dt,", ")+" }":"")}if(K(ne)){var qt=U?_.call(String(ne),/^(Symbol\(.*\))_[^)]*$/,"$1"):z.call(ne);return typeof ne=="object"&&!U?h(qt):qt}if(we(ne)){for(var O="<"+v.call(String(ne.nodeName)),N=ne.attributes||[],Ee=0;Ee<N.length;Ee++)O+=" "+N[Ee].name+"="+R(X(N[Ee].value),"double",Pe);return O+=">",ne.childNodes&&ne.childNodes.length&&(O+="..."),O+="</"+v.call(String(ne.nodeName))+">",O}if(be(ne)){if(ne.length===0)return"[]";var xe=Se(ne,Ye);return it&&!j(xe)?"["+fe(xe,it)+"]":"[ "+I.call(xe,", ")+" ]"}if(V(ne)){var Ae=Se(ne,Ye);return!("cause"in Error.prototype)&&"cause"in ne&&!le.call(ne,"cause")?"{ ["+String(ne)+"] "+I.call(S.call("[cause]: "+Ye(ne.cause),Ae),", ")+" }":Ae.length===0?"["+String(ne)+"]":"{ ["+String(ne)+"] "+I.call(Ae,", ")+" }"}if(typeof ne=="object"&&et){if(Z&&typeof ne[Z]=="function"&&re)return re(ne,{depth:Lt-Ie});if(et!=="symbol"&&typeof ne.inspect=="function")return ne.inspect()}if(de(ne)){var je=[];return i&&i.call(ne,function(nt,vt){je.push(Ye(vt,ne,!0)+" => "+Ye(nt,ne))}),k("Map",t.call(ne),je,it)}if(H(ne)){var qe=[];return s&&s.call(ne,function(nt){qe.push(Ye(nt,ne))}),k("Set",n.call(ne),qe,it)}if(pe(ne))return w("WeakMap");if(me(ne))return w("WeakSet");if(ve(ne))return w("WeakRef");if(ie(ne))return h(Ye(Number(ne)));if(Q(ne))return h(Ye(B.call(ne)));if(q(ne))return h(f.call(ne));if(L(ne))return h(Ye(String(ne)));if(typeof window<"u"&&ne===window)return"{ [object Window] }";if(typeof globalThis<"u"&&ne===globalThis||typeof Ir<"u"&&ne===Ir)return"{ [object globalThis] }";if(!te(ne)&&!_e(ne)){var Je=Se(ne,Ye),$t=Y?Y(ne)===Object.prototype:ne instanceof Object||ne.constructor===Object,Gt=ne instanceof Object?"":"null prototype",Vt=!$t&&D&&Object(ne)===ne&&D in ne?g.call(M(ne),8,-1):Gt?"Object":"",or=$t||typeof ne.constructor!="function"?"":ne.constructor.name?ne.constructor.name+" ":"",kt=or+(Vt||Gt?"["+I.call(S.call([],Vt||[],Gt||[]),": ")+"] ":"");return Je.length===0?kt+"{}":it?kt+"{"+fe(Je,it)+"}":kt+"{ "+I.call(Je,", ")+" }"}return String(ne)};function R($,ne,ke){var Ie=(ke.quoteStyle||ne)==="double"?'"':"'";return Ie+$+Ie}function X($){return _.call(String($),/"/g,"&quot;")}function be($){return M($)==="[object Array]"&&(!D||!(typeof $=="object"&&D in $))}function te($){return M($)==="[object Date]"&&(!D||!(typeof $=="object"&&D in $))}function _e($){return M($)==="[object RegExp]"&&(!D||!(typeof $=="object"&&D in $))}function V($){return M($)==="[object Error]"&&(!D||!(typeof $=="object"&&D in $))}function L($){return M($)==="[object String]"&&(!D||!(typeof $=="object"&&D in $))}function ie($){return M($)==="[object Number]"&&(!D||!(typeof $=="object"&&D in $))}function q($){return M($)==="[object Boolean]"&&(!D||!(typeof $=="object"&&D in $))}function K($){if(U)return $&&typeof $=="object"&&$ instanceof Symbol;if(typeof $=="symbol")return!0;if(!$||typeof $!="object"||!z)return!1;try{return z.call($),!0}catch{}return!1}function Q($){if(!$||typeof $!="object"||!B)return!1;try{return B.call($),!0}catch{}return!1}var ye=Object.prototype.hasOwnProperty||function($){return $ in(this||Ir)};function oe($,ne){return ye.call($,ne)}function M($){return m.call($)}function W($){if($.name)return $.name;var ne=E.call(b.call($),/^function\s*([\w$]+)/);return ne?ne[1]:null}function ee($,ne){if($.indexOf)return $.indexOf(ne);for(var ke=0,Ie=$.length;ke<Ie;ke++)if($[ke]===ne)return ke;return-1}function de($){if(!t||!$||typeof $!="object")return!1;try{t.call($);try{n.call($)}catch{return!0}return $ instanceof Map}catch{}return!1}function pe($){if(!l||!$||typeof $!="object")return!1;try{l.call($,l);try{c.call($,c)}catch{return!0}return $ instanceof WeakMap}catch{}return!1}function ve($){if(!y||!$||typeof $!="object")return!1;try{return y.call($),!0}catch{}return!1}function H($){if(!n||!$||typeof $!="object")return!1;try{n.call($);try{t.call($)}catch{return!0}return $ instanceof Set}catch{}return!1}function me($){if(!c||!$||typeof $!="object")return!1;try{c.call($,c);try{l.call($,l)}catch{return!0}return $ instanceof WeakSet}catch{}return!1}function we($){return!$||typeof $!="object"?!1:typeof HTMLElement<"u"&&$ instanceof HTMLElement?!0:typeof $.nodeName=="string"&&typeof $.getAttribute=="function"}function ae($,ne){if($.length>ne.maxStringLength){var ke=$.length-ne.maxStringLength,Ie="... "+ke+" more character"+(ke>1?"s":"");return ae(g.call($,0,ne.maxStringLength),ne)+Ie}var Ce=_.call(_.call($,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Re);return R(Ce,"single",ne)}function Re($){var ne=$.charCodeAt(0),ke={8:"b",9:"t",10:"n",12:"f",13:"r"}[ne];return ke?"\\"+ke:"\\x"+(ne<16?"0":"")+x.call(ne.toString(16))}function h($){return"Object("+$+")"}function w($){return $+" { ? }"}function k($,ne,ke,Ie){var Ce=Ie?fe(ke,Ie):I.call(ke,", ");return $+" ("+ne+") {"+Ce+"}"}function j($){for(var ne=0;ne<$.length;ne++)if(ee($[ne],`
`)>=0)return!1;return!0}function J($,ne){var ke;if($.indent==="	")ke="	";else if(typeof $.indent=="number"&&$.indent>0)ke=I.call(Array($.indent+1)," ");else return null;return{base:ke,prev:I.call(Array(ne+1),ke)}}function fe($,ne){if($.length===0)return"";var ke=`
`+ne.prev+ne.base;return ke+I.call($,","+ke)+`
`+ne.prev}function Se($,ne){var ke=be($),Ie=[];if(ke){Ie.length=$.length;for(var Ce=0;Ce<$.length;Ce++)Ie[Ce]=oe($,Ce)?ne($[Ce],$):""}var Pe=typeof T=="function"?T($):[],et;if(U){et={};for(var tt=0;tt<Pe.length;tt++)et["$"+Pe[tt]]=Pe[tt]}for(var Fe in $)oe($,Fe)&&(ke&&String(Number(Fe))===Fe&&Fe<$.length||U&&et["$"+Fe]instanceof Symbol||(A.call(/[^\w$]/,Fe)?Ie.push(ne(Fe,$)+": "+ne($[Fe],$)):Ie.push(Fe+": "+ne($[Fe],$))));if(typeof T=="function")for(var rt=0;rt<Pe.length;rt++)le.call($,Pe[rt])&&Ie.push("["+ne(Pe[rt])+"]: "+ne($[Pe[rt]],$));return Ie}return kr}function Zu(){if(zn)return Tr;zn=!0;var p=Ht(),e=Bu(),t=Ju(),i=nr(),o=p("%WeakMap%",!0),r=p("%Map%",!0),n=e("WeakMap.prototype.get",!0),s=e("WeakMap.prototype.set",!0),a=e("WeakMap.prototype.has",!0),l=e("Map.prototype.get",!0),u=e("Map.prototype.set",!0),c=e("Map.prototype.has",!0),d=function(b,E){for(var g=b,_;(_=g.next)!==null;g=_)if(_.key===E)return g.next=_.next,_.next=b.next,b.next=_,_},y=function(b,E){var g=d(b,E);return g&&g.value},f=function(b,E,g){var _=d(b,E);_?_.value=g:b.next={key:E,next:b.next,value:g}},m=function(b,E){return!!d(b,E)};return Tr=function(){var b,E,g,_={assert:function(x){if(!_.has(x))throw new i("Side channel does not contain "+t(x))},get:function(x){if(o&&x&&(typeof x=="object"||typeof x=="function")){if(b)return n(b,x)}else if(r){if(E)return l(E,x)}else if(g)return y(g,x)},has:function(x){if(o&&x&&(typeof x=="object"||typeof x=="function")){if(b)return a(b,x)}else if(r){if(E)return c(E,x)}else if(g)return m(g,x);return!1},set:function(x,v){o&&x&&(typeof x=="object"||typeof x=="function")?(b||(b=new o),s(b,x,v)):r?(E||(E=new r),u(E,x,v)):(g||(g={key:{},next:null}),f(g,x,v))}};return _},Tr}function ls(){if(Hn)return Or;Hn=!0;var p=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Or={default:t.RFC3986,formatters:{RFC1738:function(i){return p.call(i,e,"+")},RFC3986:function(i){return String(i)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},Or}function Oa(){if(qn)return Cr;qn=!0;var p=ls(),e=Object.prototype.hasOwnProperty,t=Array.isArray,i=(function(){for(var b=[],E=0;E<256;++E)b.push("%"+((E<16?"0":"")+E.toString(16)).toUpperCase());return b})(),o=function(b){for(;b.length>1;){var E=b.pop(),g=E.obj[E.prop];if(t(g)){for(var _=[],x=0;x<g.length;++x)typeof g[x]<"u"&&_.push(g[x]);E.obj[E.prop]=_}}},r=function(b,E){for(var g=E&&E.plainObjects?Object.create(null):{},_=0;_<b.length;++_)typeof b[_]<"u"&&(g[_]=b[_]);return g},n=function b(E,g,_){if(!g)return E;if(typeof g!="object"){if(t(E))E.push(g);else if(E&&typeof E=="object")(_&&(_.plainObjects||_.allowPrototypes)||!e.call(Object.prototype,g))&&(E[g]=!0);else return[E,g];return E}if(!E||typeof E!="object")return[E].concat(g);var x=E;return t(E)&&!t(g)&&(x=r(E,_)),t(E)&&t(g)?(g.forEach(function(v,A){if(e.call(E,A)){var S=E[A];S&&typeof S=="object"&&v&&typeof v=="object"?E[A]=b(S,v,_):E.push(v)}else E[A]=v}),E):Object.keys(g).reduce(function(v,A){var S=g[A];return e.call(v,A)?v[A]=b(v[A],S,_):v[A]=S,v},x)},s=function(b,E){return Object.keys(E).reduce(function(g,_){return g[_]=E[_],g},b)},a=function(b,E,g){var _=b.replace(/\+/g," ");if(g==="iso-8859-1")return _.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(_)}catch{return _}},l=1024,u=function(b,E,g,_,x){if(b.length===0)return b;var v=b;if(typeof b=="symbol"?v=Symbol.prototype.toString.call(b):typeof b!="string"&&(v=String(b)),g==="iso-8859-1")return escape(v).replace(/%u[0-9a-f]{4}/gi,function(T){return"%26%23"+parseInt(T.slice(2),16)+"%3B"});for(var A="",S=0;S<v.length;S+=l){for(var I=v.length>=l?v.slice(S,S+l):v,P=[],C=0;C<I.length;++C){var B=I.charCodeAt(C);if(B===45||B===46||B===95||B===126||B>=48&&B<=57||B>=65&&B<=90||B>=97&&B<=122||x===p.RFC1738&&(B===40||B===41)){P[P.length]=I.charAt(C);continue}if(B<128){P[P.length]=i[B];continue}if(B<2048){P[P.length]=i[192|B>>6]+i[128|B&63];continue}if(B<55296||B>=57344){P[P.length]=i[224|B>>12]+i[128|B>>6&63]+i[128|B&63];continue}C+=1,B=65536+((B&1023)<<10|I.charCodeAt(C)&1023),P[P.length]=i[240|B>>18]+i[128|B>>12&63]+i[128|B>>6&63]+i[128|B&63]}A+=P.join("")}return A},c=function(b){for(var E=[{obj:{o:b},prop:"o"}],g=[],_=0;_<E.length;++_)for(var x=E[_],v=x.obj[x.prop],A=Object.keys(v),S=0;S<A.length;++S){var I=A[S],P=v[I];typeof P=="object"&&P!==null&&g.indexOf(P)===-1&&(E.push({obj:v,prop:I}),g.push(P))}return o(E),b},d=function(b){return Object.prototype.toString.call(b)==="[object RegExp]"},y=function(b){return!b||typeof b!="object"?!1:!!(b.constructor&&b.constructor.isBuffer&&b.constructor.isBuffer(b))},f=function(b,E){return[].concat(b,E)},m=function(b,E){if(t(b)){for(var g=[],_=0;_<b.length;_+=1)g.push(E(b[_]));return g}return E(b)};return Cr={arrayToObject:r,assign:s,combine:f,compact:c,decode:a,encode:u,isBuffer:y,isRegExp:d,maybeMap:m,merge:n},Cr}function eh(){if($n)return Rr;$n=!0;var p=Zu(),e=Oa(),t=ls(),i=Object.prototype.hasOwnProperty,o={brackets:function(m){return m+"[]"},comma:"comma",indices:function(m,b){return m+"["+b+"]"},repeat:function(m){return m}},r=Array.isArray,n=Array.prototype.push,s=function(m,b){n.apply(m,r(b)?b:[b])},a=Date.prototype.toISOString,l=t.default,u={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,format:l,formatter:t.formatters[l],indices:!1,serializeDate:function(m){return a.call(m)},skipNulls:!1,strictNullHandling:!1},c=function(m){return typeof m=="string"||typeof m=="number"||typeof m=="boolean"||typeof m=="symbol"||typeof m=="bigint"},d={},y=function m(b,E,g,_,x,v,A,S,I,P,C,B,T,z,U,D,le,Y){for(var G=b,re=Y,F=0,Z=!1;(re=re.get(d))!==void 0&&!Z;){var R=re.get(b);if(F+=1,typeof R<"u"){if(R===F)throw new RangeError("Cyclic object value");Z=!0}typeof re.get(d)>"u"&&(F=0)}if(typeof P=="function"?G=P(E,G):G instanceof Date?G=T(G):g==="comma"&&r(G)&&(G=e.maybeMap(G,function(M){return M instanceof Date?T(M):M})),G===null){if(v)return I&&!D?I(E,u.encoder,le,"key",z):E;G=""}if(c(G)||e.isBuffer(G)){if(I){var X=D?E:I(E,u.encoder,le,"key",z);return[U(X)+"="+U(I(G,u.encoder,le,"value",z))]}return[U(E)+"="+U(String(G))]}var be=[];if(typeof G>"u")return be;var te;if(g==="comma"&&r(G))D&&I&&(G=e.maybeMap(G,I)),te=[{value:G.length>0?G.join(",")||null:void 0}];else if(r(P))te=P;else{var _e=Object.keys(G);te=C?_e.sort(C):_e}var V=S?E.replace(/\./g,"%2E"):E,L=_&&r(G)&&G.length===1?V+"[]":V;if(x&&r(G)&&G.length===0)return L+"[]";for(var ie=0;ie<te.length;++ie){var q=te[ie],K=typeof q=="object"&&typeof q.value<"u"?q.value:G[q];if(!(A&&K===null)){var Q=B&&S?q.replace(/\./g,"%2E"):q,ye=r(G)?typeof g=="function"?g(L,Q):L:L+(B?"."+Q:"["+Q+"]");Y.set(b,F);var oe=p();oe.set(d,Y),s(be,m(K,ye,g,_,x,v,A,S,g==="comma"&&D&&r(G)?null:I,P,C,B,T,z,U,D,le,oe))}}return be},f=function(m){if(!m)return u;if(typeof m.allowEmptyArrays<"u"&&typeof m.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof m.encodeDotInKeys<"u"&&typeof m.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(m.encoder!==null&&typeof m.encoder<"u"&&typeof m.encoder!="function")throw new TypeError("Encoder has to be a function.");var b=m.charset||u.charset;if(typeof m.charset<"u"&&m.charset!=="utf-8"&&m.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var E=t.default;if(typeof m.format<"u"){if(!i.call(t.formatters,m.format))throw new TypeError("Unknown format option provided.");E=m.format}var g=t.formatters[E],_=u.filter;(typeof m.filter=="function"||r(m.filter))&&(_=m.filter);var x;if(m.arrayFormat in o?x=m.arrayFormat:"indices"in m?x=m.indices?"indices":"repeat":x=u.arrayFormat,"commaRoundTrip"in m&&typeof m.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var v=typeof m.allowDots>"u"?m.encodeDotInKeys===!0?!0:u.allowDots:!!m.allowDots;return{addQueryPrefix:typeof m.addQueryPrefix=="boolean"?m.addQueryPrefix:u.addQueryPrefix,allowDots:v,allowEmptyArrays:typeof m.allowEmptyArrays=="boolean"?!!m.allowEmptyArrays:u.allowEmptyArrays,arrayFormat:x,charset:b,charsetSentinel:typeof m.charsetSentinel=="boolean"?m.charsetSentinel:u.charsetSentinel,commaRoundTrip:m.commaRoundTrip,delimiter:typeof m.delimiter>"u"?u.delimiter:m.delimiter,encode:typeof m.encode=="boolean"?m.encode:u.encode,encodeDotInKeys:typeof m.encodeDotInKeys=="boolean"?m.encodeDotInKeys:u.encodeDotInKeys,encoder:typeof m.encoder=="function"?m.encoder:u.encoder,encodeValuesOnly:typeof m.encodeValuesOnly=="boolean"?m.encodeValuesOnly:u.encodeValuesOnly,filter:_,format:E,formatter:g,serializeDate:typeof m.serializeDate=="function"?m.serializeDate:u.serializeDate,skipNulls:typeof m.skipNulls=="boolean"?m.skipNulls:u.skipNulls,sort:typeof m.sort=="function"?m.sort:null,strictNullHandling:typeof m.strictNullHandling=="boolean"?m.strictNullHandling:u.strictNullHandling}};return Rr=function(m,b){var E=m,g=f(b),_,x;typeof g.filter=="function"?(x=g.filter,E=x("",E)):r(g.filter)&&(x=g.filter,_=x);var v=[];if(typeof E!="object"||E===null)return"";var A=o[g.arrayFormat],S=A==="comma"&&g.commaRoundTrip;_||(_=Object.keys(E)),g.sort&&_.sort(g.sort);for(var I=p(),P=0;P<_.length;++P){var C=_[P];g.skipNulls&&E[C]===null||s(v,y(E[C],C,A,S,g.allowEmptyArrays,g.strictNullHandling,g.skipNulls,g.encodeDotInKeys,g.encode?g.encoder:null,g.filter,g.sort,g.allowDots,g.serializeDate,g.format,g.formatter,g.encodeValuesOnly,g.charset,I))}var B=v.join(g.delimiter),T=g.addQueryPrefix===!0?"?":"";return g.charsetSentinel&&(g.charset==="iso-8859-1"?T+="utf8=%26%2310003%3B&":T+="utf8=%E2%9C%93&"),B.length>0?T+B:""},Rr}function th(){if(Gn)return Pr;Gn=!0;var p=Oa(),e=Object.prototype.hasOwnProperty,t=Array.isArray,i={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:p.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},o=function(d){return d.replace(/&#(\d+);/g,function(y,f){return String.fromCharCode(parseInt(f,10))})},r=function(d,y){return d&&typeof d=="string"&&y.comma&&d.indexOf(",")>-1?d.split(","):d},n="utf8=%26%2310003%3B",s="utf8=%E2%9C%93",a=function(d,y){var f={__proto__:null},m=y.ignoreQueryPrefix?d.replace(/^\?/,""):d;m=m.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var b=y.parameterLimit===1/0?void 0:y.parameterLimit,E=m.split(y.delimiter,b),g=-1,_,x=y.charset;if(y.charsetSentinel)for(_=0;_<E.length;++_)E[_].indexOf("utf8=")===0&&(E[_]===s?x="utf-8":E[_]===n&&(x="iso-8859-1"),g=_,_=E.length);for(_=0;_<E.length;++_)if(_!==g){var v=E[_],A=v.indexOf("]="),S=A===-1?v.indexOf("="):A+1,I,P;S===-1?(I=y.decoder(v,i.decoder,x,"key"),P=y.strictNullHandling?null:""):(I=y.decoder(v.slice(0,S),i.decoder,x,"key"),P=p.maybeMap(r(v.slice(S+1),y),function(B){return y.decoder(B,i.decoder,x,"value")})),P&&y.interpretNumericEntities&&x==="iso-8859-1"&&(P=o(P)),v.indexOf("[]=")>-1&&(P=t(P)?[P]:P);var C=e.call(f,I);C&&y.duplicates==="combine"?f[I]=p.combine(f[I],P):(!C||y.duplicates==="last")&&(f[I]=P)}return f},l=function(d,y,f,m){for(var b=m?y:r(y,f),E=d.length-1;E>=0;--E){var g,_=d[E];if(_==="[]"&&f.parseArrays)g=f.allowEmptyArrays&&(b===""||f.strictNullHandling&&b===null)?[]:[].concat(b);else{g=f.plainObjects?Object.create(null):{};var x=_.charAt(0)==="["&&_.charAt(_.length-1)==="]"?_.slice(1,-1):_,v=f.decodeDotInKeys?x.replace(/%2E/g,"."):x,A=parseInt(v,10);!f.parseArrays&&v===""?g={0:b}:!isNaN(A)&&_!==v&&String(A)===v&&A>=0&&f.parseArrays&&A<=f.arrayLimit?(g=[],g[A]=b):v!=="__proto__"&&(g[v]=b)}b=g}return b},u=function(d,y,f,m){if(d){var b=f.allowDots?d.replace(/\.([^.[]+)/g,"[$1]"):d,E=/(\[[^[\]]*])/,g=/(\[[^[\]]*])/g,_=f.depth>0&&E.exec(b),x=_?b.slice(0,_.index):b,v=[];if(x){if(!f.plainObjects&&e.call(Object.prototype,x)&&!f.allowPrototypes)return;v.push(x)}for(var A=0;f.depth>0&&(_=g.exec(b))!==null&&A<f.depth;){if(A+=1,!f.plainObjects&&e.call(Object.prototype,_[1].slice(1,-1))&&!f.allowPrototypes)return;v.push(_[1])}if(_){if(f.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+f.depth+" and strictDepth is true");v.push("["+b.slice(_.index)+"]")}return l(v,y,f,m)}},c=function(d){if(!d)return i;if(typeof d.allowEmptyArrays<"u"&&typeof d.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof d.decodeDotInKeys<"u"&&typeof d.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(d.decoder!==null&&typeof d.decoder<"u"&&typeof d.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof d.charset<"u"&&d.charset!=="utf-8"&&d.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var y=typeof d.charset>"u"?i.charset:d.charset,f=typeof d.duplicates>"u"?i.duplicates:d.duplicates;if(f!=="combine"&&f!=="first"&&f!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var m=typeof d.allowDots>"u"?d.decodeDotInKeys===!0?!0:i.allowDots:!!d.allowDots;return{allowDots:m,allowEmptyArrays:typeof d.allowEmptyArrays=="boolean"?!!d.allowEmptyArrays:i.allowEmptyArrays,allowPrototypes:typeof d.allowPrototypes=="boolean"?d.allowPrototypes:i.allowPrototypes,allowSparse:typeof d.allowSparse=="boolean"?d.allowSparse:i.allowSparse,arrayLimit:typeof d.arrayLimit=="number"?d.arrayLimit:i.arrayLimit,charset:y,charsetSentinel:typeof d.charsetSentinel=="boolean"?d.charsetSentinel:i.charsetSentinel,comma:typeof d.comma=="boolean"?d.comma:i.comma,decodeDotInKeys:typeof d.decodeDotInKeys=="boolean"?d.decodeDotInKeys:i.decodeDotInKeys,decoder:typeof d.decoder=="function"?d.decoder:i.decoder,delimiter:typeof d.delimiter=="string"||p.isRegExp(d.delimiter)?d.delimiter:i.delimiter,depth:typeof d.depth=="number"||d.depth===!1?+d.depth:i.depth,duplicates:f,ignoreQueryPrefix:d.ignoreQueryPrefix===!0,interpretNumericEntities:typeof d.interpretNumericEntities=="boolean"?d.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:typeof d.parameterLimit=="number"?d.parameterLimit:i.parameterLimit,parseArrays:d.parseArrays!==!1,plainObjects:typeof d.plainObjects=="boolean"?d.plainObjects:i.plainObjects,strictDepth:typeof d.strictDepth=="boolean"?!!d.strictDepth:i.strictDepth,strictNullHandling:typeof d.strictNullHandling=="boolean"?d.strictNullHandling:i.strictNullHandling}};return Pr=function(d,y){var f=c(y);if(d===""||d===null||typeof d>"u")return f.plainObjects?Object.create(null):{};for(var m=typeof d=="string"?a(d,f):d,b=f.plainObjects?Object.create(null):{},E=Object.keys(m),g=0;g<E.length;++g){var _=E[g],x=u(_,m[_],f,typeof d=="string");b=p.merge(b,x,f)}return f.allowSparse===!0?b:p.compact(b)},Pr}function rh(){if(Vn)return Mr;Vn=!0;var p=eh(),e=th(),t=ls();return Mr={formats:t,parse:e,stringify:p},Mr}function ih(){if(Kn)return St;Kn=!0;var p=Et;function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,o=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,r=["<",">",'"',"`"," ","\r",`
`,"	"],n=["{","}","|","\\","^","`"].concat(r),s=["'"].concat(n),a=["%","/","?",";","#"].concat(s),l=["/","?","#"],u=255,c=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},f={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=rh();function E(v,A,S){if(v&&typeof v=="object"&&v instanceof e)return v;var I=new e;return I.parse(v,A,S),I}e.prototype.parse=function(v,A,S){if(typeof v!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof v);var I=v.indexOf("?"),P=I!==-1&&I<v.indexOf("#")?"?":"#",C=v.split(P),B=/\\/g;C[0]=C[0].replace(B,"/"),v=C.join(P);var T=v;if(T=T.trim(),!S&&v.split("#").length===1){var z=o.exec(T);if(z)return this.path=T,this.href=T,this.pathname=z[1],z[2]?(this.search=z[2],A?this.query=b.parse(this.search.substr(1)):this.query=this.search.substr(1)):A&&(this.search="",this.query={}),this}var U=t.exec(T);if(U){U=U[0];var D=U.toLowerCase();this.protocol=D,T=T.substr(U.length)}if(S||U||T.match(/^\/\/[^@/]+@[^@/]+/)){var le=T.substr(0,2)==="//";le&&!(U&&f[U])&&(T=T.substr(2),this.slashes=!0)}if(!f[U]&&(le||U&&!m[U])){for(var Y=-1,G=0;G<l.length;G++){var re=T.indexOf(l[G]);re!==-1&&(Y===-1||re<Y)&&(Y=re)}var F,Z;Y===-1?Z=T.lastIndexOf("@"):Z=T.lastIndexOf("@",Y),Z!==-1&&(F=T.slice(0,Z),T=T.slice(Z+1),this.auth=decodeURIComponent(F)),Y=-1;for(var G=0;G<a.length;G++){var re=T.indexOf(a[G]);re!==-1&&(Y===-1||re<Y)&&(Y=re)}Y===-1&&(Y=T.length),this.host=T.slice(0,Y),T=T.slice(Y),this.parseHost(),this.hostname=this.hostname||"";var R=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!R)for(var X=this.hostname.split(/\./),G=0,be=X.length;G<be;G++){var te=X[G];if(te&&!te.match(c)){for(var _e="",V=0,L=te.length;V<L;V++)te.charCodeAt(V)>127?_e+="x":_e+=te[V];if(!_e.match(c)){var ie=X.slice(0,G),q=X.slice(G+1),K=te.match(d);K&&(ie.push(K[1]),q.unshift(K[2])),q.length&&(T="/"+q.join(".")+T),this.hostname=ie.join(".");break}}}this.hostname.length>u?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=p.toASCII(this.hostname));var Q=this.port?":"+this.port:"",ye=this.hostname||"";this.host=ye+Q,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),T[0]!=="/"&&(T="/"+T))}if(!y[D])for(var G=0,be=s.length;G<be;G++){var oe=s[G];if(T.indexOf(oe)!==-1){var M=encodeURIComponent(oe);M===oe&&(M=escape(oe)),T=T.split(oe).join(M)}}var W=T.indexOf("#");W!==-1&&(this.hash=T.substr(W),T=T.slice(0,W));var ee=T.indexOf("?");if(ee!==-1?(this.search=T.substr(ee),this.query=T.substr(ee+1),A&&(this.query=b.parse(this.query)),T=T.slice(0,ee)):A&&(this.search="",this.query={}),T&&(this.pathname=T),m[D]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Q=this.pathname||"",de=this.search||"";this.path=Q+de}return this.href=this.format(),this};function g(v){return typeof v=="string"&&(v=E(v)),v instanceof e?v.format():e.prototype.format.call(v)}e.prototype.format=function(){var v=this.auth||"";v&&(v=encodeURIComponent(v),v=v.replace(/%3A/i,":"),v+="@");var A=this.protocol||"",S=this.pathname||"",I=this.hash||"",P=!1,C="";this.host?P=v+this.host:this.hostname&&(P=v+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(P+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(C=b.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var B=this.search||C&&"?"+C||"";return A&&A.substr(-1)!==":"&&(A+=":"),this.slashes||(!A||m[A])&&P!==!1?(P="//"+(P||""),S&&S.charAt(0)!=="/"&&(S="/"+S)):P||(P=""),I&&I.charAt(0)!=="#"&&(I="#"+I),B&&B.charAt(0)!=="?"&&(B="?"+B),S=S.replace(/[?#]/g,function(T){return encodeURIComponent(T)}),B=B.replace("#","%23"),A+P+S+B+I};function _(v,A){return E(v,!1,!0).resolve(A)}e.prototype.resolve=function(v){return this.resolveObject(E(v,!1,!0)).format()};function x(v,A){return v?E(v,!1,!0).resolveObject(A):A}return e.prototype.resolveObject=function(v){if(typeof v=="string"){var A=new e;A.parse(v,!1,!0),v=A}for(var S=new e,I=Object.keys(this),P=0;P<I.length;P++){var C=I[P];S[C]=this[C]}if(S.hash=v.hash,v.href==="")return S.href=S.format(),S;if(v.slashes&&!v.protocol){for(var B=Object.keys(v),T=0;T<B.length;T++){var z=B[T];z!=="protocol"&&(S[z]=v[z])}return m[S.protocol]&&S.hostname&&!S.pathname&&(S.pathname="/",S.path=S.pathname),S.href=S.format(),S}if(v.protocol&&v.protocol!==S.protocol){if(!m[v.protocol]){for(var U=Object.keys(v),D=0;D<U.length;D++){var le=U[D];S[le]=v[le]}return S.href=S.format(),S}if(S.protocol=v.protocol,!v.host&&!f[v.protocol]){for(var be=(v.pathname||"").split("/");be.length&&!(v.host=be.shift()););v.host||(v.host=""),v.hostname||(v.hostname=""),be[0]!==""&&be.unshift(""),be.length<2&&be.unshift(""),S.pathname=be.join("/")}else S.pathname=v.pathname;if(S.search=v.search,S.query=v.query,S.host=v.host||"",S.auth=v.auth,S.hostname=v.hostname||v.host,S.port=v.port,S.pathname||S.search){var Y=S.pathname||"",G=S.search||"";S.path=Y+G}return S.slashes=S.slashes||v.slashes,S.href=S.format(),S}var re=S.pathname&&S.pathname.charAt(0)==="/",F=v.host||v.pathname&&v.pathname.charAt(0)==="/",Z=F||re||S.host&&v.pathname,R=Z,X=S.pathname&&S.pathname.split("/")||[],be=v.pathname&&v.pathname.split("/")||[],te=S.protocol&&!m[S.protocol];if(te&&(S.hostname="",S.port=null,S.host&&(X[0]===""?X[0]=S.host:X.unshift(S.host)),S.host="",v.protocol&&(v.hostname=null,v.port=null,v.host&&(be[0]===""?be[0]=v.host:be.unshift(v.host)),v.host=null),Z=Z&&(be[0]===""||X[0]==="")),F)S.host=v.host||v.host===""?v.host:S.host,S.hostname=v.hostname||v.hostname===""?v.hostname:S.hostname,S.search=v.search,S.query=v.query,X=be;else if(be.length)X||(X=[]),X.pop(),X=X.concat(be),S.search=v.search,S.query=v.query;else if(v.search!=null){if(te){S.host=X.shift(),S.hostname=S.host;var _e=S.host&&S.host.indexOf("@")>0?S.host.split("@"):!1;_e&&(S.auth=_e.shift(),S.hostname=_e.shift(),S.host=S.hostname)}return S.search=v.search,S.query=v.query,(S.pathname!==null||S.search!==null)&&(S.path=(S.pathname?S.pathname:"")+(S.search?S.search:"")),S.href=S.format(),S}if(!X.length)return S.pathname=null,S.search?S.path="/"+S.search:S.path=null,S.href=S.format(),S;for(var V=X.slice(-1)[0],L=(S.host||v.host||X.length>1)&&(V==="."||V==="..")||V==="",ie=0,q=X.length;q>=0;q--)V=X[q],V==="."?X.splice(q,1):V===".."?(X.splice(q,1),ie++):ie&&(X.splice(q,1),ie--);if(!Z&&!R)for(;ie--;ie)X.unshift("..");Z&&X[0]!==""&&(!X[0]||X[0].charAt(0)!=="/")&&X.unshift(""),L&&X.join("/").substr(-1)!=="/"&&X.push("");var K=X[0]===""||X[0]&&X[0].charAt(0)==="/";if(te){S.hostname=K?"":X.length?X.shift():"",S.host=S.hostname;var _e=S.host&&S.host.indexOf("@")>0?S.host.split("@"):!1;_e&&(S.auth=_e.shift(),S.hostname=_e.shift(),S.host=S.hostname)}return Z=Z||S.host&&X.length,Z&&!K&&X.unshift(""),X.length>0?S.pathname=X.join("/"):(S.pathname=null,S.path=null),(S.pathname!==null||S.search!==null)&&(S.path=(S.pathname?S.pathname:"")+(S.search?S.search:"")),S.auth=v.auth||S.auth,S.slashes=S.slashes||v.slashes,S.href=S.format(),S},e.prototype.parseHost=function(){var v=this.host,A=i.exec(v);A&&(A=A[0],A!==":"&&(this.port=A.substr(1)),v=v.substr(0,v.length-A.length)),v&&(this.hostname=v)},St.parse=E,St.resolve=_,St.resolveObject=x,St.format=g,St.Url=e,St}function Ca(p){if(typeof p=="string")p=new URL(p);else if(!(p instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(p.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Fr?nh(p):sh(p)}function nh(p){let e=p.hostname,t=p.pathname;for(let i=0;i<t.length;i++)if(t[i]==="%"){let o=t.codePointAt(i+2)||32;if(t[i+1]==="2"&&o===102||t[i+1]==="5"&&o===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(Ha,"\\"),t=decodeURIComponent(t),e!=="")return`\\\\${e}${t}`;{let i=t.codePointAt(1)|32,o=t[2];if(i<Wa||i>za||o!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function sh(p){if(p.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=p.pathname;for(let t=0;t<e.length;t++)if(e[t]==="%"){let i=e.codePointAt(t+2)||32;if(e[t+1]==="2"&&i===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function Ra(p){let e=Fn.resolve(p),t=p.charCodeAt(p.length-1);(t===Fa||Fr&&t===Ua)&&e[e.length-1]!==Fn.sep&&(e+="/");let i=new URL("file://");return e.includes("%")&&(e=e.replace(qa,"%25")),!Fr&&e.includes("\\")&&(e=e.replace($a,"%5C")),e.includes(`
`)&&(e=e.replace(Ga,"%0A")),e.includes("\r")&&(e=e.replace(Va,"%0D")),e.includes("	")&&(e=e.replace(Ka,"%09")),i.pathname=e,i}var Pa,kr,Wn,Ir,Tr,zn,Or,Hn,Cr,qn,Rr,$n,Pr,Gn,Mr,Vn,St,Kn,He,yo,Ma,Na,La,Da,ja,Ba,Ua,Fa,Wa,za,Fr,Ha,qa,$a,Ga,Va,Ka,oh=Ke(()=>{ue(),ce(),he(),Su(),Uu(),Xu(),Ia(),Pa=Object.freeze(Object.create(null)),kr={},Wn=!1,Ir=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Tr={},zn=!1,Or={},Hn=!1,Cr={},qn=!1,Rr={},$n=!1,Pr={},Gn=!1,Mr={},Vn=!1,St={},Kn=!1,He=ih(),He.parse,He.resolve,He.resolveObject,He.format,He.Url,yo=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,He.URL=typeof URL<"u"?URL:null,He.pathToFileURL=Ra,He.fileURLToPath=Ca,Ma=He.Url,Na=He.format,La=He.resolve,Da=He.resolveObject,ja=He.parse,Ba=He.URL,Ua=92,Fa=47,Wa=97,za=122,Fr=yo==="win32",Ha=/\//g,qa=/%/g,$a=/\\/g,Ga=/\n/g,Va=/\r/g,Ka=/\t/g}),ah=ge((p,e)=>{ue(),ce(),he(),e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),us=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"__esModule",{value:!0}),p.BufferedDuplex=void 0,p.writev=i;var e=Nt(),t=(Ue(),Me(Be));function i(r,n){let s=new Array(r.length);for(let a=0;a<r.length;a++)typeof r[a].chunk=="string"?s[a]=t.Buffer.from(r[a].chunk,"utf8"):s[a]=r[a].chunk;this._write(t.Buffer.concat(s),"binary",n)}var o=class extends e.Duplex{socket;proxy;isSocketOpen;writeQueue;constructor(r,n,s){super({objectMode:!0}),this.proxy=n,this.socket=s,this.writeQueue=[],r.objectMode||(this._writev=i.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",a=>{!this.destroyed&&this.readable&&this.push(a)})}_read(r){this.proxy.read(r)}_write(r,n,s){this.isSocketOpen?this.writeToProxy(r,n,s):this.writeQueue.push({chunk:r,encoding:n,cb:s})}_final(r){this.writeQueue=[],this.proxy.end(r)}_destroy(r,n){this.writeQueue=[],this.proxy.destroy(),n(r)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(r,n,s){this.proxy.write(r,n)===!1?this.proxy.once("drain",s):s()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:r,encoding:n,cb:s}=this.writeQueue.shift();this.writeToProxy(r,n,s)}}};p.BufferedDuplex=o}),lr=ge(p=>{ue(),ce(),he();var e=p&&p.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(p,"__esModule",{value:!0}),p.streamBuilder=p.browserStreamBuilder=void 0;var t=(Ue(),Me(Be)),i=e(ah()),o=e(gt()),r=Nt(),n=e(Vr()),s=us(),a=(0,o.default)("mqttjs:ws"),l=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function u(E,g){let _=`${E.protocol}://${E.hostname}:${E.port}${E.path}`;return typeof E.transformWsUrl=="function"&&(_=E.transformWsUrl(_,E,g)),_}function c(E){let g=E;return E.port||(E.protocol==="wss"?g.port=443:g.port=80),E.path||(g.path="/"),E.wsOptions||(g.wsOptions={}),!n.default&&!E.forceNativeWebSocket&&E.protocol==="wss"&&l.forEach(_=>{Object.prototype.hasOwnProperty.call(E,_)&&!Object.prototype.hasOwnProperty.call(E.wsOptions,_)&&(g.wsOptions[_]=E[_])}),g}function d(E){let g=c(E);if(g.hostname||(g.hostname=g.host),!g.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let _=new URL(document.URL);g.hostname=_.hostname,g.port||(g.port=Number(_.port))}return g.objectMode===void 0&&(g.objectMode=!(g.binary===!0||g.binary===void 0)),g}function y(E,g,_){a("createWebSocket"),a(`protocol: ${_.protocolId} ${_.protocolVersion}`);let x=_.protocolId==="MQIsdp"&&_.protocolVersion===3?"mqttv3.1":"mqtt";a(`creating new Websocket for url: ${g} and protocol: ${x}`);let v;return _.createWebsocket?v=_.createWebsocket(g,[x],_):v=new i.default(g,[x],_.wsOptions),v}function f(E,g){let _=g.protocolId==="MQIsdp"&&g.protocolVersion===3?"mqttv3.1":"mqtt",x=u(g,E),v;return g.createWebsocket?v=g.createWebsocket(x,[_],g):v=new WebSocket(x,[_]),v.binaryType="arraybuffer",v}var m=(E,g)=>{a("streamBuilder");let _=c(g);_.hostname=_.hostname||_.host||"localhost";let x=u(_,E),v=y(E,x,_),A=i.default.createWebSocketStream(v,_.wsOptions);return A.url=x,v.on("close",()=>{A.destroy()}),A};p.streamBuilder=m;var b=(E,g)=>{a("browserStreamBuilder");let _,x=d(g).browserBufferSize||1024*512,v=g.browserBufferTimeout||1e3,A=!g.objectMode,S=f(E,g),I=C(g,D,le);g.objectMode||(I._writev=s.writev.bind(I)),I.on("close",()=>{S.close()});let P=typeof S.addEventListener<"u";S.readyState===S.OPEN?(_=I,_.socket=S):(_=new s.BufferedDuplex(g,I,S),P?S.addEventListener("open",B):S.onopen=B),P?(S.addEventListener("close",T),S.addEventListener("error",z),S.addEventListener("message",U)):(S.onclose=T,S.onerror=z,S.onmessage=U);function C(Y,G,re){let F=new r.Transform({objectMode:Y.objectMode});return F._write=G,F._flush=re,F}function B(){a("WebSocket onOpen"),_ instanceof s.BufferedDuplex&&_.socketReady()}function T(Y){a("WebSocket onClose",Y),_.end(),_.destroy()}function z(Y){a("WebSocket onError",Y);let G=new Error("WebSocket error");G.event=Y,_.destroy(G)}async function U(Y){if(!I||!I.readable||!I.writable)return;let{data:G}=Y;G instanceof ArrayBuffer?G=t.Buffer.from(G):G instanceof Blob?G=t.Buffer.from(await new Response(G).arrayBuffer()):G=t.Buffer.from(G,"utf8"),I.push(G)}function D(Y,G,re){if(S.bufferedAmount>x){setTimeout(D,v,Y,G,re);return}A&&typeof Y=="string"&&(Y=t.Buffer.from(Y,"utf8"));try{S.send(Y)}catch(F){return re(F)}re()}function le(Y){S.close(),Y()}return _};p.browserStreamBuilder=b}),hs={};Ft(hs,{Server:()=>Le,Socket:()=>Le,Stream:()=>Le,_createServerHandle:()=>Le,_normalizeArgs:()=>Le,_setSimultaneousAccepts:()=>Le,connect:()=>Le,createConnection:()=>Le,createServer:()=>Le,default:()=>Ya,isIP:()=>Le,isIPv4:()=>Le,isIPv6:()=>Le});function Le(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var Ya,Qa=Ke(()=>{ue(),ce(),he(),Ya={_createServerHandle:Le,_normalizeArgs:Le,_setSimultaneousAccepts:Le,connect:Le,createConnection:Le,createServer:Le,isIP:Le,isIPv4:Le,isIPv6:Le,Server:Le,Socket:Le,Stream:Le}}),Xa=ge((p,e)=>{ue(),ce(),he(),e.exports={}}),bo=ge(p=>{ue(),ce(),he();var e=p&&p.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(p,"__esModule",{value:!0});var t=e((Qa(),Me(hs))),i=e(gt()),o=e(Xa()),r=(0,i.default)("mqttjs:tcp"),n=(s,a)=>{if(a.port=a.port||1883,a.hostname=a.hostname||a.host||"localhost",a.socksProxy)return(0,o.default)(a.hostname,a.port,a.socksProxy,{timeout:a.socksTimeout});let{port:l,path:u}=a,c=a.hostname;return r("port %d and host %s",l,c),t.default.createConnection({port:l,host:c,path:u})};p.default=n}),Ja={};Ft(Ja,{default:()=>Za});var Za,lh=Ke(()=>{ue(),ce(),he(),Za={}}),vo=ge(p=>{ue(),ce(),he();var e=p&&p.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(p,"__esModule",{value:!0});var t=(lh(),Me(Ja)),i=e((Qa(),Me(hs))),o=e(gt()),r=e(Xa()),n=(0,o.default)("mqttjs:tls");function s(l){let{host:u,port:c,socksProxy:d,...y}=l;if(d!==void 0){let f=(0,r.default)(u,c,d,{timeout:l.socksTimeout});return(0,t.connect)({...y,socket:f})}return(0,t.connect)(l)}var a=(l,u)=>{u.port=u.port||8883,u.host=u.hostname||u.host||"localhost",i.default.isIP(u.host)===0&&(u.servername=u.host),u.rejectUnauthorized=u.rejectUnauthorized!==!1,delete u.path,n("port %d host %s rejectUnauthorized %b",u.port,u.host,u.rejectUnauthorized);let c=s(u);c.on("secureConnect",()=>{u.rejectUnauthorized&&!c.authorized?c.emit("error",new Error("TLS not authorized")):c.removeListener("error",d)});function d(y){u.rejectUnauthorized&&l.emit("error",y),c.end()}return c.on("error",d),c};p.default=a}),wo=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"__esModule",{value:!0});var e=(Ue(),Me(Be)),t=Nt(),i=us(),o,r,n;function s(){let d=new t.Transform;return d._write=(y,f,m)=>{o.send({data:y.buffer,success(){m()},fail(b){m(new Error(b))}})},d._flush=y=>{o.close({success(){y()}})},d}function a(d){d.hostname||(d.hostname="localhost"),d.path||(d.path="/"),d.wsOptions||(d.wsOptions={})}function l(d,y){let f=d.protocol==="wxs"?"wss":"ws",m=`${f}://${d.hostname}${d.path}`;return d.port&&d.port!==80&&d.port!==443&&(m=`${f}://${d.hostname}:${d.port}${d.path}`),typeof d.transformWsUrl=="function"&&(m=d.transformWsUrl(m,d,y)),m}function u(){o.onOpen(()=>{n.socketReady()}),o.onMessage(d=>{let{data:y}=d;y instanceof ArrayBuffer?y=e.Buffer.from(y):y=e.Buffer.from(y,"utf8"),r.push(y)}),o.onClose(()=>{n.emit("close"),n.end(),n.destroy()}),o.onError(d=>{let y=new Error(d.errMsg);n.destroy(y)})}var c=(d,y)=>{if(y.hostname=y.hostname||y.host,!y.hostname)throw new Error("Could not determine host. Specify host manually.");let f=y.protocolId==="MQIsdp"&&y.protocolVersion===3?"mqttv3.1":"mqtt";a(y);let m=l(y,d);o=wx.connectSocket({url:m,protocols:[f]}),r=s(),n=new i.BufferedDuplex(y,r,o),n._destroy=(E,g)=>{o.close({success(){g&&g(E)}})};let b=n.destroy;return n.destroy=(E,g)=>(n.destroy=b,setTimeout(()=>{o.close({fail(){n._destroy(E,g)}})},0),n),u(),n};p.default=c}),_o=ge(p=>{ue(),ce(),he(),Object.defineProperty(p,"__esModule",{value:!0});var e=(Ue(),Me(Be)),t=Nt(),i=us(),o,r,n,s=!1;function a(){let y=new t.Transform;return y._write=(f,m,b)=>{o.sendSocketMessage({data:f.buffer,success(){b()},fail(){b(new Error)}})},y._flush=f=>{o.closeSocket({success(){f()}})},y}function l(y){y.hostname||(y.hostname="localhost"),y.path||(y.path="/"),y.wsOptions||(y.wsOptions={})}function u(y,f){let m=y.protocol==="alis"?"wss":"ws",b=`${m}://${y.hostname}${y.path}`;return y.port&&y.port!==80&&y.port!==443&&(b=`${m}://${y.hostname}:${y.port}${y.path}`),typeof y.transformWsUrl=="function"&&(b=y.transformWsUrl(b,y,f)),b}function c(){s||(s=!0,o.onSocketOpen(()=>{n.socketReady()}),o.onSocketMessage(y=>{if(typeof y.data=="string"){let f=e.Buffer.from(y.data,"base64");r.push(f)}else{let f=new FileReader;f.addEventListener("load",()=>{if(f.result instanceof ArrayBuffer){r.push(e.Buffer.from(f.result));return}r.push(e.Buffer.from(f.result,"utf-8"))}),f.readAsArrayBuffer(y.data)}}),o.onSocketClose(()=>{n.end(),n.destroy()}),o.onSocketError(y=>{n.destroy(y)}))}var d=(y,f)=>{if(f.hostname=f.hostname||f.host,!f.hostname)throw new Error("Could not determine host. Specify host manually.");let m=f.protocolId==="MQIsdp"&&f.protocolVersion===3?"mqttv3.1":"mqtt";l(f);let b=u(f,y);return o=f.my,o.connectSocket({url:b,protocols:m}),r=a(),n=new i.BufferedDuplex(f,r,o),c(),n};p.default=d}),uh=ge(p=>{ue(),ce(),he();var e=p&&p.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(p,"__esModule",{value:!0}),p.connectAsync=u;var t=e(gt()),i=e((oh(),Me(Ta))),o=e(an()),r=e(Vr());typeof Ne?.nextTick!="function"&&(Ne.nextTick=setImmediate);var n=(0,t.default)("mqttjs"),s=null;function a(c){let d;if(c.auth)if(d=c.auth.match(/^(.+):(.+)$/),d){let[,y,f]=d;c.username=y,c.password=f}else c.username=c.auth}function l(c,d){if(n("connecting to an MQTT broker..."),typeof c=="object"&&!d&&(d=c,c=""),d=d||{},c&&typeof c=="string"){let m=i.default.parse(c,!0),b={};if(m.port!=null&&(b.port=Number(m.port)),b.host=m.hostname,b.query=m.query,b.auth=m.auth,b.protocol=m.protocol,b.path=m.path,d={...b,...d},!d.protocol)throw new Error("Missing protocol");d.protocol=d.protocol.replace(/:$/,"")}if(d.unixSocket=d.unixSocket||d.protocol?.includes("+unix"),d.unixSocket?d.protocol=d.protocol.replace("+unix",""):!d.protocol?.startsWith("ws")&&!d.protocol?.startsWith("wx")&&delete d.path,a(d),d.query&&typeof d.query.clientId=="string"&&(d.clientId=d.query.clientId),r.default||d.unixSocket?d.socksProxy=void 0:d.socksProxy===void 0&&typeof Ne<"u"&&(d.socksProxy=Ne.env.MQTTJS_SOCKS_PROXY),d.cert&&d.key)if(d.protocol){if(["mqtts","wss","wxs","alis"].indexOf(d.protocol)===-1)switch(d.protocol){case"mqtt":d.protocol="mqtts";break;case"ws":d.protocol="wss";break;case"wx":d.protocol="wxs";break;case"ali":d.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${d.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(s||(s={},!r.default&&!d.forceNativeWebSocket?(s.ws=lr().streamBuilder,s.wss=lr().streamBuilder,s.mqtt=bo().default,s.tcp=bo().default,s.ssl=vo().default,s.tls=s.ssl,s.mqtts=vo().default):(s.ws=lr().browserStreamBuilder,s.wss=lr().browserStreamBuilder,s.wx=wo().default,s.wxs=wo().default,s.ali=_o().default,s.alis=_o().default)),!s[d.protocol]){let m=["mqtts","wss"].indexOf(d.protocol)!==-1;d.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((b,E)=>m&&E%2===0?!1:typeof s[b]=="function")[0]}if(d.clean===!1&&!d.clientId)throw new Error("Missing clientId for unclean clients");d.protocol&&(d.defaultProtocol=d.protocol);function y(m){return d.servers&&((!m._reconnectCount||m._reconnectCount===d.servers.length)&&(m._reconnectCount=0),d.host=d.servers[m._reconnectCount].host,d.port=d.servers[m._reconnectCount].port,d.protocol=d.servers[m._reconnectCount].protocol?d.servers[m._reconnectCount].protocol:d.defaultProtocol,d.hostname=d.host,m._reconnectCount++),n("calling streambuilder for",d.protocol),s[d.protocol](m,d)}let f=new o.default(y,d);return f.on("error",()=>{}),f}function u(c,d,y=!0){return new Promise((f,m)=>{let b=l(c,d),E={connect:_=>{g(),f(b)},end:()=>{g(),f(b)},error:_=>{g(),b.end(),m(_)}};y===!1&&(E.close=()=>{E.error(new Error("Couldn't connect to server"))});function g(){Object.keys(E).forEach(_=>{b.off(_,E[_])})}Object.keys(E).forEach(_=>{b.on(_,E[_])})})}p.default=l}),Eo=ge(p=>{ue(),ce(),he();var e=p&&p.__createBinding||(Object.create?function(y,f,m,b){b===void 0&&(b=m);var E=Object.getOwnPropertyDescriptor(f,m);(!E||("get"in E?!f.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return f[m]}}),Object.defineProperty(y,b,E)}:function(y,f,m,b){b===void 0&&(b=m),y[b]=f[m]}),t=p&&p.__setModuleDefault||(Object.create?function(y,f){Object.defineProperty(y,"default",{enumerable:!0,value:f})}:function(y,f){y.default=f}),i=p&&p.__importStar||(function(){var y=function(f){return y=Object.getOwnPropertyNames||function(m){var b=[];for(var E in m)Object.prototype.hasOwnProperty.call(m,E)&&(b[b.length]=E);return b},y(f)};return function(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var b=y(f),E=0;E<b.length;E++)b[E]!=="default"&&e(m,f,b[E]);return t(m,f),m}})(),o=p&&p.__exportStar||function(y,f){for(var m in y)m!=="default"&&!Object.prototype.hasOwnProperty.call(f,m)&&e(f,y,m)},r=p&&p.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(p,"__esModule",{value:!0}),p.ReasonCodes=p.KeepaliveManager=p.UniqueMessageIdProvider=p.DefaultMessageIdProvider=p.Store=p.MqttClient=p.connectAsync=p.connect=p.Client=void 0;var n=r(an());p.MqttClient=n.default;var s=r(ga());p.DefaultMessageIdProvider=s.default;var a=r(_u());p.UniqueMessageIdProvider=a.default;var l=r(Jo());p.Store=l.default;var u=i(uh());p.connect=u.default,Object.defineProperty(p,"connectAsync",{enumerable:!0,get:function(){return u.connectAsync}});var c=r(Ea());p.KeepaliveManager=c.default,p.Client=n.default,o(an(),p),o(zt(),p);var d=$r();Object.defineProperty(p,"ReasonCodes",{enumerable:!0,get:function(){return d.ReasonCodes}})}),hh=ge(p=>{ue(),ce(),he();var e=p&&p.__createBinding||(Object.create?function(n,s,a,l){l===void 0&&(l=a);var u=Object.getOwnPropertyDescriptor(s,a);(!u||("get"in u?!s.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(n,l,u)}:function(n,s,a,l){l===void 0&&(l=a),n[l]=s[a]}),t=p&&p.__setModuleDefault||(Object.create?function(n,s){Object.defineProperty(n,"default",{enumerable:!0,value:s})}:function(n,s){n.default=s}),i=p&&p.__importStar||(function(){var n=function(s){return n=Object.getOwnPropertyNames||function(a){var l=[];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(l[l.length]=u);return l},n(s)};return function(s){if(s&&s.__esModule)return s;var a={};if(s!=null)for(var l=n(s),u=0;u<l.length;u++)l[u]!=="default"&&e(a,s,l[u]);return t(a,s),a}})(),o=p&&p.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,n,a)};Object.defineProperty(p,"__esModule",{value:!0});var r=i(Eo());p.default=r,o(Eo(),p)});const ch=hh();const fh={pages:[{id:"p-default",name:"Main Console",widgets:[{id:"w1",x:0,y:0,w:4,h:5,type:"sensor",title:"Power",icon:"zap",subtitle:"Main Load",value:"2.4",unit:"kW"},{id:"w2",x:4,y:0,w:4,h:5,type:"sensor",title:"Climate",icon:"thermometer",subtitle:"Living Room",value:"22.4",unit:"C"},{id:"w3",x:8,y:0,w:4,h:5,type:"switch",title:"Lights",icon:"lightbulb",subtitle:"All Zones",status:"OFF"}]}],settings:{mqtt_host:"broker.hivemq.com",mqtt_port:8e3,mqtt_topic:"mission-control/status",ha_url:"",ha_token:""}};class dh{constructor(){const e=localStorage.getItem("mc_v2_data");this.state=e?JSON.parse(e):fh,this.activePageId=this.state.pages[0].id,this.isEditMode=!1,this.grid=null,this.mqttClient=null,this.haEntities=[],this.showEntityBrowser=!1,this.init()}init(){this.render(),this.initMqtt(),this.setupGrid(),this.bindEvents(),this.setupVisuals(),this.fetchHaEntities()}save(){localStorage.setItem("mc_v2_data",JSON.stringify(this.state))}render(){document.querySelector("#app").innerHTML=`
      <div class="grid-glow"></div>
      <div class="flex flex-col h-screen w-screen overflow-hidden">
        <!-- Dashboard Header -->
        <header class="h-20 flex items-center justify-between px-10 glass border-b z-[60]">
          <div class="flex items-center gap-16">
            <div class="group cursor-default">
              <div class="text-xl font-black tracking-[0.2em] uppercase text-white">MISSION<span class="text-accent ml-1 transition-all group-hover:drop-shadow-[0_0_12px_rgba(0,242,255,0.6)]">CONTROL</span></div>
              <div class="text-[7px] text-white/20 tracking-[0.6em] -mt-1 font-black">SYSTEM_STATION_CORE</div>
            </div>
            
            <nav id="page-tabs" class="hidden xl:flex gap-4 h-full items-center">
              ${this.state.pages.map(e=>`
                <button class="px-4 py-2 text-[10px] uppercase font-black tracking-[0.2em] transition-all border-b-2 ${e.id===this.activePageId?"tab-active text-accent":"text-white/20 border-transparent hover:text-white/60"}" data-pid="${e.id}">
                  ${e.name}
                </button>
              `).join("")}
              <button id="add-page" class="w-8 h-8 rounded-full flex items-center justify-center text-white/10 hover:text-white/40 hover:bg-white/5 transition-all text-xl">+</button>
            </nav>
          </div>

          <div class="flex items-center gap-6">
            <div class="flex flex-col items-end mr-4 hidden sm:flex">
              <div class="text-[8px] font-black text-white/30 uppercase tracking-widest leading-none">Global Sync</div>
              <div class="flex items-center gap-2 mt-1">
                <span id="mqtt-dot" class="w-1.5 h-1.5 rounded-full bg-orange-500"></span>
                <span id="mqtt-label" class="text-[9px] font-bold text-white/40 uppercase">MQTT: Offline</span>
              </div>
            </div>
            <button id="toggle-edit" class="px-5 py-2 rounded-xl border border-white/5 bg-white/5 hover:bg-white/10 text-[9px] font-black uppercase tracking-widest transition-all text-white">
              ${this.isEditMode?" Save Layout":" Customize"}
            </button>
            <button id="open-settings" class="w-10 h-10 flex items-center justify-center rounded-xl bg-white/5 hover:bg-white/10 transition-all border border-white/5 text-white"><i data-lucide="settings" class="w-4 h-4"></i></button>
          </div>
        </header>

        <!-- Main Workspace -->
        <main id="workspace" class="flex-1 relative overflow-hidden ${this.isEditMode?"edit-mode":""}">
          <div class="grid-stack custom-scrollbar overflow-y-auto h-full p-10"></div>
          
          <!-- Command Bar (Edit Mode) -->
          <div id="command-bar" class="fixed bottom-10 left-1/2 -translate-x-1/2 glass px-8 py-5 rounded-[2.5rem] border shadow-[0_25px_60px_-15px_rgba(0,0,0,0.5)] flex gap-8 items-center z-[70] ${this.isEditMode?"translate-y-0 opacity-100":"translate-y-32 opacity-0"} transition-all duration-700">
             <button id="add-widget" class="btn-primary">Add Widget</button>
             <button id="browse-entities" class="px-5 py-3 rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 text-[9px] font-black uppercase tracking-widest transition-all text-white">Browse HA</button>
             <div class="w-px h-8 bg-white/10"></div>
             <div class="flex flex-col">
                <span class="text-[8px] text-white/20 uppercase font-black tracking-widest mb-0.5">Layout Active</span>
                <span class="text-[10px] font-bold text-white/60">12-Column Technical Grid</span>
             </div>
          </div>
        </main>
      </div>

      <!-- Entity Browser Overlay -->
      <div id="entity-browser" class="fixed inset-0 bg-black/80 backdrop-blur-md z-[110] ${this.showEntityBrowser?"flex":"hidden"} items-center justify-center p-8">
        <div class="bg-surface border border-white/10 w-full max-w-4xl h-[80vh] rounded-[3rem] shadow-2xl flex flex-col overflow-hidden">
          <div class="p-10 border-b border-white/5 flex justify-between items-center text-white">
            <div>
              <h2 class="text-2xl font-black uppercase tracking-tighter">Entity Explorer</h2>
              <p class="text-[9px] text-white/30 uppercase tracking-[0.3em] mt-1">Discovered Home Assistant Nodes</p>
            </div>
            <button id="close-browser" class="text-4xl font-thin opacity-20 hover:opacity-100 transition-opacity"></button>
          </div>
          <div class="flex-1 overflow-y-auto p-10 custom-scrollbar">
            <div id="entity-list" class="grid grid-cols-1 md:grid-cols-2 gap-4">
              ${this.renderEntityList()}
            </div>
          </div>
        </div>
      </div>

      <!-- Settings Side Panel -->
      <div id="settings-panel" class="fixed inset-y-0 right-0 w-full max-w-md glass border-l z-[100] translate-x-full transition-all duration-700 ease-in-out p-16 shadow-[-50px_0_100px_rgba(0,0,0,0.5)]">
        <div class="flex justify-between items-start mb-16 text-white">
          <div>
            <h2 class="text-3xl font-black uppercase tracking-tighter">Settings</h2>
            <div class="text-[9px] font-bold text-accent uppercase tracking-[0.3em] mt-1">Connectivity backbone</div>
          </div>
          <button id="close-settings" class="text-4xl font-thin opacity-20 hover:opacity-100 transition-opacity leading-none"></button>
        </div>
        
        <div class="space-y-12">
          <!-- MQTT Config -->
          <div class="space-y-5">
            <label class="flex items-center gap-3 text-[10px] uppercase font-black text-white/30 tracking-widest">
              <i data-lucide="radio" class="w-3 h-3 text-accent"></i> MQTT Broker
            </label>
            <input id="cfg-mqtt-host" class="input-field" placeholder="Broker URL" value="${this.state.settings.mqtt_host}">
            <input id="cfg-mqtt-port" class="input-field" placeholder="Port" value="${this.state.settings.mqtt_port}">
          </div>

          <!-- HA Config -->
          <div class="space-y-5">
            <label class="flex items-center gap-3 text-[10px] uppercase font-black text-white/30 tracking-widest">
              <i data-lucide="home" class="w-3 h-3 text-accent"></i> Home Assistant
            </label>
            <input id="cfg-ha-url" class="input-field" placeholder="HA Instance URL" value="${this.state.settings.ha_url}">
            <input id="cfg-ha-token" class="input-field" type="password" placeholder="Long-Lived Access Token" value="${this.state.settings.ha_token}">
          </div>

          <div class="pt-10 border-t border-white/5 space-y-4">
            <button id="save-settings" class="w-full py-5 bg-white text-black font-black uppercase text-xs rounded-2xl hover:bg-accent transition-all shadow-[0_20px_40px_rgba(0,0,0,0.3)]">Establish Connections</button>
            <p class="text-[9px] text-white/20 text-center uppercase tracking-widest font-bold">Encrypted Local Storage Sync Active</p>
          </div>
        </div>
      </div>
    `,lucide.createIcons()}renderEntityList(){return this.haEntities.length===0?'<div class="text-white/20 text-[10px] uppercase font-bold p-8 border border-white/5 rounded-2xl text-center">No entities discovered. Check HA settings.</div>':this.haEntities.map(e=>`
      <div class="bg-white/5 border border-white/10 p-5 rounded-2xl flex items-center justify-between hover:bg-white/10 transition-colors group cursor-pointer add-ha-widget" data-eid="${e.entity_id}">
        <div class="flex items-center gap-5">
          <div class="w-10 h-10 bg-black/20 rounded-xl flex items-center justify-center text-accent">
            <i data-lucide="${this.getIconForDomain(e.entity_id)}" class="w-4 h-4"></i>
          </div>
          <div class="flex flex-col">
            <span class="text-white/80 font-bold text-sm">${e.attributes.friendly_name||e.entity_id}</span>
            <span class="text-[8px] text-white/20 font-black tracking-widest uppercase">${e.entity_id}</span>
          </div>
        </div>
        <div class="text-accent opacity-0 group-hover:opacity-100 transition-opacity text-xs font-black">+ ADD</div>
      </div>
    `).join("")}getIconForDomain(e){switch(e.split(".")[0]){case"light":return"lightbulb";case"switch":return"toggle-right";case"sensor":return"activity";case"climate":return"thermometer";case"binary_sensor":return"shield";default:return"box"}}setupGrid(){this.grid=Te.init({cellHeight:20,margin:15,float:!0,staticGrid:!this.isEditMode,column:12,animate:!0,disableOneColumnMode:!1});const e=this.state.pages.find(t=>t.id===this.activePageId);e.widgets.forEach(t=>this.addWidgetToUI(t)),this.grid.on("change",(t,i)=>{i.forEach(o=>{const r=e.widgets.find(n=>n.id===o.id);r&&(r.x=o.x,r.y=o.y,r.w=o.w,r.h=o.h)}),this.save()})}addWidgetToUI(e){const t=document.createElement("div");t.setAttribute("gs-id",e.id),t.innerHTML=`
      <div class="grid-stack-item-content group">
        <div class="widget-control">
          <button class="remove-w w-6 h-6 flex items-center justify-center bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white rounded-full transition-all" data-wid="${e.id}"></button>
        </div>
        <div class="h-full flex flex-col p-8 select-none">
           <div class="w-12 h-12 bg-white/[0.03] rounded-2xl flex items-center justify-center text-accent mb-8 shadow-inner transition-all duration-500 group-hover:scale-110 group-hover:bg-accent/10 group-hover:text-white">
             <i data-lucide="${e.icon||"box"}" class="w-5 h-5"></i>
           </div>
           <div class="space-y-1 mb-auto">
             <div class="text-[9px] text-white/30 uppercase font-black tracking-[0.2em]">${e.subtitle||""}</div>
             <div class="text-sm font-black text-white/80 group-hover:text-white transition-colors uppercase tracking-tighter">${e.title}</div>
           </div>
           ${e.value?`
             <div class="text-4xl font-black tracking-tighter mt-10 tabular-nums text-white flex items-baseline">
               ${e.value}<span class="text-xs ml-2 opacity-10 font-bold uppercase">${e.unit||""}</span>
             </div>
           `:""}
           <div class="mt-10 relative h-1 bg-white/5 rounded-full overflow-hidden">
             <div class="absolute inset-y-0 left-0 bg-accent rounded-full status-pulse shadow-[0_0_15px_#00f2ff]" style="width: 40%"></div>
           </div>
        </div>
      </div>
    `,this.grid.addWidget(t,{x:e.x,y:e.y,w:e.w,h:e.h,id:e.id}),lucide.createIcons(),t.querySelector(".remove-w").onclick=i=>{const o=i.target.dataset.wid,r=this.state.pages.find(n=>n.id===this.activePageId);r.widgets=r.widgets.filter(n=>n.id!==o),this.grid.removeWidget(t),this.save()}}setupVisuals(){document.addEventListener("mousemove",e=>{const t=e.clientX/window.innerWidth*100,i=e.clientY/window.innerHeight*100;document.documentElement.style.setProperty("--mouse-x",`${t}%`),document.documentElement.style.setProperty("--mouse-y",`${i}%`)})}bindEvents(){document.querySelectorAll("[data-pid]").forEach(e=>{e.onclick=t=>this.switchPage(t.target.dataset.pid)}),document.getElementById("toggle-edit").onclick=()=>{this.isEditMode=!this.isEditMode,this.render(),this.setupGrid(),this.bindEvents()},document.getElementById("open-settings").onclick=()=>{document.getElementById("settings-panel").classList.remove("translate-x-full")},document.getElementById("close-settings").onclick=()=>{document.getElementById("settings-panel").classList.add("translate-x-full")},document.getElementById("save-settings").onclick=()=>{this.state.settings.mqtt_host=document.getElementById("cfg-mqtt-host").value,this.state.settings.mqtt_port=document.getElementById("cfg-mqtt-port").value,this.state.settings.ha_url=document.getElementById("cfg-ha-url").value,this.state.settings.ha_token=document.getElementById("cfg-ha-token").value,this.save(),this.initMqtt(),this.fetchHaEntities(),document.getElementById("settings-panel").classList.add("translate-x-full")},document.getElementById("browse-entities").onclick=()=>{this.showEntityBrowser=!0,this.render(),this.setupGrid(),this.bindEvents()},document.getElementById("close-browser").onclick=()=>{this.showEntityBrowser=!1,this.render(),this.setupGrid(),this.bindEvents()},document.querySelectorAll(".add-ha-widget").forEach(e=>{e.onclick=()=>{const t=e.dataset.eid,i=this.haEntities.find(n=>n.entity_id===t),o=this.state.pages.find(n=>n.id===this.activePageId),r={id:"ha-"+Date.now(),x:0,y:0,w:4,h:5,type:t.split(".")[0],title:i.attributes.friendly_name||t,icon:this.getIconForDomain(t),subtitle:"HA_NODE",value:i.state,unit:i.attributes.unit_of_measurement||""};o.widgets.push(r),this.addWidgetToUI(r),this.save(),this.showEntityBrowser=!1,this.render(),this.setupGrid(),this.bindEvents()}}),document.getElementById("add-page").onclick=()=>{const e=prompt("NEW STATION NAME:");if(e){const t="p-"+Date.now();this.state.pages.push({id:t,name:e,widgets:[]}),this.switchPage(t)}},document.getElementById("add-widget").onclick=()=>{const e=this.state.pages.find(i=>i.id===this.activePageId),t={id:"w-"+Date.now(),x:0,y:0,w:4,h:5,type:"sensor",title:"DATAPOINT",icon:"activity",subtitle:"REMOTE_NODE"};e.widgets.push(t),this.addWidgetToUI(t),this.save()}}switchPage(e){this.activePageId=e,this.render(),this.setupGrid(),this.bindEvents()}initMqtt(){this.mqttClient&&this.mqttClient.end();const{mqtt_host:e,mqtt_port:t}=this.state.settings;try{this.mqttClient=ch.connect(`ws://${e}:${t}/mqtt`),this.mqttClient.on("connect",()=>this.updateMqttUI(!0)),this.mqttClient.on("close",()=>this.updateMqttUI(!1))}catch{console.warn("MQTT System Offline")}}updateMqttUI(e){const t=document.querySelector("#mqtt-dot"),i=document.querySelector("#mqtt-label");t&&i&&(t.className=`w-1.5 h-1.5 rounded-full ${e?"bg-accent shadow-[0_0_8px_#00f2ff] animate-pulse":"bg-orange-500"}`,i.textContent=`MQTT: ${e?"Active":"Offline"}`)}async fetchHaEntities(){const{ha_url:e,ha_token:t}=this.state.settings;if(!(!e||!t))try{const i=await fetch(`${e}/api/states`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});this.haEntities=await i.json(),console.log("HA Entities Loaded:",this.haEntities.length),this.showEntityBrowser&&this.render()}catch{console.error("HA Integration Failed")}}}window.addEventListener("load",()=>new dh);
